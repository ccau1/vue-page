var VuePage=function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e),i=n(t);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t,n,r,i,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){d(a,r,i,o,s,"next",e)}function s(e){d(a,r,i,o,s,"throw",e)}o(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=b(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_.apply(this,arguments)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}var I,j={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},E={widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},P=function(e,t){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},P(e,t)};function W(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var q=[],R=function(){function e(e){this.active=!0,this.effects=[],this.cleanups=[],this.vm=e}return e.prototype.run=function(e){if(this.active)try{return this.on(),e()}finally{this.off()}},e.prototype.on=function(){this.active&&(q.push(this),I=this)},e.prototype.off=function(){this.active&&(q.pop(),I=q[q.length-1])},e.prototype.stop=function(){this.active&&(this.vm.$destroy(),this.effects.forEach((function(e){return e.stop()})),this.cleanups.forEach((function(e){return e()})),this.active=!1)},e}();!function(e){function t(t){void 0===t&&(t=!1);var n,r=void 0;return function(e){var t=A;A=!1;try{e()}finally{A=t}}((function(){r=ne(V())})),n=e.call(this,r)||this,t||function(e,t){var n;if((t=t||I)&&t.active)return void t.effects.push(e);var r=null===(n=B())||void 0===n?void 0:n.proxy;r&&r.$on("hook:destroyed",(function(){return e.stop()}))}(n),n}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}P(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e)}(R);var $=void 0;try{var F=require("vue");F&&D(F)?$=F:F&&"default"in F&&D(F.default)&&($=F.default)}catch(e){}var T=null,L=null,A=!0,M="__composition_api_installed__";function D(e){return e&&te(e)&&"Vue"===e.name}function V(){return T}function N(e){if(A){var t=L;null==t||t.scope.off(),null==(L=e)||L.scope.on()}}function B(){return L}var H=new WeakMap;function z(e){if(H.has(e))return H.get(e);var t={proxy:e,update:e.$forceUpdate,type:e.$options,uid:e._uid,emit:e.$emit.bind(e),parent:null,root:null};!function(e){if(!e.scope){var t=new R(e.proxy);e.scope=t,e.proxy.$on("hook:destroyed",(function(){return t.stop()}))}e.scope}(t);return["data","props","attrs","refs","vnode","slots"].forEach((function(n){J(t,n,{get:function(){return e["$".concat(n)]}})})),J(t,"isMounted",{get:function(){return e._isMounted}}),J(t,"isUnmounted",{get:function(){return e._isDestroyed}}),J(t,"isDeactivated",{get:function(){return e._inactive}}),J(t,"emitted",{get:function(){return e._events}}),H.set(e,t),e.$parent&&(t.parent=z(e.$parent)),e.$root&&(t.root=z(e.$root)),t}function U(e){return"function"==typeof e&&/native code/.test(e.toString())}var K="undefined"!=typeof Symbol&&U(Symbol)&&"undefined"!=typeof Reflect&&U(Reflect.ownKeys),Y=function(e){return e};function J(e,t,n){var r=n.get,i=n.set;Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:r||Y,set:i||Y})}function G(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function Q(e,t){return Object.hasOwnProperty.call(e,t)}function X(e){return Array.isArray(e)}function Z(e){return null!==e&&"object"==typeof e}function ee(e){return"[object Object]"===function(e){return Object.prototype.toString.call(e)}(e)}function te(e){return"function"==typeof e}function ne(e,t){void 0===t&&(t={});var n=e.config.silent;e.config.silent=!0;var r=new e(t);return e.config.silent=n,r}function re(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e.$scopedSlots[t])return e.$scopedSlots[t].apply(e,n)}}var ie="composition-api.refKey",ae=new WeakMap,oe=new WeakMap;function se(e,t,n){var r=V().util;r.warn;var i=r.defineReactive,a=e.__ob__;function o(){a&&Z(n)&&!Q(n,"__ob__")&&we(n)}if(X(e)){if(function(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)&&t<=4294967295}(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),o(),n;if("length"===t&&n!==e.length)return e.length=n,null==a||a.dep.notify(),n}return t in e&&!(t in Object.prototype)?(e[t]=n,o(),n):e._isVue||a&&a.vmCount?n:a?(i(a.value,t,n),he(e,t,n),o(),a.dep.notify(),n):(e[t]=n,n)}var de=function(e){J(this,"value",{get:e.get,set:e.set})};function ue(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new de(e);n&&(r.effect=!0);var i=Object.seal(r);return t&&oe.set(i,!0),i}function le(e){var t;if(ce(e))return e;var n=me(((t={})[ie]=e,t));return ue({get:function(){return n[ie]},set:function(e){return n[ie]=e}})}function ce(e){return e instanceof de}function pe(e,t){t in e||se(e,t,void 0);var n=e[t];return ce(n)?n:ue({get:function(){return e[t]},set:function(n){return e[t]=n}})}function fe(e){var t;return Boolean(e&&Q(e,"__ob__")&&"object"==typeof e.__ob__&&(null===(t=e.__ob__)||void 0===t?void 0:t.__raw__))}function ge(e){var t;return Boolean(e&&Q(e,"__ob__")&&"object"==typeof e.__ob__&&!(null===(t=e.__ob__)||void 0===t?void 0:t.__raw__))}function ve(e){if(!(!ee(e)||fe(e)||X(e)||ce(e)||(t=e,n=V(),n&&t instanceof n)||ae.has(e))){var t,n;ae.set(e,!0);for(var r=Object.keys(e),i=0;i<r.length;i++)he(e,r[i])}}function he(e,t,n){if("__ob__"!==t&&!fe(e[t])){var r,i,a=Object.getOwnPropertyDescriptor(e,t);if(a){if(!1===a.configurable)return;r=a.get,i=a.set,r&&!i||2!==arguments.length||(n=e[t])}ve(n),J(e,t,{get:function(){var i=r?r.call(e):n;return t!==ie&&ce(i)?i.value:i},set:function(a){r&&!i||(t!==ie&&ce(n)&&!ce(a)?n.value=a:i?(i.call(e,a),n=a):n=a,ve(a))}})}}function ye(e){var t,n=T||$;n.observable?t=n.observable(e):t=ne(n,{data:{$$state:e}})._data.$$state;return Q(t,"__ob__")||we(t),t}function we(e,t){var n,r;if(void 0===t&&(t=new Set),!t.has(e)&&!Q(e,"__ob__")&&Object.isExtensible(e)){G(e,"__ob__",function(e){void 0===e&&(e={});return{value:e,dep:{notify:Y,depend:Y,addSub:Y,removeSub:Y}}}(e)),t.add(e);try{for(var i=W(Object.keys(e)),a=i.next();!a.done;a=i.next()){var o=e[a.value];(ee(o)||X(o))&&!fe(o)&&Object.isExtensible(o)&&we(o,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}function me(e){if(!Z(e))return e;if(!ee(e)&&!X(e)||fe(e)||!Object.isExtensible(e))return e;var t=ye(e);return ve(t),t}var be={set:function(e,t,n){(e.__composition_api_state__=e.__composition_api_state__||{})[t]=n},get:function(e,t){return(e.__composition_api_state__||{})[t]}};function _e(e){var t=be.get(e,"rawBindings")||{};if(t&&Object.keys(t).length){for(var n=e.$refs,r=be.get(e,"refs")||[],i=0;i<r.length;i++){var a=t[d=r[i]];!n[d]&&a&&ce(a)&&(a.value=null)}var o=Object.keys(n),s=[];for(i=0;i<o.length;i++){var d;a=t[d=o[i]];n[d]&&a&&ce(a)&&(a.value=n[d],s.push(d))}be.set(e,"refs",s)}}function xe(e){for(var t=[e._vnode];t.length;){var n=t.pop();if(n.context&&_e(n.context),n.children)for(var r=0;r<n.children.length;++r)t.push(n.children[r])}}function Se(e,t){var n,r;if(e){var i=be.get(e,"attrBindings");if(i||t){if(!i){var a=me({});i={ctx:t,data:a},be.set(e,"attrBindings",i),J(t,"attrs",{get:function(){return null==i?void 0:i.data},set:function(){}})}var o=e.$attrs,s=function(t){Q(i.data,t)||J(i.data,t,{get:function(){return e.$attrs[t]}})};try{for(var d=W(Object.keys(o)),u=d.next();!u.done;u=d.next()){s(u.value)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}}}function Ce(e,t){var n=e.$options._parentVnode;if(n){for(var r=be.get(e,"slots")||[],i=function(e,t){var n;if(e){if(e._normalized)return e._normalized;for(var r in n={},e)e[r]&&"$"!==r[0]&&(n[r]=!0)}else n={};for(var r in t)r in n||(n[r]=!0);return n}(n.data.scopedSlots,e.$slots),a=0;a<r.length;a++){i[s=r[a]]||delete t[s]}var o=Object.keys(i);for(a=0;a<o.length;a++){var s;t[s=o[a]]||(t[s]=re(e,s))}be.set(e,"slots",o)}}function ke(e,t,n){var r=B();N(e);try{return t(e)}catch(e){if(!n)throw e;n(e)}finally{N(r)}}function Oe(e){function t(e,n){if(void 0===n&&(n=new Set),!n.has(e)&&ee(e)&&!ce(e)&&!ge(e)&&!fe(e)){var r=V().util.defineReactive;Object.keys(e).forEach((function(i){var a=e[i];r(e,i,a),a&&(n.add(a),t(a,n))}))}}function n(e,t){return void 0===t&&(t=new Map),t.has(e)?t.get(e):(t.set(e,!1),X(e)&&ge(e)?(t.set(e,!0),!0):!(!ee(e)||fe(e)||ce(e))&&Object.keys(e).some((function(r){return n(e[r],t)})))}e.mixin({beforeCreate:function(){var e=this,r=e.$options,i=r.setup,a=r.render;a&&(r.render=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return ke(z(e),(function(){return a.apply(t,n)}))});if(!i)return;if(!te(i))return;var o=r.data;r.data=function(){return function(e,r){void 0===r&&(r={});var i,a=e.$options.setup,o=function(e){var t={slots:{}},n=["emit"];return["root","parent","refs","listeners","isServer","ssrContext"].forEach((function(n){var r="$".concat(n);J(t,n,{get:function(){return e[r]},set:function(){}})})),Se(e,t),n.forEach((function(n){var r="$".concat(n);J(t,n,{get:function(){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e[r].apply(e,t)}}})})),t}(e),s=z(e);if(s.setupContext=o,G(r,"__ob__",function(){return ye({}).__ob__}()),Ce(e,o.slots),ke(s,(function(){i=a(r,o)})),!i)return;if(te(i)){var d=i;return void(e.$options.render=function(){return Ce(e,o.slots),ke(s,(function(){return d()}))})}if(Z(i)){ge(i)&&(i=function(e){if(!ee(e))return e;var t={};for(var n in e)t[n]=pe(e,n);return t}(i)),be.set(e,"rawBindings",i);var u=i;Object.keys(u).forEach((function(r){var i=u[r];if(!ce(i))if(ge(i))X(i)&&(i=le(i));else if(te(i)){var a=i;i=i.bind(e),Object.keys(a).forEach((function(e){i[e]=a[e]}))}else Z(i)?n(i)&&t(i):i=le(i);!function(e,t,n){var r=e.$options.props;t in e||r&&Q(r,t)||(ce(n)?J(e,t,{get:function(){return n.value},set:function(e){n.value=e}}):J(e,t,{get:function(){return ge(n)&&n.__ob__.dep.depend(),n},set:function(e){n=e}}))}(e,r,i)}))}}(e,e.$props),te(o)?o.call(e,e):o||{}}},mounted:function(){xe(this)},beforeUpdate:function(){Se(this)},updated:function(){xe(this)}})}function Ie(e,t){if(!e)return t;if(!t)return e;for(var n,r,i,a=K?Reflect.ownKeys(e):Object.keys(e),o=0;o<a.length;o++)"__ob__"!==(n=a[o])&&(r=t[n],i=e[n],Q(t,n)?r!==i&&ee(r)&&!ce(r)&&ee(i)&&!ce(i)&&Ie(i,r):t[n]=i);return t}function je(e){(function(e){return T&&Q(e,M)})(e)||(e.config.optionMergeStrategies.setup=function(e,t){return function(n,r){return Ie(te(e)?e(n,r)||{}:void 0,te(t)?t(n,r)||{}:void 0)}},function(e){T=e,Object.defineProperty(e,M,{configurable:!0,writable:!0,value:!0})}(e),Oe(e))}var Ee={install:function(e){return je(e)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(Ee);const Pe=new Uint8Array(256);let We=Pe.length;function qe(){return We>Pe.length-16&&(r.default.randomFillSync(Pe),We=0),Pe.slice(We,We+=16)}var Re=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const $e=[];for(let e=0;e<256;++e)$e.push((e+256).toString(16).substr(1));function Fe(e,t=0){const n=($e[e[t+0]]+$e[e[t+1]]+$e[e[t+2]]+$e[e[t+3]]+"-"+$e[e[t+4]]+$e[e[t+5]]+"-"+$e[e[t+6]]+$e[e[t+7]]+"-"+$e[e[t+8]]+$e[e[t+9]]+"-"+$e[e[t+10]]+$e[e[t+11]]+$e[e[t+12]]+$e[e[t+13]]+$e[e[t+14]]+$e[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Re.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n}function Te(e,t,n){const r=(e=e||{}).random||(e.rng||qe)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return Fe(r)}var Le={props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},inject:["getLocale","setMessage"],mounted:function(){var e=this;this.$nextTick((function(){e.$refs.titleInput.style.height="",e.$refs.titleInput.style.height=e.$refs.titleInput.scrollHeight+"px",e.$refs.textInput.style.height="",e.$refs.textInput.style.height=e.$refs.textInput.scrollHeight+"px"}))},data:function(){return{isOpen:!0}},methods:{onCloseAlert:function(){var e=this;this.$data.isOpen=!1,setTimeout((function(){return e.$data.isOpen=!0}),1e3)},updateText:function(e,t){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__".concat(e),value:t.replaceAll(/\n|\r/g,"")})}},computed:{alertStyles:function(){var e,t;return"custom"!==(null===(e=this.widget)||void 0===e?void 0:e.properties.type)||null!==(t=this.widget)&&void 0!==t&&t.properties.customColor?{}:o({backgroundColor:this.widget.properties.customBackgroundColor,borderColor:this.widget.properties.customBorderColor||"transparent"},this.widget.properties.customTextColor?{color:this.widget.properties.customTextColor}:{})}}};function Ae(e,t,n,r,i,a,o,s,d,u){"boolean"!=typeof o&&(d=s,s=o,o=!1);const l="function"==typeof n?n.options:n;let c;if(e&&e.render&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),r&&(l._scopeId=r),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):t&&(c=o?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),c)if(l.functional){const e=l.render;l.render=function(t,n){return c.call(n),e(t,n)}}else{const e=l.beforeCreate;l.beforeCreate=e?[].concat(e,c):[c]}return n}const Me="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function De(e){return(e,t)=>function(e,t){const n=Me?t.media||"default":e,r=Ne[n]||(Ne[n]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",t.media&&r.element.setAttribute("media",t.media),void 0===Ve&&(Ve=document.head||document.getElementsByTagName("head")[0]),Ve.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(n),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{const e=r.ids.size-1,t=document.createTextNode(n),i=r.element.childNodes;i[e]&&r.element.removeChild(i[e]),i.length?r.element.insertBefore(t,i[e]):r.element.appendChild(t)}}}(e,t)}let Ve;const Ne={};var Be=Ae({render:function(){var e,t=this,n=this,r=n.$createElement,i=n._self._c||r;return n.isOpen?i("div",{staticClass:"alert",class:(e={},e[n.widget.properties.type]=!0,e),style:n.alertStyles},[i("h3",{staticClass:"title"},[i("textarea",{ref:"titleInput",staticClass:"text-input",attrs:{oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},domProps:{value:n.t("__title",n.widget.id)},on:{input:function(e){return n.updateText("title",e.target.value)},load:function(){t.style.height="",t.style.height=t.scrollHeight+"px"}}})]),n._v(" "),i("p",[i("textarea",{ref:"textInput",staticClass:"text-input",attrs:{oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},domProps:{value:n.t("__text",n.widget.id)},on:{input:function(e){return n.updateText("text",e.target.value)},load:function(){t.style.height="",t.style.height=t.scrollHeight+"px"}}})]),n._v(" "),n.widget.properties.showCloseBtn?i("a",{staticClass:"close-button",on:{click:n.onCloseAlert}},[n._v("x")]):n._e()]):n._e()},staticRenderFns:[]},(function(e){e&&e("data-v-1c7a8776_0",{source:".alert[data-v-1c7a8776]{padding:18px 18px;margin:10px 0;border-radius:10px;background-color:#f4f6f8;border:1px solid #e5e9ed;position:relative}.alert.success[data-v-1c7a8776]{background-color:#ebf7ee;border-color:#e2f1e7}.alert.info[data-v-1c7a8776]{background-color:#e6f0f8;border-color:#cad9e7}.alert.danger[data-v-1c7a8776]{background-color:#fdede9;border-color:#f2e1dd}.alert.warning[data-v-1c7a8776]{background-color:#fef8ea;border-color:#f4eada}.alert .title[data-v-1c7a8776]{margin:0 0 10px 0;font-weight:700}.alert>.close-button[data-v-1c7a8776]{position:absolute;top:0;right:0;padding:18px 18px;cursor:pointer;transform:scaleX(1.2)}.text-input[data-v-1c7a8776]{font-size:inherit;font-weight:inherit;font-family:inherit;border:none;outline:0;width:100%;background-color:transparent;resize:none;min-height:10px;margin-bottom:-15px}",map:void 0,media:void 0})}),Le,"data-v-1c7a8776",false,undefined,!1,De,void 0,void 0),He={create:function(e){return{id:Te(),type:"alert",properties:o({type:"default"},e)}},display:Ae({render:function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return t.isOpen?r("div",{staticClass:"alert",class:(e={},e[t.widget.properties.type]=!0,e),style:t.alertStyles},[r("h3",{staticClass:"title"},[t._v("\n    "+t._s(t.t("__title"))+"\n  ")]),t._v(" "),r("div",{domProps:{innerHTML:t._s(t.t("__text"))}}),t._v(" "),t.widget.properties.showCloseBtn?r("a",{staticClass:"close-button",on:{click:t.onCloseAlert}},[t._v("x")]):t._e()]):t._e()},staticRenderFns:[]},(function(e){e&&e("data-v-6da03338_0",{source:".alert[data-v-6da03338]{padding:18px 18px;margin:10px 0;border-radius:10px;background-color:#f4f6f8;border:1px solid #e5e9ed;position:relative}.alert.success[data-v-6da03338]{background-color:#ebf7ee;border-color:#e2f1e7}.alert.info[data-v-6da03338]{background-color:#e6f0f8;border-color:#cad9e7}.alert.danger[data-v-6da03338]{background-color:#fdede9;border-color:#f2e1dd}.alert.warning[data-v-6da03338]{background-color:#fef8ea;border-color:#f4eada}.alert .title[data-v-6da03338]{margin:0 0 10px 0;font-weight:700}.alert>.close-button[data-v-6da03338]{position:absolute;top:0;right:0;padding:18px 18px;cursor:pointer;transform:scaleX(1.2)}",map:void 0,media:void 0})}),{props:o({},{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}}),data:function(){return{isOpen:!0}},computed:{alertStyles:function(){return"custom"!==this.widget.properties.type||this.widget.properties.customColor?{}:o({backgroundColor:this.widget.properties.customBackgroundColor,borderColor:this.widget.properties.customBorderColor||"transparent"},this.widget.properties.customTextColor?{color:this.widget.properties.customTextColor}:{})}},methods:{onCloseAlert:function(){this.$data.isOpen=!1}}},"data-v-6da03338",false,undefined,!1,De,void 0,void 0),builder:Be,readOnly:Ae({render:function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return t.isOpen?r("div",{staticClass:"alert",class:(e={},e[t.widget.properties.type]=!0,e),style:t.alertStyles},[r("h3",[t._v(t._s(t.t("__title",t.widget.id)))]),t._v(" "),r("p",[t._v(t._s(t.t("__text",t.widget.id)))]),t._v(" "),t.widget.properties.showCloseBtn?r("a",{staticClass:"close-button",on:{click:t.onCloseAlert}},[t._v("x")]):t._e()]):t._e()},staticRenderFns:[]},(function(e){e&&e("data-v-20431722_0",{source:".alert[data-v-20431722]{padding:10px;margin:10px;border-radius:10px;background-color:#f4f6f8;border:1px solid #e5e9ed;position:relative}.alert.success[data-v-20431722]{background-color:#ebf7ee;border-color:#e2f1e7}.alert.info[data-v-20431722]{background-color:#e6f0f8;border-color:#cad9e7}.alert.danger[data-v-20431722]{background-color:#fdede9;border-color:#f2e1dd}.alert.warning[data-v-20431722]{background-color:#fef8ea;border-color:#f4eada}.alert>.close-button[data-v-20431722]{position:absolute;top:0;right:0;padding:10px 15px;cursor:pointer;transform:scaleX(1.2)}",map:void 0,media:void 0})}),{props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},data:function(){return{isOpen:!0}},computed:{alertStyles:function(){var e,t,n,r,i,a;return"custom"!==(null===(e=this.widget)||void 0===e?void 0:e.properties.type)||null!==(t=this.widget)&&void 0!==t&&t.properties.customColor?{}:o({backgroundColor:null===(n=this.widget)||void 0===n?void 0:n.properties.customBackgroundColor,borderColor:(null===(r=this.widget)||void 0===r?void 0:r.properties.customBorderColor)||"transparent"},null!==(i=this.widget)&&void 0!==i&&i.properties.customTextColor?{color:null===(a=this.widget)||void 0===a?void 0:a.properties.customTextColor}:{})}},methods:{onCloseAlert:function(){this.$data.isOpen=!1}}},"data-v-20431722",false,undefined,!1,De,void 0,void 0)},ze=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.widget.properties.tagType,{tag:"component",staticClass:"header"},[n("input",{staticClass:"header-input",attrs:{type:"text"},domProps:{value:e.t("__label",e.widget.id)},on:{input:e.onTextChange}})])},staticRenderFns:[]},(function(e){e&&e("data-v-724eb4fb_0",{source:".header-input[data-v-724eb4fb]{font-size:inherit;font-family:inherit;font-weight:inherit;outline:0;border:none;width:100%;background-color:transparent}",map:void 0,media:void 0})}),{props:E,inject:["getLocale","setMessage"],methods:{onTextChange:function(e){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__label",value:e.target.value})}}},"data-v-724eb4fb",false,undefined,!1,De,void 0,void 0),Ue=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-wrapper"},[n("a",{staticClass:"tag-selection",class:{selected:"h1"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h1")}}},[e._v("H1")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h2"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h2")}}},[e._v("H2")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h3"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h3")}}},[e._v("H3")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h4"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h4")}}},[e._v("H4")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h5"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h5")}}},[e._v("H5")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h6"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h6")}}},[e._v("H6")])])},staticRenderFns:[]},(function(e){e&&e("data-v-04ea9b20_0",{source:".control-wrapper[data-v-04ea9b20]{display:flex;flex-direction:row;border-radius:8px;border:1px solid #e8e8e8;background-color:#fff;overflow:hidden}.tag-selection[data-v-04ea9b20]{height:30px;width:40px;display:flex;align-items:center;justify-content:center;cursor:pointer}.tag-selection[data-v-04ea9b20]:hover{background-color:#e8e8e8}.tag-selection.selected[data-v-04ea9b20]{background-color:#03a9f4;color:#fff}",map:void 0,media:void 0})}),{props:{widget:Object,widgets:Object,widgetItems:Object,pageState:Object,setWidgetState:Function},inject:["updateWidget"],methods:{setTagType:function(e){this.widget.properties.tagType=e,this.updateWidget(this.widget)}}},"data-v-04ea9b20",false,undefined,!1,De,void 0,void 0),Ke={create:function(e){return{id:Te(),type:"header",properties:o({tagType:"h1"},e)}},display:Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"header"},[e._v("\n    "+e._s(e.t("__label",e.widget.id))+"\n  ")])},staticRenderFns:[]},undefined,{},"data-v-5a79aac4",false,undefined,!1,void 0,void 0,void 0),builder:ze,builderControl:Ue,readOnly:Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"header"},[e._v("\n    "+e._s(e.t("__label"))+"\n  ")])},staticRenderFns:[]},(function(e){e&&e("data-v-a2123f0c_0",{source:".header[data-v-a2123f0c]{padding:0 10px}",map:void 0,media:void 0})}),{},"data-v-a2123f0c",false,undefined,!1,De,void 0,void 0)},Ye=Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"html-wrapper",domProps:{innerHTML:e._s(e.t("__html",e.widget.id))}})},staticRenderFns:[]},undefined,{props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}}},"data-v-34dadf78",false,undefined,!1,void 0,void 0,void 0),Je={create:function(e){return{id:Te(),type:"html",properties:o({from:"default"},e)}},display:Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"html-wrapper",domProps:{innerHTML:e._s(e.t("__html"))}})},staticRenderFns:[]},undefined,{props:o({},{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}})},"data-v-29b29f8c",false,undefined,!1,void 0,void 0,void 0),builder:Ye,readOnly:Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{domProps:{innerHTML:e._s(e.widget.properties.html)}})},staticRenderFns:[]},undefined,{props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}}},undefined,false,undefined,!1,void 0,void 0,void 0)};
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function Ge(e){return"[object Object]"===Object.prototype.toString.call(e)}var Qe=Object.prototype,Xe=Qe.toString,Ze=Qe.hasOwnProperty,et=/^\s*function (\w+)/;function tt(e){var t,n=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:e;if(n){var r=n.toString().match(et);return r?r[1]:""}return""}var nt=function(e){var t,n;return!1!==Ge(e)&&(void 0===(t=e.constructor)||!1!==Ge(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))},rt=function(e){return e},it=function(e,t){return Ze.call(e,t)},at=Array.isArray||function(e){return"[object Array]"===Xe.call(e)},ot=function(e){return"[object Function]"===Xe.call(e)};function st(e,t,n){var r;void 0===n&&(n=!1);var i=!0,a="",o=function(e){return nt(e)&&it(e,"_vueTypes_name")}(r=nt(e)?e:{type:e})?r._vueTypes_name+" - ":"";if(function(e){return nt(e)&&(it(e,"type")||["_vueTypes_name","validator","default","required"].some((function(t){return it(e,t)})))}(r)&&null!==r.type){if(void 0===r.type||!0===r.type)return i;if(!r.required&&void 0===t)return i;at(r.type)?(i=r.type.some((function(e){return!0===st(e,t,!0)})),a=r.type.map((function(e){return tt(e)})).join(" or ")):i="Array"===(a=tt(r))?at(t):"Object"===a?nt(t):"String"===a||"Number"===a||"Boolean"===a||"Function"===a?function(e){if(null==e)return"";var t=e.constructor.toString().match(et);return t?t[1]:""}(t)===a:t instanceof r.type}if(!i){var s=o+'value "'+t+'" should be of type "'+a+'"';return!1===n?(rt(s),!1):s}if(it(r,"validator")&&ot(r.validator)){var d=rt,u=[];if(rt=function(e){u.push(e)},i=r.validator(t),rt=d,!i){var l=(u.length>1?"* ":"")+u.join("\n* ");return u.length=0,!1===n?(rt(l),i):l}}return i}function dt(e,t){var n=Object.defineProperties(t,{_vueTypes_name:{value:e,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(e){return void 0===e?(it(this,"default")&&delete this.default,this):ot(e)||!0===st(this,e,!0)?(this.default=at(e)?function(){return[].concat(e)}:nt(e)?function(){return Object.assign({},e)}:e,this):(rt(this._vueTypes_name+' - invalid default value: "'+e+'"'),this)}}}),r=n.validator;return ot(r)&&(n.validator=function(e,t){return Object.defineProperty(e.bind(t),"__original",{value:e})}(r,n)),n}function ut(e){return dt("arrayOf",{type:Array,validator:function(t){var n="",r=t.every((function(t){return!0===(n=st(e,t,!0))}));return r||rt("arrayOf - value validation error:\n"+function(e){return e.replace(/^(?!\s*$)/gm,"  ")}(n)),r}})}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function lt(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var ct=function(e,t){return e.reduce((function(e,n){var r="[object "+n+"]";return t?e[r]=n:e[n]=r,e}),{})},pt=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},ft=["Array","Arguments","Object","RegExp","Symbol","Map","Set","Date","Error","Event","Generator","Promise","WeakMap","WeakSet","DocumentFragment","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","ArrayBuffer","DataView","DocumentFragment","Window","String","Number","Boolean","Function","Undefined","GeneratorFunction","BigInt","Null"],gt=ct(ft,!1),vt=ct(ft,!0),ht=pt([gt.Generator,gt.Promise,gt.WeakMap,gt.WeakSet]),yt=pt([gt.Map,gt.Set]),wt=pt([gt.Date,gt.RegExp]),mt=pt(["bigint","boolean","function","number","string","undefined"]),bt=pt([gt.Arguments,gt.Array]),_t=pt([gt.RegExp,gt.Symbol]),xt=pt([gt.Float32Array,gt.Float64Array,gt.Int8Array,gt.Int16Array,gt.Int32Array,gt.Uint8Array,gt.Uint8ClampedArray,gt.Uint16Array,gt.Uint32Array]),St="undefined"!=typeof Buffer&&"function"==typeof Buffer.from,Ct="function"==typeof Uint16Array;function kt(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function Ot(e){return Buffer.from(e).toString("utf8")}function It(e){return""}var jt=St?Ot:Ct?kt:It,Et=/\[object ([HTML|SVG](.*)Element)\]/,Pt=Object.prototype.toString,Wt=Object.keys;function qt(e,t){return e>t}function Rt(e,t){return e[0]>t[0]}function $t(e,t){for(var n,r,i=0;i<e.length;++i){for(r=e[i],n=i-1;~n&&t(e[n],r);--n)e[n+1]=e[n];e[n+1]=r}return e}function Ft(e){for(var t,n=$t(Wt(e),qt),r={},i=0;i<n.length;++i)r[t=n[i]]=e[t];return r}function Tt(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n+1;return 0}function Lt(e,t,n,r){if(!r){var i=typeof e;if(mt[i])return i+"|"+e;if(null===e)return e+"|"+e}var a,o=r||Pt.call(e);return bt[o]?e:o===gt.Object?Ft(e):_t[o]?vt[o]+"|"+e.toString():yt[o]?e instanceof Map?function(e,t,n){var r=[];e.forEach((function(e,i){r.push([At(i,t,n),At(e,t,n)])})),$t(r,Rt);for(var i,a=0;a<r.length;++a)i=r[a],r[a]="["+i[0]+","+i[1]+"]";return"Map|["+r.join(",")+"]"}(e,t,n):function(e,t,n){var r=[];return e.forEach((function(e){r.push(At(e,t,n))})),$t(r,qt),"Set|["+r.join(",")+"]"}(e,t,n):o===gt.Date?vt[o]+"|"+e.getTime():o===gt.Error?vt[o]+"|"+e.stack:o===gt.Event?{bubbles:(a=e).bubbles,cancelBubble:a.cancelBubble,cancelable:a.cancelable,composed:a.composed,currentTarget:a.currentTarget,defaultPrevented:a.defaultPrevented,eventPhase:a.eventPhase,isTrusted:a.isTrusted,returnValue:a.returnValue,target:a.target,type:a.type}:ht[o]?vt[o]+"|NOT_ENUMERABLE":Et.test(o)?o.slice(8,-1)+"|"+e.outerHTML:o===gt.DocumentFragment?vt[o]+"|"+function(e){for(var t=e.children,n=[],r=0;r<t.length;++r)n.push(t[r].outerHTML);return n.join(",")}(e):xt[o]?vt[o]+"|"+e.join(","):o===gt.ArrayBuffer?vt[o]+"|"+jt(e):o===gt.DataView?vt[o]+"|"+jt(e.buffer):e}function At(e,t,n){if(!e||"object"!=typeof e)return Lt(e,t,n);var r=Pt.call(e);return wt[r]?Lt(e,t,n,r):JSON.stringify(e,function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),function(n,r){if("object"==typeof r)if(e.length){var i=Tt(e,this);0===i?e.push(this):(e.splice(i),t.splice(i)),t.push(n);var a=Tt(e,r);if(0!==a)return"[~"+(t.slice(0,a).join(".")||".")+"]";e.push(r)}else e[0]=r,t[0]=n;return n&&this[n]instanceof Date?Lt(this[n],e,t,gt.Date):Lt(r,e,t)}}(t,n))}function Mt(e){return function(e){for(var t,n=e.length,r=5381,i=52711;n--;)r=33*r^(t=e.charCodeAt(n)),i=33*i^t;return 4096*(r>>>0)+(i>>>0)}(At(e))}function Dt(e,t){return Mt(e)===Mt(t)}Dt.all=function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(!Dt(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!1;return!0},Dt.any=function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(Dt(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!0;return!1},Dt.not=function(e,t){return Mt(e)!==Mt(t)},Mt.is=Dt;var Vt=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n=Mt)&&n.__esModule?n:{default:n};var a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t;var i={cache:!0};if(void 0===r&&(r=i),"function"!=typeof n?(this.value=n,this.type=this.constructor.CONSTANT):(this.calculationMethod=n,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(r.priority||1,10),this.options=Object.assign({},i,r),this.cacheKeyMethod=this.defaultCacheKeys,this}return r(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(e,t){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(e,t)}},{key:"defaultCacheKeys",value:function(e,t){return{params:t,id:e}}},{key:"getCacheKey",value:function(t){if(!0===this.options.cache){var n=this.cacheKeyMethod(this.id,t);return e.hashFromObject(n)}}}],[{key:"hashFromObject",value:function(e){return(0,i.default)(e)}}]),e}();a.CONSTANT="CONSTANT",a.DYNAMIC="DYNAMIC",t.default=a})),Nt=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{("undefined"!=typeof process&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||"undefined"!=typeof window&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}catch(e){}}}));var Bt=function(e){return!!e&&"object"==typeof e},Ht=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=a(Nt),i=a(Bt);function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("Condition: constructor options required");var n=e.booleanOperator(t);if(Object.assign(this,t),n){var r=t[n];if(!Array.isArray(r))throw new Error('"'+n+'" must be an array');this.operator=n,this.priority=parseInt(t.priority,10)||1,this[n]=r.map((function(t){return new e(t)}))}else{if(!Object.prototype.hasOwnProperty.call(t,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(t,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(t,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(t,"priority")&&(t.priority=parseInt(t.priority,10))}}return n(e,[{key:"toJSON",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n={};this.priority&&(n.priority=this.priority);var r=e.booleanOperator(this);return r?n[r]=this[r].map((function(e){return e.toJSON(t)})):(n.operator=this.operator,n.value=this.value,n.fact=this.fact,void 0!==this.factResult&&(n.factResult=this.factResult),void 0!==this.result&&(n.result=this.result),this.params&&(n.params=this.params),this.path&&(n.path=this.path)),t?JSON.stringify(n):n}},{key:"_getValue",value:function(e){var t=this.value;return(0,i.default)(t)&&Object.prototype.hasOwnProperty.call(t,"fact")?e.factValue(t.fact,t.params,t.path):Promise.resolve(t)}},{key:"evaluate",value:function(e,t){var n=this;if(!e)return Promise.reject(new Error("almanac required"));if(!t)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var i=t.get(this.operator);return i?this._getValue(e).then((function(t){return e.factValue(n.fact,n.params,n.path).then((function(e){var a=i.evaluate(e,t);return(0,r.default)("condition::evaluate <"+JSON.stringify(e)+" "+n.operator+" "+JSON.stringify(t)+"?> ("+a+")"),{result:a,leftHandSideValue:e,rightHandSideValue:t,operator:n.operator}}))})):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==e.booleanOperator(this)}}],[{key:"booleanOperator",value:function(e){return Object.prototype.hasOwnProperty.call(e,"any")?"any":Object.prototype.hasOwnProperty.call(e,"all")?"all":void 0}}]),e}();t.default=o})),zt=lt((function(e){var t=function(){function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=Promise}catch(e){r=function(){}}function i(a,s,d,u,l){"object"==typeof s&&(d=s.depth,u=s.prototype,l=s.includeNonEnumerable,s=s.circular);var c=[],p=[],f="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===d&&(d=1/0),function a(d,g){if(null===d)return null;if(0===g)return d;var v,h;if("object"!=typeof d)return d;if(e(d,t))v=new t;else if(e(d,n))v=new n;else if(e(d,r))v=new r((function(e,t){d.then((function(t){e(a(t,g-1))}),(function(e){t(a(e,g-1))}))}));else if(i.__isArray(d))v=[];else if(i.__isRegExp(d))v=new RegExp(d.source,o(d)),d.lastIndex&&(v.lastIndex=d.lastIndex);else if(i.__isDate(d))v=new Date(d.getTime());else{if(f&&Buffer.isBuffer(d))return v=Buffer.allocUnsafe?Buffer.allocUnsafe(d.length):new Buffer(d.length),d.copy(v),v;e(d,Error)?v=Object.create(d):void 0===u?(h=Object.getPrototypeOf(d),v=Object.create(h)):(v=Object.create(u),h=u)}if(s){var y=c.indexOf(d);if(-1!=y)return p[y];c.push(d),p.push(v)}for(var w in e(d,t)&&d.forEach((function(e,t){var n=a(t,g-1),r=a(e,g-1);v.set(n,r)})),e(d,n)&&d.forEach((function(e){var t=a(e,g-1);v.add(t)})),d){var m;h&&(m=Object.getOwnPropertyDescriptor(h,w)),m&&null==m.set||(v[w]=a(d[w],g-1))}if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(d);for(w=0;w<b.length;w++){var _=b[w];(!(S=Object.getOwnPropertyDescriptor(d,_))||S.enumerable||l)&&(v[_]=a(d[_],g-1),S.enumerable||Object.defineProperty(v,_,{enumerable:!1}))}}if(l){var x=Object.getOwnPropertyNames(d);for(w=0;w<x.length;w++){var S,C=x[w];(S=Object.getOwnPropertyDescriptor(d,C))&&S.enumerable||(v[C]=a(d[C],g-1),Object.defineProperty(v,C,{enumerable:!1}))}}return v}(a,d)}function a(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=a,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},i.__getRegExpFlags=o,i}();e.exports&&(e.exports=t)})),Ut=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n=zt)&&n.__esModule?n:{default:n};var a=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conditions=(0,i.default)(t),this.event=(0,i.default)(n),this.priority=(0,i.default)(r),this.name=(0,i.default)(a),this.result=null}return r(e,[{key:"setResult",value:function(e){this.result=e}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return e?JSON.stringify(t):t}}]),e}();t.default=a})),Kt=lt((function(e,t){!function(t){var n=Object.hasOwnProperty,r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i="object"==typeof process&&"function"==typeof process.nextTick,a="function"==typeof Symbol,o="object"==typeof Reflect,s="function"==typeof setImmediate?setImmediate:setTimeout,d=a?o&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function u(){this._events={},this._conf&&l.call(this,this._conf)}function l(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==t&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var p=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function f(e,n){for(var r={},i=e.length,a=n?value.length:0,o=0;o<i;o++)r[e[o]]=o<a?n[o]:t;return r}function g(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var a=e._observers;a?a.push(this):e._observers=[this]}function v(e,r,i,a){var o=Object.assign({},r);if(!e)return o;if("object"!=typeof e)throw TypeError("options must be an object");var s,d,u,l=Object.keys(e),c=l.length;function p(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var f=0;f<c;f++){if(s=l[f],!a&&!n.call(r,s))throw Error('Unknown "'+s+'" option');(d=e[s])!==t&&(u=i[s],o[s]=u?u(d,p):d)}return o}function h(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function y(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var a=typeof e;if(a===r||a===i)return e;n(t)}:function(r,i){for(var a=typeof r,o=n;o-- >0;)if(a===e[o])return r;i(t)}}Object.assign(g.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,a=this._emitter,o=this._listeners,s=function(){var r=p.apply(null,arguments),o={data:r,name:t,original:e};if(n){var s=n.call(i,o);!1!==s&&a.emit.apply(a,[o.name].concat(r))}else a.emit.apply(a,[t].concat(r))};if(o[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,a._newListener&&a._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===o[e]&&(o[e]=s,r._on.call(i,e,s))},a.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!a.hasListeners(n)&&o[e]&&(o[e]=null,r._off.call(i,e,s))},o[e]=null,a.on("removeListener",this._onRemoveListener)):(o[e]=s,r._on.call(i,e,s))},unsubscribe:function(e){var t,n,r,i=this,a=this._listeners,o=this._emitter,s=this._off,u=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function l(){i._onNewListener&&(o.off("newListener",i._onNewListener),o.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=_.call(o,i);o._observers.splice(e,1)}if(e){if(!(t=a[e]))return;s.call(u,e,t),delete a[e],--this._listenersCount||l()}else{for(r=(n=d(a)).length;r-- >0;)e=n[r],s.call(u,e,a[e]);this._listeners={},this._listenersCount=0,l()}}});var w=y(["function"]),m=y(["object","function"]);function b(e,t,n){var r,i,a,o=0,s=new e((function(d,u,l){function c(){i&&(i=null),o&&(clearTimeout(o),o=0)}n=v(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof l;var p=function(e){c(),d(e)},f=function(e){c(),u(e)};r?t(p,f,l):(i=[function(e){f(e||Error("canceled"))}],t(p,f,(function(e){if(a)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),a=!0),n.timeout>0&&(o=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",o=0,s.cancel(e),u(e)}),n.timeout))}));return r||(s.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),s}function _(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function x(e,t,n,r,i){if(!n)return null;if(0===r){var a=typeof t;if("string"===a){var o,s,u=0,l=0,c=this.delimiter,p=c.length;if(-1!==(s=t.indexOf(c))){o=new Array(5);do{o[u++]=t.slice(l,s),l=s+p}while(-1!==(s=t.indexOf(c,l)));o[u++]=t.slice(l),t=o,i=u}else t=[t],i=1}else"object"===a?i=t.length:(t=[t],i=1)}var f,g,v,h,y,w,m,b=null,_=t[r],S=t[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(e&&e.push(n._listeners),b=[n]):(e&&e.push.apply(e,n._listeners),b=[n]));else{if("*"===_){for(s=(w=d(n)).length;s-- >0;)"_listeners"!==(f=w[s])&&(m=x(e,t,n[f],r+1,i))&&(b?b.push.apply(b,m):b=m);return b}if("**"===_){for((y=r+1===i||r+2===i&&"*"===S)&&n._listeners&&(b=x(e,t,n,i,i)),s=(w=d(n)).length;s-- >0;)"_listeners"!==(f=w[s])&&("*"===f||"**"===f?(n[f]._listeners&&!y&&(m=x(e,t,n[f],i,i))&&(b?b.push.apply(b,m):b=m),m=x(e,t,n[f],r,i)):m=x(e,t,n[f],f===S?r+2:r,i),m&&(b?b.push.apply(b,m):b=m));return b}n[_]&&(b=x(e,t,n[_],r+1,i))}if((g=n["*"])&&x(e,t,g,r+1,i),v=n["**"])if(r<i)for(v._listeners&&x(e,t,v,i,i),s=(w=d(v)).length;s-- >0;)"_listeners"!==(f=w[s])&&(f===S?x(e,t,v[f],r+2,i):f===_?x(e,t,v[f],r+1,i):((h={})[f]=v[f],x(e,t,{"**":h},r+1,i)));else v._listeners?x(e,t,v,i,i):v["*"]&&v["*"]._listeners&&x(e,t,v["*"],i,i);return b}function S(e,t,n){var r,i,a=0,o=0,s=this.delimiter,d=s.length;if("string"==typeof e)if(-1!==(r=e.indexOf(s))){i=new Array(5);do{i[a++]=e.slice(o,r),o=r+d}while(-1!==(r=e.indexOf(s,o)));i[a++]=e.slice(o)}else i=[e],a=1;else i=e,a=e.length;if(a>1)for(r=0;r+1<a;r++)if("**"===i[r]&&"**"===i[r+1])return;var u,l=this.listenerTree;for(r=0;r<a;r++)if(l=l[u=i[r]]||(l[u]={}),r===a-1)return l._listeners?("function"==typeof l._listeners&&(l._listeners=[l._listeners]),n?l._listeners.unshift(t):l._listeners.push(t),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,c.call(this,l._listeners.length,u))):l._listeners=t,!0;return!0}function C(e,t,n,r){for(var i,a,o,s,u=d(e),l=u.length,c=e._listeners;l-- >0;)i=e[a=u[l]],o="_listeners"===a?n:n?n.concat(a):[a],s=r||"symbol"==typeof a,c&&t.push(s?o:o.join(this.delimiter)),"object"==typeof i&&C.call(this,i,t,o,s);return t}function k(e){for(var t,n,r,i=d(e),a=i.length;a-- >0;)(t=e[n=i[a]])&&(r=!0,"_listeners"===n||k(t)||delete e[n]);return r}function O(e,t,n){this.emitter=e,this.event=t,this.listener=n}function I(e,n,r){if(!0===r)o=!0;else if(!1===r)a=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var a=r.async,o=r.promisify,d=r.nextTick,u=r.objectify}if(a||d||o){var l=n,c=n._origin||n;if(d&&!i)throw Error("process.nextTick is not supported");o===t&&(o="AsyncFunction"===n.constructor.name),n=function(){var e=arguments,t=this,n=this.event;return o?d?Promise.resolve():new Promise((function(e){s(e)})).then((function(){return t.event=n,l.apply(t,e)})):(d?process.nextTick:s)((function(){t.event=n,l.apply(t,e)}))},n._async=!0,n._origin=c}return[n,u?new O(this,e,n):this]}function j(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,l.call(this,e)}O.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},j.EventEmitter2=j,j.prototype.listenTo=function(e,n,i){if("object"!=typeof e)throw TypeError("target musts be an object");var a=this;function o(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,r=i.reducers,o=_.call(a,e);n=-1===o?new g(a,e,i):a._observers[o];for(var s,u=d(t),l=u.length,c="function"==typeof r,p=0;p<l;p++)s=u[p],n.subscribe(s,t[s]||s,c?r:r&&r[s])}return i=v(i,{on:t,off:t,reducers:t},{on:w,off:w,reducers:m}),r(n)?o(f(n)):o("string"==typeof n?f(n.split(/\s+/)):n),this},j.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,a=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),a=!0);return a},j.prototype.delimiter=".",j.prototype.setMaxListeners=function(e){e!==t&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},j.prototype.getMaxListeners=function(){return this._maxListeners},j.prototype.event="",j.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},j.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},j.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},j.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},j.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},j.prototype._many=function(e,t,n,r,i){var a=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&a.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r,i)},j.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,i,o,s=arguments[0],d=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return!1;if(d&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(n=s.length,a)for(r=0;r<n;r++)if("symbol"==typeof s[r]){o=!0;break}o||(s=s.join(this.delimiter))}var l,c=arguments.length;if(this._all&&this._all.length)for(r=0,n=(l=this._all.slice()).length;r<n;r++)switch(this.event=s,c){case 1:l[r].call(this,s);break;case 2:l[r].call(this,s,arguments[1]);break;case 3:l[r].call(this,s,arguments[1],arguments[2]);break;default:l[r].apply(this,arguments)}if(d)l=[],x.call(this,l,e,this.listenerTree,0,n);else{if("function"==typeof(l=this._events[s])){switch(this.event=s,c){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];l.apply(this,t)}return!0}l&&(l=l.slice())}if(l&&l.length){if(c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=l.length;r<n;r++)switch(this.event=s,c){case 1:l[r].call(this);break;case 2:l[r].call(this,arguments[1]);break;case 3:l[r].call(this,arguments[1],arguments[2]);break;default:l[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===s)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},j.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,i,o,s=arguments[0],d=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(d&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(r=s.length,a)for(i=0;i<r;i++)if("symbol"==typeof s[i]){t=!0;break}t||(s=s.join(this.delimiter))}var l,c=[],p=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=s,p){case 1:c.push(this._all[i].call(this,s));break;case 2:c.push(this._all[i].call(this,s,arguments[1]));break;case 3:c.push(this._all[i].call(this,s,arguments[1],arguments[2]));break;default:c.push(this._all[i].apply(this,arguments))}if(d?(l=[],x.call(this,l,e,this.listenerTree,0)):l=this._events[s],"function"==typeof l)switch(this.event=s,p){case 1:c.push(l.call(this));break;case 2:c.push(l.call(this,arguments[1]));break;case 3:c.push(l.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(p-1),o=1;o<p;o++)n[o-1]=arguments[o];c.push(l.apply(this,n))}else if(l&&l.length){if(l=l.slice(),p>3)for(n=new Array(p-1),o=1;o<p;o++)n[o-1]=arguments[o];for(i=0,r=l.length;i<r;i++)switch(this.event=s,p){case 1:c.push(l[i].call(this));break;case 2:c.push(l[i].call(this,arguments[1]));break;case 3:c.push(l[i].call(this,arguments[1],arguments[2]));break;default:c.push(l[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===s)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(c)},j.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},j.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},j.prototype.onAny=function(e){return this._onAny(e,!1)},j.prototype.prependAny=function(e){return this._onAny(e,!0)},j.prototype.addListener=j.prototype.on,j.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},j.prototype._on=function(e,n,r,i){if("function"==typeof e)return this._onAny(e,n),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");this._events||u.call(this);var a,o=this;return i!==t&&(n=(a=I.call(this,e,n,i))[0],o=a[1]),this._newListener&&this.emit("newListener",e,n),this.wildcard?(S.call(this,e,n,r),o):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(n):this._events[e].push(n),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=n,o)},j.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var a="string"==typeof e?e.split(this.delimiter):e.slice();if(!(i=x.call(this,null,a,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n})}for(var o=0;o<i.length;o++){var s=i[o];if(n=s._listeners,r(n)){for(var d=-1,u=0,l=n.length;u<l;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){d=u;break}if(d<0)continue;return this.wildcard?s._listeners.splice(d,1):this._events[e].splice(d,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&k(this.listenerTree),this},j.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},j.prototype.removeListener=j.prototype.off,j.prototype.removeAllListeners=function(e){if(e===t)return!this._events||u.call(this),this;if(this.wildcard){var n,r=x.call(this,null,e,this.listenerTree,0);if(!r)return this;for(n=0;n<r.length;n++)r[n]._listeners=null;this.listenerTree&&k(this.listenerTree)}else this._events&&(this._events[e]=null);return this},j.prototype.listeners=function(e){var n,r,i,a,o,s=this._events;if(e===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(a=(n=d(s)).length,i=[];a-- >0;)"function"==typeof(r=s[n[a]])?i.push(r):i.push.apply(i,r);return i}if(this.wildcard){if(!(o=this.listenerTree))return[];var u=[],l="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,u,l,o,0),u}return s&&(r=s[e])?"function"==typeof r?[r]:r:[]},j.prototype.eventNames=function(e){var t=this._events;return this.wildcard?C.call(this,this.listenerTree,[],null,e):t?d(t):[]},j.prototype.listenerCount=function(e){return this.listeners(e).length},j.prototype.hasListeners=function(e){if(this.wildcard){var n=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,n,r,this.listenerTree,0),n.length>0}var i=this._events,a=this._all;return!!(a&&a.length||i&&(e===t?d(i).length:i[e]))},j.prototype.listenersAny=function(){return this._all?this._all:[]},j.prototype.waitFor=function(e,n){var r=this,i=typeof n;return"number"===i?n={timeout:n}:"function"===i&&(n={filter:n}),b((n=v(n,{timeout:0,filter:t,handleError:!1,Promise:Promise,overload:!1},{filter:w,Promise:h})).Promise,(function(t,i,a){function o(){var a=n.filter;if(!a||a.apply(r,arguments))if(r.off(e,o),n.handleError){var s=arguments[0];s?i(s):t(p.apply(null,arguments).slice(1))}else t(p.apply(null,arguments))}a((function(){r.off(e,o)})),r._on(e,o,!1)}),{timeout:n.timeout,overload:n.overload})};var E=j.prototype;Object.defineProperties(j,{defaultMaxListeners:{get:function(){return E._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");E._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return b((n=v(n,{Promise:Promise,timeout:0,overload:!1},{Promise:h})).Promise,(function(n,r,i){var a;if("function"==typeof e.addEventListener)return a=function(){n(p.apply(null,arguments))},i((function(){e.removeEventListener(t,a)})),void e.addEventListener(t,a,{once:!0});var o,s=function(){o&&e.removeListener("error",o),n(p.apply(null,arguments))};"error"!==t&&(o=function(n){e.removeListener(t,s),r(n)},e.once("error",o)),i((function(){o&&e.removeListener("error",o),e.removeListener(t,s)})),e.once(t,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(E,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),e.exports=j}()})),Yt=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=o(Ht),i=o(Ut),a=o(Nt);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));"string"==typeof e&&(e=JSON.parse(e)),e&&e.conditions&&n.setConditions(e.conditions),e&&e.onSuccess&&n.on("success",e.onSuccess),e&&e.onFailure&&n.on("failure",e.onFailure),e&&(e.name||0===e.name)&&n.setName(e.name);var r=e&&e.priority||1;n.setPriority(r);var i=e&&e.event||{type:"unknown"};return n.setEvent(i),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"setPriority",value:function(e){if((e=parseInt(e,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=e,this}},{key:"setName",value:function(e){if(!e&&0!==e)throw new Error('Rule "name" must be defined');return this.name=e,this}},{key:"setConditions",value:function(e){if(!Object.prototype.hasOwnProperty.call(e,"all")&&!Object.prototype.hasOwnProperty.call(e,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new r.default(e),this}},{key:"setEvent",value:function(e){if(!e)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(e,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.ruleEvent={type:e.type},e.params&&(this.ruleEvent.params=e.params),this}},{key:"getEvent",value:function(){return this.ruleEvent}},{key:"getPriority",value:function(){return this.priority}},{key:"getConditions",value:function(){return this.conditions}},{key:"getEngine",value:function(){return this.engine}},{key:"setEngine",value:function(e){return this.engine=e,this}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.ruleEvent,name:this.name};return e?JSON.stringify(t):t}},{key:"prioritizeConditions",value:function(e){var t=this,n=e.reduce((function(e,n){var r=n.priority;if(!r){var i=t.engine.getFact(n.fact);r=i&&i.priority||1}return e[r]||(e[r]=[]),e[r].push(n),e}),{});return Object.keys(n).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(e){return n[e]}))}},{key:"evaluate",value:function(e){var t=this,n=new i.default(this.conditions,this.ruleEvent,this.priority,this.name),r=function(n,r){return Array.isArray(n)||(n=[n]),Promise.all(n.map((function(n){return function(n){if(n.isBooleanOperator()){var r=n[n.operator];return("all"===n.operator?d(r):s(r)).then((function(e){var t=!0===e;return n.result=t,t}))}return n.evaluate(e,t.engine.operators).then((function(e){var t=e.result;return n.factResult=e.leftHandSideValue,n.result=t,t}))}(n)}))).then((function(e){return(0,a.default)("rule::evaluateConditions results",e),r.call(e,(function(e){return!0===e}))}))},o=function(e,n){if(0===e.length)return Promise.resolve(!0);var i=Array.prototype.some;"all"===n&&(i=Array.prototype.every);for(var o=t.prioritizeConditions(e),s=Promise.resolve(),d=function(e){var t=o[e],d=!1;s=s.then((function(e){return"any"===n&&!0===e||d?((0,a.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),d=!0,!0):"all"===n&&!1===e||d?((0,a.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),d=!0,!1):r(t,i)}))},u=0;u<o.length;u++)d(u);return s},s=function(e){return o(e,"any")},d=function(e){return o(e,"all")},u=function(r){n.setResult(r);var i=r?"success":"failure";return t.emitAsync(i,n.event,e,n).then((function(){return n}))};return n.conditions.any?s(n.conditions.any).then((function(e){return u(e)})):d(n.conditions.all).then((function(e){return u(e)}))}}]),t}(o(Kt).default);t.default=s})),Jt=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=String(t),!t)throw new Error("Missing operator name");if("function"!=typeof n)throw new Error("Missing operator callback");this.cb=n,this.factValueValidator=r,this.factValueValidator||(this.factValueValidator=function(){return!0})}return n(e,[{key:"evaluate",value:function(e,t){return this.factValueValidator(e)&&this.cb(e,t)}}]),e}();t.default=r})),Gt=lt((function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0}),t.UndefinedFactError=function(e){function t(){var e;n(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return s.code="UNDEFINED_FACT",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}()}));const{hasOwnProperty:Qt}=Object.prototype;function Xt(e,t){return(e=e.slice()).push(t),e}function Zt(e,t){return(t=t.slice()).unshift(e),t}class en extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}}function tn(e,t,n,r,i){if(!(this instanceof tn))try{return new tn(e,t,n,r,i)}catch(e){if(!e.avoidNew)throw e;return e.value}"string"==typeof e&&(i=r,r=n,n=t,t=e,e=null);const a=e&&"object"==typeof e;if(e=e||{},this.json=e.json||n,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=!Qt.call(e,"wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||r||null,this.otherTypeCallback=e.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==e.autostart){const r={path:a?e.path:t};a?"json"in e&&(r.json=e.json):r.json=n;const i=this.evaluate(r);if(!i||"object"!=typeof i)throw new en(i);return i}}tn.prototype.evaluate=function(e,t,n,r){let i=this.parent,a=this.parentProperty,{flatten:o,wrap:s}=this;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=r||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"==typeof e&&!Array.isArray(e)){if(!e.path&&""!==e.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Qt.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:t}=e),o=Qt.call(e,"flatten")?e.flatten:o,this.currResultType=Qt.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=Qt.call(e,"sandbox")?e.sandbox:this.currSandbox,s=Qt.call(e,"wrap")?e.wrap:s,this.currPreventEval=Qt.call(e,"preventEval")?e.preventEval:this.currPreventEval,n=Qt.call(e,"callback")?e.callback:n,this.currOtherTypeCallback=Qt.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,i=Qt.call(e,"parent")?e.parent:i,a=Qt.call(e,"parentProperty")?e.parentProperty:a,e=e.path}if(i=i||null,a=a||null,Array.isArray(e)&&(e=tn.toPathString(e)),!e&&""!==e||!t)return;const d=tn.toPathArray(e);"$"===d[0]&&d.length>1&&d.shift(),this._hasParentSelector=null;const u=this._trace(d,t,["$"],i,a,n).filter((function(e){return e&&!e.isParentSelector}));return u.length?s||1!==u.length||u[0].hasArrExpr?u.reduce(((e,t)=>{const n=this._getPreferredOutput(t);return o&&Array.isArray(n)?e=e.concat(n):e.push(n),e}),[]):this._getPreferredOutput(u[0]):s?[]:void 0},tn.prototype._getPreferredOutput=function(e){const t=this.currResultType;switch(t){case"all":{const t=Array.isArray(e.path)?e.path:tn.toPathArray(e.path);return e.pointer=tn.toPointer(t),e.path="string"==typeof e.path?e.path:tn.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return tn.toPathString(e[t]);case"pointer":return tn.toPointer(e.path);default:throw new TypeError("Unknown result type")}},tn.prototype._handleCallback=function(e,t,n){if(t){const r=this._getPreferredOutput(e);e.path="string"==typeof e.path?e.path:tn.toPathString(e.path),t(r,n,e)}},tn.prototype._trace=function(e,t,n,r,i,a,o,s){let d;if(!e.length)return d={path:n,value:t,parent:r,parentProperty:i,hasArrExpr:o},this._handleCallback(d,a,"value"),d;const u=e[0],l=e.slice(1),c=[];function p(e){Array.isArray(e)?e.forEach((e=>{c.push(e)})):c.push(e)}if(("string"!=typeof u||s)&&t&&Qt.call(t,u))p(this._trace(l,t[u],Xt(n,u),t,u,a,o));else if("*"===u)this._walk(u,l,t,n,r,i,a,((e,t,n,r,i,a,o,s)=>{p(this._trace(Zt(e,n),r,i,a,o,s,!0,!0))}));else if(".."===u)p(this._trace(l,t,n,r,i,a,o)),this._walk(u,l,t,n,r,i,a,((e,t,n,r,i,a,o,s)=>{"object"==typeof r[e]&&p(this._trace(Zt(t,n),r[e],Xt(i,e),r,e,s,!0))}));else{if("^"===u)return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:l,isParentSelector:!0};if("~"===u)return d={path:Xt(n,u),value:i,parent:r,parentProperty:null},this._handleCallback(d,a,"property"),d;if("$"===u)p(this._trace(l,t,n,null,null,a,o));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(u))p(this._slice(u,l,t,n,r,i,a));else if(0===u.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(u,l,t,n,r,i,a,((e,t,n,r,i,a,o,s)=>{this._eval(t.replace(/^\?\((.*?)\)$/u,"$1"),r[e],e,i,a,o)&&p(this._trace(Zt(e,n),r,i,a,o,s,!0))}))}else if("("===u[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");p(this._trace(Zt(this._eval(u,t,n[n.length-1],n.slice(0,-1),r,i),l),t,n,r,i,a,o))}else if("@"===u[0]){let e=!1;const o=u.slice(1,-2);switch(o){case"scalar":t&&["object","function"].includes(typeof t)||(e=!0);break;case"boolean":case"string":case"undefined":case"function":typeof t===o&&(e=!0);break;case"integer":!Number.isFinite(t)||t%1||(e=!0);break;case"number":Number.isFinite(t)&&(e=!0);break;case"nonFinite":"number"!=typeof t||Number.isFinite(t)||(e=!0);break;case"object":t&&typeof t===o&&(e=!0);break;case"array":Array.isArray(t)&&(e=!0);break;case"other":e=this.currOtherTypeCallback(t,n,r,i);break;case"null":null===t&&(e=!0);break;default:throw new TypeError("Unknown value type "+o)}if(e)return d={path:n,value:t,parent:r,parentProperty:i},this._handleCallback(d,a,"value"),d}else if("`"===u[0]&&t&&Qt.call(t,u.slice(1))){const e=u.slice(1);p(this._trace(l,t[e],Xt(n,e),t,e,a,o,!0))}else if(u.includes(",")){const e=u.split(",");for(const o of e)p(this._trace(Zt(o,l),t,n,r,i,a,!0))}else!s&&t&&Qt.call(t,u)&&p(this._trace(l,t[u],Xt(n,u),t,u,a,o,!0))}if(this._hasParentSelector)for(let e=0;e<c.length;e++){const n=c[e];if(n&&n.isParentSelector){const s=this._trace(n.expr,t,n.path,r,i,a,o);if(Array.isArray(s)){c[e]=s[0];const t=s.length;for(let n=1;n<t;n++)e++,c.splice(e,0,s[n])}else c[e]=s}}return c},tn.prototype._walk=function(e,t,n,r,i,a,o,s){if(Array.isArray(n)){const d=n.length;for(let u=0;u<d;u++)s(u,e,t,n,r,i,a,o)}else n&&"object"==typeof n&&Object.keys(n).forEach((d=>{s(d,e,t,n,r,i,a,o)}))},tn.prototype._slice=function(e,t,n,r,i,a,o){if(!Array.isArray(n))return;const s=n.length,d=e.split(":"),u=d[2]&&Number.parseInt(d[2])||1;let l=d[0]&&Number.parseInt(d[0])||0,c=d[1]&&Number.parseInt(d[1])||s;l=l<0?Math.max(0,l+s):Math.min(s,l),c=c<0?Math.max(0,c+s):Math.min(s,c);const p=[];for(let e=l;e<c;e+=u){this._trace(Zt(e,t),n,r,i,a,o,!0).forEach((e=>{p.push(e)}))}return p},tn.prototype._eval=function(e,t,n,r,i,a){e.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=a,e=e.replace(/@parentProperty/gu,"_$_parentProperty")),e.includes("@parent")&&(this.currSandbox._$_parent=i,e=e.replace(/@parent/gu,"_$_parent")),e.includes("@property")&&(this.currSandbox._$_property=n,e=e.replace(/@property/gu,"_$_property")),e.includes("@path")&&(this.currSandbox._$_path=tn.toPathString(r.concat([n])),e=e.replace(/@path/gu,"_$_path")),e.includes("@root")&&(this.currSandbox._$_root=this.json,e=e.replace(/@root/gu,"_$_root")),/@([.\s)[])/u.test(e)&&(this.currSandbox._$_v=t,e=e.replace(/@([.\s)[])/gu,"_$_v$1"));try{return this.vm.runInNewContext(e,this.currSandbox)}catch(t){throw console.log(t),new Error("jsonPath: "+t.message+": "+e)}},tn.cache={},tn.toPathString=function(e){const t=e,n=t.length;let r="$";for(let e=1;e<n;e++)/^(~|\^|@.*?\(\))$/u.test(t[e])||(r+=/^[0-9*]+$/u.test(t[e])?"["+t[e]+"]":"['"+t[e]+"']");return r},tn.toPointer=function(e){const t=e,n=t.length;let r="";for(let e=1;e<n;e++)/^(~|\^|@.*?\(\))$/u.test(t[e])||(r+="/"+t[e].toString().replace(/~/gu,"~0").replace(/\//gu,"~1"));return r},tn.toPathArray=function(e){const{cache:t}=tn;if(t[e])return t[e].concat();const n=[],r=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replace(/[['](\??\(.*?\))[\]']/gu,(function(e,t){return"[#"+(n.push(t)-1)+"]"})).replace(/\[['"]([^'\]]*)['"]\]/gu,(function(e,t){return"['"+t.replace(/\./gu,"%@%").replace(/~/gu,"%%@@%%")+"']"})).replace(/~/gu,";~;").replace(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replace(/%@%/gu,".").replace(/%%@@%%/gu,"~").replace(/(?:;)?(\^+)(?:;)?/gu,(function(e,t){return";"+t.split("").join(";")+";"})).replace(/;;;|;;/gu,";..;").replace(/;$|'?\]|'$/gu,"").split(";").map((function(e){const t=e.match(/#(\d+)/u);return t&&t[1]?n[t[1]]:e}));return t[e]=r,t[e].concat()},tn.prototype.vm=i.default;var nn,rn=(nn=Object.freeze({__proto__:null,JSONPath:tn}))&&nn.default||nn,an=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(Vt),a=s(Nt),o=s(Bt);function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(0,rn.JSONPath)({path:t,json:e,wrap:!1})}var l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var s in d(this,e),this.factMap=new Map(t),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(o.allowUndefinedFacts),this.pathResolver=o.pathResolver||u,this.events={success:[],failure:[]},this.ruleResults=[],r){var l=void 0;l=r[s]instanceof i.default?r[s]:new i.default(s,r[s]),this._addConstantFact(l),(0,a.default)("almanac::constructor initialized runtime fact:"+l.id+" with "+l.value+"<"+n(l.value)+">")}}return r(e,[{key:"addEvent",value:function(e,t){if(!t)throw new Error('outcome required: "success" | "failure"]');this.events[t].push(e)}},{key:"getEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?this.events[e]:this.events.success.concat(this.events.failure)}},{key:"addResult",value:function(e){this.ruleResults.push(e)}},{key:"getResults",value:function(){return this.ruleResults}},{key:"_getFact",value:function(e){return this.factMap.get(e)}},{key:"_addConstantFact",value:function(e){this.factMap.set(e.id,e),this._setFactValue(e,{},e.value)}},{key:"_setFactValue",value:function(e,t,n){var r=e.getCacheKey(t),i=Promise.resolve(n);return r&&this.factResultsCache.set(r,i),i}},{key:"addRuntimeFact",value:function(e,t){(0,a.default)("almanac::addRuntimeFact id:"+e);var n=new i.default(e,t);return this._addConstantFact(n)}},{key:"factValue",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=void 0,d=this._getFact(e);if(void 0===d)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new Gt.UndefinedFactError("Undefined fact: "+e));if(d.isConstant())s=Promise.resolve(d.calculate(r,this));else{var u=d.getCacheKey(r),l=u&&this.factResultsCache.get(u);l?(s=Promise.resolve(l),(0,a.default)("almanac::factValue cache hit for fact:"+e)):((0,a.default)("almanac::factValue cache miss for fact:"+e+"; calculating"),s=this._setFactValue(d,r,d.calculate(r,this)))}return i?((0,a.default)("condition::evaluate extracting object property "+i),s.then((function(e){if((0,o.default)(e)){var r=t.pathResolver(e,i);return(0,a.default)("condition::evaluate extracting object property "+i+", received: "+JSON.stringify(r)),r}return(0,a.default)("condition::evaluate could not compute object path("+i+") of non-object: "+e+" <"+(void 0===e?"undefined":n(e))+">; continuing with "+e),e}))):s}}]),e}();t.default=l})),on=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Jt)&&n.__esModule?n:{default:n};var i=[];function a(e){return"NaN"!==Number.parseFloat(e).toString()}i.push(new r.default("equal",(function(e,t){return e===t}))),i.push(new r.default("notEqual",(function(e,t){return e!==t}))),i.push(new r.default("in",(function(e,t){return t.indexOf(e)>-1}))),i.push(new r.default("notIn",(function(e,t){return-1===t.indexOf(e)}))),i.push(new r.default("contains",(function(e,t){return e.indexOf(t)>-1}),Array.isArray)),i.push(new r.default("doesNotContain",(function(e,t){return-1===e.indexOf(t)}),Array.isArray)),i.push(new r.default("lessThan",(function(e,t){return e<t}),a)),i.push(new r.default("lessThanInclusive",(function(e,t){return e<=t}),a)),i.push(new r.default("greaterThan",(function(e,t){return e>t}),a)),i.push(new r.default("greaterThanInclusive",(function(e,t){return e>=t}),a)),t.default=i})),sn=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FINISHED=t.RUNNING=t.READY=void 0;var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=l(Vt),i=l(Yt),a=l(Jt),o=l(an),s=l(Kt),d=l(on),u=l(Nt);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=t.READY="READY",g=t.RUNNING="RUNNING",v=t.FINISHED="FINISHED",h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.rules=[],r.allowUndefinedFacts=n.allowUndefinedFacts||!1,r.pathResolver=n.pathResolver,r.operators=new Map,r.facts=new Map,r.status=f,e.map((function(e){return r.addRule(e)})),d.default.map((function(e){return r.addOperator(e)})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"addRule",value:function(e){if(!e)throw new Error("Engine: addRule() requires options");var t=void 0;if(e instanceof i.default)t=e;else{if(!Object.prototype.hasOwnProperty.call(e,"event"))throw new Error('Engine: addRule() argument requires "event" property');if(!Object.prototype.hasOwnProperty.call(e,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');t=new i.default(e)}return t.setEngine(this),this.rules.push(t),this.prioritizedRules=null,this}},{key:"updateRule",value:function(e){var t=this.rules.findIndex((function(t){return t.name===e.name}));if(!(t>-1))throw new Error("Engine: updateRule() rule not found");this.rules.splice(t,1),this.addRule(e),this.prioritizedRules=null}},{key:"removeRule",value:function(e){var t=!1;if(e instanceof i.default){var n=this.rules.indexOf(e);n>-1&&(t=Boolean(this.rules.splice(n,1).length))}else{var r=this.rules.filter((function(t){return t.name!==e}));t=r.length!==this.rules.length,this.rules=r}return t&&(this.prioritizedRules=null),t}},{key:"addOperator",value:function(e,t){var n=void 0;n=e instanceof a.default?e:new a.default(e,t),(0,u.default)("engine::addOperator name:"+n.name),this.operators.set(n.name,n)}},{key:"removeOperator",value:function(e){var t=void 0;return t=e instanceof a.default?e.name:e,this.operators.delete(t)}},{key:"addFact",value:function(e,t,n){var i=e,a=void 0;return e instanceof r.default?(i=e.id,a=e):a=new r.default(e,t,n),(0,u.default)("engine::addFact id:"+i),this.facts.set(i,a),this}},{key:"removeFact",value:function(e){var t=void 0;return t=e instanceof r.default?e.id:e,this.facts.delete(t)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var e=this.rules.reduce((function(e,t){var n=t.priority;return e[n]||(e[n]=[]),e[n].push(t),e}),{});this.prioritizedRules=Object.keys(e).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(t){return e[t]}))}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=v,this}},{key:"getFact",value:function(e){return this.facts.get(e)}},{key:"evaluateRules",value:function(e,t){var n=this;return Promise.all(e.map((function(e){return n.status!==g?((0,u.default)("engine::run status:"+n.status+"; skipping remaining rules"),Promise.resolve()):e.evaluate(t).then((function(e){return(0,u.default)("engine::run ruleResult:"+e.result),t.addResult(e),e.result?(t.addEvent(e.event,"success"),n.emitAsync("success",e.event,t,e).then((function(){return n.emitAsync(e.event.type,e.event.params,t,e)}))):(t.addEvent(e.event,"failure"),n.emitAsync("failure",e.event,t,e))}))})))}},{key:"run",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)("engine::run started"),this.status=g;var n={allowUndefinedFacts:this.allowUndefinedFacts,pathResolver:this.pathResolver},r=new o.default(this.facts,t,n),i=this.prioritizeRules(),a=Promise.resolve();return new Promise((function(t,n){i.map((function(t){return a=a.then((function(){return e.evaluateRules(t,r)})).catch(n)})),a.then((function(){e.status=v,(0,u.default)("engine::run completed");var n=r.getResults().reduce((function(e,t){return e[t.result?"results":"failureResults"].push(t),e}),{results:[],failureResults:[]}),i=n.results,a=n.failureResults;t({almanac:r,results:i,failureResults:a,events:r.getEvents("success"),failureEvents:r.getEvents("failure")})})).catch(n)}))}}]),t}(s.default);t.default=h})),dn=lt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=t.Operator=t.Rule=t.Fact=void 0,t.default=function(e,t){return new n.default(e,t)};var n=o(sn),r=o(Vt),i=o(Yt),a=o(Jt);function o(e){return e&&e.__esModule?e:{default:e}}t.Fact=r.default,t.Rule=i.default,t.Operator=a.default,t.Engine=n.default})),un=lt((function(e,t){e.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",o="hour",s="day",d="week",u="month",l="quarter",c="year",p="date",f="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},w={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),a=n-i<0,o=t.clone().add(r+(a?-1:1),u);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:c,w:d,d:s,D:p,h:o,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m="en",b={};b[m]=h;var _=function(e){return e instanceof k},x=function e(t,n,r){var i;if(!t)return m;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(i=a),n&&(b[a]=n,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;b[s]=t,i=s}return!r&&i&&(m=i),i||!r&&m},S=function(e,t){if(_(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new k(n)},C=w;C.l=x,C.i=_,C.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var k=function(){function h(e){this.$L=x(e.locale,null,!0),this.parse(e)}var y=h.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(g);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return C},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return S(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<S(e)},y.$g=function(e,t,n){return C.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!C.u(t)||t,l=C.p(e),f=function(e,t){var i=C.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},g=function(e,t){return C.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,h=this.$M,y=this.$D,w="set"+(this.$u?"UTC":"");switch(l){case c:return r?f(1,0):f(31,11);case u:return r?f(1,h):f(0,h+1);case d:var m=this.$locale().weekStart||0,b=(v<m?v+7:v)-m;return f(r?y-b:y+(6-b),h);case s:case p:return g(w+"Hours",0);case o:return g(w+"Minutes",1);case a:return g(w+"Seconds",2);case i:return g(w+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,d=C.p(e),l="set"+(this.$u?"UTC":""),f=(n={},n[s]=l+"Date",n[p]=l+"Date",n[u]=l+"Month",n[c]=l+"FullYear",n[o]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[d],g=d===s?this.$D+(t-this.$W):t;if(d===u||d===c){var v=this.clone().set(p,1);v.$d[f](g),v.init(),this.$d=v.set(p,Math.min(this.$D,v.daysInMonth())).$d}else f&&this.$d[f](g);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[C.p(e)]()},y.add=function(r,l){var p,f=this;r=Number(r);var g=C.p(l),v=function(e){var t=S(f);return C.w(t.date(t.date()+Math.round(e*r)),f)};if(g===u)return this.set(u,this.$M+r);if(g===c)return this.set(c,this.$y+r);if(g===s)return v(1);if(g===d)return v(7);var h=(p={},p[a]=t,p[o]=n,p[i]=e,p)[g]||1,y=this.$d.getTime()+r*h;return C.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=C.z(this),a=this.$H,o=this.$m,s=this.$M,d=n.weekdays,u=n.months,l=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].substr(0,a)},c=function(e){return C.s(a%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:C.s(s+1,2,"0"),MMM:l(n.monthsShort,s,u,3),MMMM:l(u,s),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,d,2),ddd:l(n.weekdaysShort,this.$W,d,3),dddd:d[this.$W],H:String(a),HH:C.s(a,2,"0"),h:c(1),hh:c(2),a:p(a,o,!0),A:p(a,o,!1),m:String(o),mm:C.s(o,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:i};return r.replace(v,(function(e,t){return t||g[e]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,p,f){var g,v=C.p(p),h=S(r),y=(h.utcOffset()-this.utcOffset())*t,w=this-h,m=C.m(this,h);return m=(g={},g[c]=m/12,g[u]=m,g[l]=m/3,g[d]=(w-y)/6048e5,g[s]=(w-y)/864e5,g[o]=w/n,g[a]=w/t,g[i]=w/e,g)[v]||w,f?m:C.a(m)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=x(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return C.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},h}(),O=k.prototype;return S.prototype=O,[["$ms",r],["$s",i],["$m",a],["$H",o],["$W",s],["$M",u],["$y",c],["$D",p]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,k,S),e.$i=!0),S},S.locale=x,S.isDayjs=_,S.unix=function(e){return S(1e3*e)},S.en=b[m],S.Ls=b,S.p={},S}()})),ln={regex:/^ABS\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=(n[0]||"").split(Cn("\\s*,\\s*"));if(1!==i.length)throw new Error("ABS() requires 1 parameter, received ".concat(i.length));return Math.abs(parseFloat(kn(i[0],t,r)))}},cn={regex:/^AND\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=n[0].split(Cn("\\s*,\\s*"))||[];if(!i.length)throw new Error("AND() requires 1 or more parameters, received ".concat(i.length));return i.every((function(e){return kn(e,t,r)}))}},pn={regex:/^AVG\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=(n[0]||"").split(Cn("\\s*,\\s*"));if(0===i.length)throw new Error("AVG() requires 1 or more parameters, received 0");return i.reduce((function(e,n){return e+parseFloat(kn(n,t,r))}),0)/i.length}},fn={regex:/^IF\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=(n[0]||"").split(Cn("\\s*,\\s*"));if(3!==i.length)throw new Error("IF() requires 3 parameters");var a=x(i,3),o=a[0],s=a[1],d=a[2];return kn(kn(o,t,r)?kn(s,t,r):kn(d,t,r),t,r)}},gn={regex:/^IFNA\((.*)\)$/,parse:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,a=O((r[0]||"").split(Cn("\\s*,\\s*")));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=kn(o,t,i);if(s)return s}}catch(e){a.e(e)}finally{a.f()}}},vn={regex:/^LOWER\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=(n[0]||"").split(Cn("\\s*,\\s*"));if(1!==i.length)throw new Error("LOWER() requires 1 parameter, received ".concat(i.length));return kn(i[0],t,r).toLowerCase()}},hn={regex:/^MAX\((.*)\)$/,parse:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,a=-1/0,o=O((r[0]||"").split(Cn("\\s*,\\s*")));try{for(o.s();!(n=o.n()).done;){var s=n.value,d=kn(s,t,i);"number"==typeof d?d>a&&(a=d):"string"==typeof d&&d.localeCompare(a)>0&&(a=d)}}catch(e){o.e(e)}finally{o.f()}return a}},yn={regex:/^MIN\((.*)\)$/,parse:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,a=1/0,o=O((r[0]||"").split(Cn("\\s*,\\s*")));try{for(o.s();!(n=o.n()).done;){var s=n.value,d=kn(s,t,i);"number"==typeof d?d<a&&(a=d):"string"==typeof d&&d.localeCompare(a)<0&&(a=d)}}catch(e){o.e(e)}finally{o.f()}return a}},wn={regex:/^NOT\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return!kn(n[0],t,r)}},mn={regex:/^OR\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=n[0].split(Cn("\\s*,\\s*"))||[];if(!i.length)throw new Error("OR() requires 1 or more parameters, received ".concat(i.length));return i.some((function(e){return kn(e,t,r)}))}},bn={regex:/^SUM\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=(n[0]||"").split(Cn("\\s*,\\s*"));if(0===i.length)throw new Error("SUM() requires 1 or more parameters");return i.reduce((function(e,n){return e+parseFloat(kn(n,t,r))}),0)}},_n={regex:/^UPPER\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=(n[0]||"").split(Cn("\\s*,\\s*"));if(1!==i.length)throw new Error("UPPER() requires 1 parameter, received ".concat(i.length));return kn(i[0],t,r).toUpperCase()}},xn={regex:/^TRIM\((.*)\)$/,parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=(n[0]||"").split(Cn("\\s*,\\s*"));if(1!==i.length)throw new Error("TRIM() requires 1 parameter, received ".concat(i.length));return kn(i[0],t,r).trim()}},Sn={ABS:ln,AND:cn,AVG:pn,DATE:{regex:/^(Date.now|new Date|dayjs)/,parse:function(e,t){return Rn(e,t)}},IF:fn,IFNA:gn,LOWER:vn,MAX:hn,MIN:yn,NOT:wn,OR:mn,SUM:bn,UPPER:_n,TRIM:xn,VARIABLE:{regex:/^\$(.*)$/,parse:function(e,t,n,r){return/^\$\(/.test(n[0])?t[kn(n[0].replace(/^\$\((.*)\)$/,"$1"),t,r)]:t[n[0]]}}},Cn=function(e){return new RegExp("".concat(e,"(?![^\\(]*\\))"),"g")},kn=function(e,t,n){var r=(null==n?void 0:n.commands)||Sn;if("string"!=typeof e)return e;var i=e.replace(/^=/,"").split(Cn("\\s*&\\s*")).map((function(e){var i=null,a=null,o=!1;if(r[e.replace(/\(.*$/,"")]&&(!(a=(i=r[e.replace(/\(.*$/,"")]).regex?e.match(i.regex):null)&&i.regex||(o=!0)),!o)for(var s=0,d=Object.entries(r);s<d.length;s++){var u=x(d[s],2);u[0];var l=u[1];if(a=l.regex?e.match(l.regex):null){i=l,o=!0;break}}return o&&i?i.parse(e,t,(a||[]).slice(1),n):e}));return i.length>1?i.join(""):i[0]},On=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return Object.keys(t.rules||{}).forEach((function(t){var n;null!==(n=e.rules)&&void 0!==n&&n[t]&&console.warn("validation rule [".concat(t,"] has been defined more than once"))})),Object.keys(t.facts||{}).forEach((function(t){var n;null!==(n=e.facts)&&void 0!==n&&n[t]&&console.warn("validation fact [".concat(t,"] has been defined more than once"))})),{rules:o(o({},e.rules),t.rules),facts:o(o({},e.facts),t.facts)}}),{rules:{},facts:{}})},In=function e(t,n){return t.reduce((function(t,r){if(null!=n&&n.deep){var i=Array.isArray(r)?r:[r];return[].concat(S(t),S(i.some((function(e){return Array.isArray(e)}))?e(i):i))}return[].concat(S(t),S(Array.isArray(r)?r:[r]))}),[])},jn={},En=function(e){jn[e]||(jn[e]={cached:[],result:null});for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?((n.length!==jn[e].cached.length||n.some((function(t,n){return t!==jn[e].cached[n]})))&&(jn[e].cached=n,Array.isArray(n[0])?jn[e].result=n.reduce((function(e,t){return[].concat(S(e),S(t))}),[]):jn[e].result=n.reduce((function(e,t){return o(o({},e),t)}),{})),jn[e].result):null},Pn=function e(t){return Array.isArray(t)?t.reduce((function(t,n){return Array.isArray(n)?[].concat(S(t),S(e(n))):[].concat(S(t),[n])}),[]):t.split(".")},Wn=function(e,t,n){var r=Pn(t).reduce((function(e,t){return"string"==typeof e?e:(null==e?void 0:e[t])||(null==e?void 0:e["control_".concat(t)])}),e);return null==r?void 0:r.replace(/(\{(\w+)\})/g,(function(e,t,r){return(n||{})[r]||t}))},qn=function(e){if(e)return new Date(e).toLocaleString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit"})},Rn=function(e,t){if(e){if(e instanceof Date)return e;var n=Date.parse(e);if(!isNaN(n))return new Date(n);if(/^Date.now(\(\))*$/.test(e)||/^new Date(\(\))*$/.test(e))return new Date;if(/(^dayjs|^[\w]+\([^\)]*\))/.test(e)){var r=e.split(".").reduce((function(e,n){var r,i=n.match(/([\w]+)\(([^\)]*)\)/);if(!i)return e;if("dayjs"===i[1]){if(i[2]){if(/^\$/.test(i[2])){var a=i[2].replace(/^\$/,"").split(".").reduce((function(e,t){return e[t]}),t||{});return un(a)}return un(i[2])}return e}return(r=e)[i[1]].apply(r,S(i[2].split(/\s*,\s*/).map((function(e){var n=parseFloat(e);return isNaN(n)?/^\$/.test(e)?e.replace(/^\$/,"").split(".").reduce((function(e,t){return e[t]}),t||{}):e.replaceAll(/[\'\"]+/g,""):n}))))}),un());return r instanceof un?r.toDate():r}if(/^\$/.test(e)){var i=e.replace(/^\$/,"").split(".").reduce((function(e,t){return e[t]}),t||{});return new Date(i)}}},$n={equal:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1!==t.length)throw new Error("requires 1 argument, received ".concat(t.length));var r=t[0];return[{fact:"response",operator:"equal",value:Tn.validationRuleValue(r,{})}]},inRange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(2!==t.length)throw new Error("require 2 arguments, received ".concat(t.length));var r=t[0],i=t[1];return[{fact:"response",operator:"greaterThanInclusive",value:Tn.validationRuleValue(r,{})},{fact:"response",operator:"lessThanInclusive",value:Tn.validationRuleValue(i,{})}]},isEmpty:[{fact:"response",operator:"equal",value:null}],isFieldEmpty:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("requires 1 or more arguments, received ".concat(t.length));return t.map((function(e){return{fact:e,operator:"equal",value:null}}))},isFalse:[{fact:"response",operator:"equal",value:!1}],isTrue:[{fact:"response",operator:"equal",value:!0}],max:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1!==t.length)throw new Error("requires 1 argument, received ".concat(t.length));var r=t[0];return[{fact:"response",operator:"lessThanInclusive",value:Tn.validationRuleValue(r,{})}]},min:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1!==t.length)throw new Error("requires 1 argument, received ".concat(t.length));var r=t[0];return[{fact:"response",operator:"greaterThanInclusive",value:Tn.validationRuleValue(r,{})}]},notEqual:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1!==t.length)throw new Error("requires 1 argument, received ".concat(t.length));var r=t[0];return[{fact:"response",operator:"notEqual",value:Tn.validationRuleValue(r,{})}]},positiveNumber:[{fact:"response",operator:"greaterThanInclusive",value:0}],required:[{fact:"response",operator:"notEqual",value:null}]},Fn=/^(Date.now|new Date|dayjs)/,Tn=function(){function e(t){var n=this;l(this,e),f(this,"_presetValidations",{}),f(this,"setPresetValidations",(function(e){n._presetValidations={deps:e.deps,rules:o(o({},$n),e.rules),facts:o({},e.facts)}})),f(this,"getRuleEngine",(function(){var e=n._presetValidations||{},t=new dn.Engine(void 0,{allowUndefinedFacts:!0});return e.facts&&Object.keys(e.facts).length&&Object.keys(e.facts).forEach((function(n){var r;t.addFact(n,null===(r=e.facts)||void 0===r?void 0:r[n])})),t})),this.setPresetValidations(t||{})}var t,n;return p(e,[{key:"rules",get:function(){return this._presetValidations.rules||{}}},{key:"getRuleConditions",value:function(t,n){return e.getRuleConditions(t,n,this._presetValidations.rules)}},{key:"getRuleFacts",value:function(t,n){return e.getRuleFacts(t,n)}},{key:"validationRuleValue",value:function(t,n){return e.validationRuleValue(t,n)}},{key:"sanitizeFacts",value:function(t){return e.sanitizeFacts(t)}},{key:"generateValidateGenericData",value:function(){return e.generateValidateGenericData()}},{key:"validateMultiple",value:(n=u(regeneratorRuntime.mark((function t(n,r){var i,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.getRuleEngine(),t.next=3,e.generateValidateGenericData();case 3:return a=t.sent,s=e.sanitizeFacts(o(o({},r),a)),n.forEach((function(t){var n=e.getRuleConditions(t.conditions,s);i.addRule({conditions:{all:n},event:{type:t.error}})})),t.next=8,i.run(s);case 8:return t.abrupt("return",t.sent.failureEvents.map((function(e){return e.type})));case 9:case"end":return t.stop()}}),t,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"validate",value:(t=u(regeneratorRuntime.mark((function t(n,r){var i,a,s,d,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.generateValidateGenericData();case 2:return i=t.sent,a=e.sanitizeFacts(o(o({},r),i)),s=this.getRuleEngine(),d=e.getRuleConditions(n,a),s.addRule({conditions:{all:d},event:{type:"isTruthy"}}),t.next=9,s.run(a);case 9:return u=t.sent,t.abrupt("return",u.events.some((function(e){return"isTruthy"===e.type})));case 11:case"end":return t.stop()}}),t,this)}))),function(e,n){return t.apply(this,arguments)})}],[{key:"getRuleConditions",value:function(t,n,r){return(Array.isArray(t)?t:[t]).reduce((function(t,i){var a,s;if("string"!=typeof i)return null!==(a=i.all)&&void 0!==a&&a.length?[].concat(S(t),[{all:e.getRuleConditions(i.all,n,r)}]):null!==(s=i.any)&&void 0!==s&&s.length?[].concat(S(t),[{any:e.getRuleConditions(i.any,n,r)}]):[].concat(S(t),[o(o({},i),{},{value:e.validationRuleValue(i.value,n)})]);var d=i.match(/^([^\(]+)(\((.*)\))*/);if(!d)throw new Error("rule [".concat(i,"] has incorrect format"));var u=x(d,4);u[0];var l=u[1];u[2];var c=u[3];if(null==r||!r[l])throw new Error("rule [".concat(i,"] does not exist in predefined rules"));if(c&&"function"!=typeof(null==r?void 0:r[l]))throw new Error("rule [".concat(i,"] expects ").concat(l," to be a function but is not"));try{var p;return[].concat(S(t),S(c?"function"==typeof(null==r?void 0:r[l])?null==r||null===(p=r[l])||void 0===p?void 0:p.call.apply(p,[r].concat(S((c||"").split(/\s*,\s*/)))):null==r?void 0:r[l]:(null==r?void 0:r[l])||[]))}catch(e){throw new Error("rule [".concat(l,"] ").concat(e.message))}}),[])}},{key:"getRuleFacts",value:function(t,n){var r,i=this;return null===(r=e.getRuleConditions(t,n)||[])||void 0===r?void 0:r.reduce((function(e,t){var r,a,o;return null!==(r=t.all)&&void 0!==r&&r.length?[].concat(S(e),S(i.getRuleFacts(t.all,n))):null!==(a=t.any)&&void 0!==a&&a.length?[].concat(S(e),S(i.getRuleFacts(t.any,n))):[].concat(S(e),[t.fact],S(null!==(o=t.value)&&void 0!==o&&o.fact?[t.value.fact]:[]))}),[])}},{key:"validationRuleValue",value:function(t,n){return t?/^\$/.test(t.toString())?{fact:t.toString().replace(/^$/,"")}:t.fact?{fact:e.validationRuleValue(t.fact,n)}:Fn.test(t.toString())?Rn(t.toString(),n):"false"!==t&&("true"===t||(isNaN(parseFloat(t.toString()))?t:parseFloat(t.toString()))):t}},{key:"sanitizeFacts",value:function(e){var t=this;return Object.keys(e).reduce((function(n,r){return void 0===e[r]||""===e[r]?n[r]=null:/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z/.test(e[r])||e[r]instanceof Date?(n[r]=new Date(e[r]).valueOf(),isNaN(n[r])&&(n[r]=null)):Array.isArray(e[r])?n[r]=e[r].map((function(e){return t.sanitizeFacts(e)})):e[r]instanceof Object?n[r]=t.sanitizeFacts(e[r]):Fn.test(e[r])?n[r]=Rn(e[r],e):n[r]=e[r],n}),{})}}]),e}();f(Tn,"generateValidateGenericData",u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{"Date.now":Date.now(),currentDate:new Date,currentDateString:qn(new Date)});case 1:case"end":return e.stop()}}),e)}))));var Ln=function(){function e(t){var n,r,i=this,a=t.widget,o=t.pageEventListener,s=t.removeWidget,d=t.emitEvent,u=t.getState,c=t.setState,p=t.onUpdate,g=t.t,v=t.getWidgetMeta,h=t.getConfig,y=t.getValidator;l(this,e),f(this,"_widget",void 0),f(this,"_getPageState",void 0),f(this,"_setPageState",void 0),f(this,"_widgetItems",void 0),f(this,"_update",void 0),f(this,"_t",void 0),f(this,"_emitEvent",void 0),f(this,"_pageEventListener",void 0),f(this,"_removeWidget",void 0),f(this,"_attachedListenerSets",{}),f(this,"_getWidgetMeta",void 0),f(this,"_getConfig",void 0),f(this,"_properties",void 0),f(this,"_getValidator",void 0),this._t=g,this._pageEventListener=o,this._removeWidget=s,this._emitEvent=d,this._widgetItems={},this._widget=(null===(n=(r=a).toJSON)||void 0===n?void 0:n.call(r))||a,this._getWidgetMeta=v,this._getConfig=h,this._getPageState=u,this._setPageState=c,this._update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return p(e)},this._properties=a.properties,this._getValidator=y,this.code&&u().registerWidgetCode(this.code,this.id),this.syncReflexiveListeners(),this.syncValidationListeners(),this.syncFetchPropertiesListeners(),this.emitListener("change")}var t,n,r,i,a,s,d;return p(e,[{key:"pageState",get:function(){return this._getPageState()}},{key:"emitEvent",value:(d=u(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._emitEvent(t,n,this));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"t",get:function(){return this._t}},{key:"id",get:function(){return this._widget.id}},{key:"order",get:function(){return this._widget.order}},{key:"widget",get:function(){return this._widget}},{key:"effects",get:function(){return this._widget.effects}},{key:"type",get:function(){return this._widget.type}},{key:"code",get:function(){return this._widget.code}},{key:"style",get:function(){return this._widget.style}},{key:"properties",get:function(){return this._properties}},{key:"parentId",get:function(){return this._widget.parent}},{key:"parent",get:function(){return this._widget.parent},set:function(e){this._widget.parent=e}},{key:"reflexiveRules",get:function(){return this._widget.reflexiveRules}},{key:"validationRules",get:function(){return this._widget.validationRules}},{key:"widgetMeta",get:function(){return this._getWidgetMeta()}},{key:"validator",get:function(){return this._getValidator()}},{key:"removeListenerSet",value:function(e){var t=this;this._attachedListenerSets[e]?this._attachedListenerSets[e].events.forEach((function(n){t._pageEventListener.remove(n,t._attachedListenerSets[e].fn)})):this._attachedListenerSets[e]={events:[],fn:function(){return null}}}},{key:"setListenerSet",value:function(e,t,n){var r=this;this.removeListenerSet(e),null!=t&&t.length?(this._attachedListenerSets[e].events=t,this._attachedListenerSets[e].fn=n,this._attachedListenerSets[e].events.forEach((function(t){r._pageEventListener.add(t,r._attachedListenerSets[e].fn)}))):delete this._attachedListenerSets[e]}},{key:"syncFetchPropertiesListeners",value:function(){var e,t=this;this.setListenerSet("fetchProperties",(null===(e=this.widget.fetchPropertiesOnWidgetsChange)||void 0===e?void 0:e.map((function(e){return"".concat(e,"_change")})))||[],u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.callFetchPropertiesApi();case 2:case"end":return e.stop()}}),e)}))))}},{key:"syncValidationListeners",value:function(){var e,t=this;this.setListenerSet("validations",(null===(e=this.validationRules)||void 0===e?void 0:e.reduce((function(e,n){return[].concat(S(e),S((n.conditions||[]).reduce((function(e,n){return[].concat(S(e),S(t.validator.getRuleFacts(t.validator.getRuleConditions([n].flat(1),t.validationFacts),t.validationFacts).map((function(e){return"".concat(e,"_change")}))))}),[])))}),[]).filter((function(e){return"response"!==e})))||[],(function(){return t.runValidations()}))}},{key:"syncReflexiveListeners",value:function(){var e,t,n=this,r=this.reflexiveRulesFacts;this.setListenerSet("reflexives",(null===(e=this.validator.getRuleConditions((null===(t=this.reflexiveRules)||void 0===t?void 0:t.flat(1))||[],r))||void 0===e?void 0:e.reduce((function(e,t){return[].concat(S(e),S(n.validator.getRuleFacts(t,r).map((function(e){return"".concat(e,"_change")}))))}),[]).filter((function(e){return"response"!==e})))||[],(function(){return n.runReflexives()})),this.runReflexives()}},{key:"callFetchPropertiesApi",value:(s=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.widget.fetchPropertiesApi){e.next=2;break}return e.abrupt("return");case 2:return t={currentProperties:this.properties,originalProperties:this.widget.properties},e.next=5,fetch(this.widget.fetchPropertiesApi,{method:"POST",body:JSON.stringify(t)});case 5:if((n=e.sent).ok){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,n.json();case 10:this._properties=e.sent;case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"setProperty",value:function(e,t){this._widget.properties[e]=t,this.update()}},{key:"setEffectProperties",value:function(e,t){var n;if(this._widget.effects){var r=null===(n=this._widget.effects)||void 0===n?void 0:n.findIndex((function(t){return t.type===e}));-1!==r&&(this._widget.effects[r]=o(o({},this._widget.effects[r]),{},{properties:t}),this.update())}}},{key:"update",value:function(){this._update(this)}},{key:"addEffect",value:function(e){var t,n;this.effects||(this._widget.effects=[]),null!==(t=this.effects)&&void 0!==t&&t.some((function(t){return t.type===e.type}))||(null===(n=this.effects)||void 0===n||n.push(e),this.update())}},{key:"removeEffect",value:function(e){var t;this._widget.effects=null===(t=this._widget.effects)||void 0===t?void 0:t.filter((function(t){return t.type!==e})),this.update()}},{key:"emitListener",value:function(e,t){this._pageEventListener.emit("".concat(this.id,"_").concat(e),t,{widgetItem:this}),this.code&&this._pageEventListener.emit("".concat(this.code,"_").concat(e),t,{widgetItem:this})}},{key:"destroy",value:function(){}},{key:"toJSON",value:function(){return this._widget}},{key:"removeWidget",value:function(){this.parentId&&this._widgetItems[this.parentId].removeChild(this),this.destroy(),this._removeWidget(this.id)}},{key:"setWidgetItems",value:function(e){this._widgetItems=e}},{key:"setLoading",value:function(e){var t=this;this.setState("loading",e),this.emitEvent("isLoading",e),this.getParents().forEach((function(n){n.setChildLoading(t.id,e)}))}},{key:"setDirty",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({touched:e,pristine:!e,dirty:e}),this.update()}},{key:"runValidations",value:(a=u(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t&&t.setDirty&&this.setDirty(),e.next=3,this._getValidationErrors();case 3:return r=e.sent,null!==(n=r)&&void 0!==n&&n.length||(r=null),this.setState({errors:r||[],valid:!r,hasErrors:!!r}),(this.getParentIds()||[]).forEach((function(e){i._widgetItems[e].setChildErrors(i.id,r)})),this.update(),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_getValidationErrors",value:(i=u(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(null!==(t=this.validationRules)&&void 0!==t&&t.length),e.t0){e.next=5;break}return e.next=4,this.isReflexive();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",null);case 7:return n=this.getState("response"),r=this.responses,e.next=11,this.validator.generateValidateGenericData();case 11:return i=e.sent,e.next=14,Promise.all(this.validationRules.map(function(){var e=u(regeneratorRuntime.mark((function e(t){var a,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.validator.sanitizeFacts(o(o(o({},i),{},{properties:s.properties},r),{},{response:void 0===n||""===n?null:n})),d=t.conditions.map((function(e){return s.validator.getRuleConditions(e,a)})).flat(2),e.next=4,s.validator.validate(d,a);case 4:if(e.sent){e.next=7;break}return e.abrupt("return",{err:t.error,isWarning:t.isWarning});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return a=e.sent.filter((function(e){return e})),e.abrupt("return",a.length?a:null);case 16:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"addValidation",value:function(e){var t;null===(t=this.validationRules)||void 0===t||t.push(e),this.update()}},{key:"setChildLoading",value:function(e,t){var n=this.getState("childLoadings")||{};t?n[e]=t:delete n[e],Object.keys(n).length?this.setState("childLoadings",n):this.setState("childLoadings",void 0)}},{key:"childLoadings",value:function(){return this.getState("childLoadings")}},{key:"hasChildLoading",value:function(){return Object.keys(this.childLoadings()||{}).length>0}},{key:"setChildErrors",value:(r=u(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getState("childErrors")||{},i=o({},this.getState("childErrors"))||{},n?i[t]=n:delete i[t],Object.keys(i).length!==Object.keys(r).length||!Object.keys(i).every((function(e){return r[e]===i[e]}))){e.next=5;break}return e.abrupt("return");case 5:Object.keys(i).length?this.setState("childErrors",i):this.setState("childErrors",void 0);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"childErrors",value:function(){return this.getState("childErrors")}},{key:"hasChildErrors",value:function(){return Object.keys(this.childErrors()||{}).length>0}},{key:"runReflexives",value:(n=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isReflexive();case 2:if(t=!e.sent,n=!!this.getState("reflexiveHide"),t===n){e.next=8;break}return e.next=7,this.runValidations();case 7:this.setState("reflexiveHide",t);case 8:t&&this.setState({response:null});case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getResponsesByCodesOrIds",value:function(e){var t=this;return e.reduce((function(e,n){var r,i=t.pageState.widgetCodeToIdMap[n],a=null===(r=t.pageState.widgetState[i])||void 0===r?void 0:r.response;return e[n]=a,e}),{})}},{key:"responses",get:function(){var e=this;return Object.keys(this._widgetItems).length?Object.keys(this.pageState.widgetState).reduce((function(t,n){var r,i,a=e.pageState.widgetState[n];"question"===a.type&&e._widgetItems[n]&&(t[(null===(r=e._widgetItems[n])||void 0===r?void 0:r.code)||(null===(i=e._widgetItems[n])||void 0===i?void 0:i.id)]=a.response);return t}),{}):{}}},{key:"validationFacts",get:function(){return Tn.sanitizeFacts(o(o({},Tn.generateValidateGenericData()),this.responses))}},{key:"reflexiveRulesFacts",get:function(){var e=this;return this.getResponsesByCodesOrIds((this.reflexiveRules||[]).reduce((function(t,n){return[].concat(S(t),S(e.validator.getRuleFacts(n,e.responses)))}),[]))}},{key:"isReflexive",value:(t=u(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=this.reflexiveRules)&&void 0!==t&&t.length){e.next=2;break}return e.abrupt("return",!0);case 2:return n=this.reflexiveRules.map((function(e){return o.validator.getRuleConditions(e,o.validationFacts)})).flat(2),r=this.reflexiveRulesFacts,e.next=6,this.validator.validate(n,r);case 6:return i=e.sent,a=!!this.getState("reflexiveHide"),i===a&&this.setState("reflexiveHide",!i),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setState",value:function(e,t){this._getPageState().setWidgetState(this.id,e,t),this._setPageState(this.pageState)}},{key:"getState",value:function(e){return this._getPageState().getWidgetState(this.id,e)}},{key:"getParentIds",value:function(){return e.getParentIds(this.id,this._widgetItems)}},{key:"getParents",value:function(){var e=this;return this.getParentIds().map((function(t){return e._widgetItems[t]}))}},{key:"getParent",value:function(){return this._widgetItems[this.parentId||""]||null}},{key:"getChildrenIds",value:function(e,t){return[]}},{key:"getChildren",value:function(e,t){var n=this;return this.getChildrenIds(e,t).map((function(e){return n._widgetItems[e]}))}},{key:"addChild",value:function(e,t){e.parent=this.id}},{key:"removeChild",value:function(e){e.parent=void 0}}],[{key:"getParentIds",value:function(t,n){var r=n[t];return null!=r&&r.parentId?[r.parentId].concat(S(e.getParentIds(r.parentId,n)||[])):[]}}]),e}(),An={inject:["widgetEffectControls","setPageState"],props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:{type:Function,required:!0},getWidgetState:{type:Function,required:!0},view:String},data:function(){return{isMounted:!1}},computed:{widgetView:function(){return this.view||"display"}},mounted:function(){this.isMounted=!0},methods:{onWidgetSelect:function(){this.pageState.interactiveState.selectedWidgetId=this.widget.id,this.setPageState(this.pageState)},getWidgetRender:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"display",n=arguments.length>1?arguments[1]:void 0,r=this.widgetControls[(null===(e=this.widget)||void 0===e?void 0:e.type)||""];if(!r){var i;if(null!=n&&n.nullable)return null;throw new Error("widget type [".concat(null===(i=this.widget)||void 0===i?void 0:i.type,"] from widget [").concat(this.widget.id,"] was not found. Maybe the widget control was not imported"))}var a=r[t];if(!a){if(null!=n&&n.nullable)return null;throw new Error("widget view [".concat(t,"] does not exist for widget type [").concat(this.widget.type,"]"))}return a}}},Mn=An,Dn=function(e){e&&e("data-v-74e97d1a_0",{source:".widget-component-wrapper[data-v-74e97d1a]{position:relative}.widget-component-wrapper.selected[data-v-74e97d1a]{background-color:#fff;border:1px solid #86d5fa;border-radius:8px;padding:0 10px;margin:-1px -11px -1px -11px}.widget-wrapper[data-v-74e97d1a]{padding:0}.widget-builder-control[data-v-74e97d1a]{position:absolute;top:-10px;left:10px;opacity:0;transition:opacity .2s;z-index:10}.widget-builder-control.hovered[data-v-74e97d1a]{opacity:1}",map:void 0,media:void 0})},Vn=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"widget-wrapper",on:{click:function(t){return t.stopPropagation(),e.onWidgetSelect(t)}}},[e.widget.style?n("style",{tag:"component",attrs:{scoped:""}},[e._v("\n    "+e._s(e.widget.style)+"\n  ")]):e._e(),e._v(" "),"builder"===e.view&&e.widgetControls[e.widget.type].builderControl?n("div",{staticClass:"widget-builder-control",class:{hovered:e.pageState.interactiveState.hoveredWidgetId===e.widget.id}},[n(e.widgetControls[e.widget.type].builderControl,{tag:"component",attrs:{widget:e.widget,properties:e.widget.properties,"widget-controls":e.widgetControls,"widget-items":e.widgetItems,"page-state":e.pageState,"set-widget-state":function(t,n){return e.setWidgetState(t,n,e.widget)},"get-widget-state":function(t){return e.getWidgetState(t,e.widget)},view:e.view}})],1):e._e(),e._v(" "),n("div",{ref:"widgetComponentWrapper",staticClass:"widget-component-wrapper",class:{selected:e.pageState.interactiveState.selectedWidgetId===e.widget.id,unselected:e.pageState.interactiveState.selectedWidgetId&&e.pageState.interactiveState.selectedWidgetId!==e.widget.id}},[e.isMounted?[e._l(e.widget.effects,(function(t){return n(e.widgetEffectControls[t.type].display,{key:t.type,tag:"component",attrs:{properties:t.properties,"wrapper-ref":e.$refs.widgetComponentWrapper}})})),e._v(" "),n(e.getWidgetRender(e.widgetView),{tag:"component",attrs:{id:"widget-"+e.widget.id,"data-test":"widget-"+e.widget.code,widget:e.widget,properties:e.widget.properties,"widget-controls":e.widgetControls,"widget-items":e.widgetItems,"page-state":e.pageState,"set-widget-state":function(t,n){return e.setWidgetState(t,n,e.widget)},"get-widget-state":function(t){return e.getWidgetState(t,e.widget)},view:e.view,"wrapper-ref":e.$refs.widgetComponentWrapper,t:e.widget.t},on:{setWidgetState:function(t,n){return e.setWidgetState(t,n,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)}}})]:e._e()],2)],1)},staticRenderFns:[]},Dn,Mn,"data-v-74e97d1a",false,undefined,!1,De,void 0,void 0),Nn=Vn,Bn={components:{BuilderWidgetView:Nn},props:{widgetControls:Object,widgetItems:Object,excludeWidgetIds:ut(String),onlyIncludeWidgetIds:ut(String),forParent:String},inject:["widgetControls","getPageState","getView","setPageState","removeWidget"],data:function(){return{hoveredWidgetId:-1,openedAddOptionsIndex:-1}},computed:{view:function(){return this.getView()},pageState:function(){return this.getPageState()},widgetItemsArr:function(){return Object.values(this.$props.widgetItems)},filteredWidgetItemsArr:function(){var e=this;return this.widgetItemsArr.filter((function(t){return(!e.forParent&&!t.parentId||t.parentId===e.forParent)&&(!e.$props.onlyIncludeWidgetIds||e.$props.onlyIncludeWidgetIds.includes(t.id))&&(!(e.excludeWidgetIds||[]).length||!e.excludeWidgetIds.includes(t.id))})).sort((function(e,t){return(e.order||0)-(t.order||0)}))}},methods:{toggleShowAddOptions:function(e,t,n){this.$data.openedAddOptionsIndex=this.$data.openedAddOptionsIndex===n?-1:n},addWidget:function(e,t,n,r){this.widgetControls[t].create(),this.$data.openedAddOptionsIndex=-1},onDnDPlaceholderMouseDown:function(e,t){this.pageState.interactiveState.draggingWidgetId=t,this.setPageState(this.pageState)},onDnDPlaceholderMouseUp:function(e,t){this.pageState.interactiveState.draggingWidgetId="",this.setPageState(this.pageState)},onMouseEnter:function(e,t){e.stopPropagation(),this.$data.hoveredWidgetId=t,this.pageState.interactiveState.hoveredWidgetId=t,this.setPageState(this.pageState)},onMouseLeave:function(e,t){this.$data.hoveredWidgetId===t&&(this.$data.hoveredWidgetId=-1,this.pageState.interactiveState.hoveredWidgetId="",this.setPageState(this.pageState))},setWidgetState:function(e,t,n){var r=this.pageState;if(void 0===t){if(!r.widgetState[n.id])return;delete r.widgetState[n.id][e]}else r.widgetState[n.id]||(r.widgetState[n.id]={}),r.widgetState[n.id][e]=t;this.setPageState(r)},getWidgetState:function(e,t){var n;return null===(n=this.pageState.widgetState[t.id])||void 0===n?void 0:n[e]}}},Hn=Bn,zn=function(e){e&&e("data-v-68166712_0",{source:".widget-container[data-v-68166712]{position:relative}.widget-container.notDragging[data-v-68166712]{opacity:.4}.widget-container.dragging[data-v-68166712]{opacity:1}.widget-form-control[data-v-68166712]{position:absolute;top:-40px;left:0}.add-line[data-v-68166712]{position:relative;padding:10px 0;margin:-10.5px 0;opacity:0;transition:opacity .2s;z-index:10}.add-line[data-v-68166712]:hover{opacity:1}.add-line .line[data-v-68166712]{width:100%;height:1px;background-color:#b5b5b5;cursor:pointer}.add-line .add-button[data-v-68166712]{position:absolute;top:-2px;left:-10px;width:20px;height:20px;background-color:#fff;border:1px solid #cdcdcd;border-radius:4px;display:flex;justify-content:center;align-items:center;padding-top:2px;box-shadow:0 0 10px 10px #fff;cursor:pointer;transition:background-color .3s}.add-line.opened .add-button[data-v-68166712]{background-color:#f71414;border:1px solid #f71414;color:#fff}.add-line.opened .add-button[data-v-68166712]:hover{background-color:#dc1212;border:1px solid #dc1212}.add-line .add-button span[data-v-68166712]{transition:all .3s}.add-line.opened .add-button span[data-v-68166712]{transform:rotate(45deg)}.add-line .add-button[data-v-68166712]:hover{background-color:#eaeaea}.add-line .add-options-wrapper[data-v-68166712]{margin-left:15px;position:absolute;top:-2px;left:0;width:100%;display:none}.add-line .add-options-wrapper.open[data-v-68166712]{display:block}.add-line .add-options-inner-wrapper[data-v-68166712]{width:100%;padding-bottom:10px;overflow-x:auto;display:flex;flex-direction:row}.add-line .add-options-wrapper a[data-v-68166712]{padding:2px 4px;cursor:pointer;background-color:#fff;border:1px solid #e8e8e8;border-radius:4px}.widget-container .dnd-placeholder[data-v-68166712]{width:20px;height:25px;padding-bottom:2px;background-color:#fafafa;border:1px dashed #dadada;cursor:grab;font-size:9pt;display:flex;justify-content:center;align-items:center;border-radius:4px}.widget-container .dnd-placeholder[data-v-68166712]:hover{background-color:#eaeaea}.left-actions-wrapper[data-v-68166712]{position:absolute;top:15px;left:-40px;padding:10px;opacity:0;transition:opacity .2s;width:25px;display:flex;flex-direction:column;align-items:center}.widget-container.hovering>.left-actions-wrapper[data-v-68166712]{opacity:1}.delete-button[data-v-68166712]{font-size:12px;margin:2px 0;padding:1px 0;cursor:pointer;color:red}",map:void 0,media:void 0})},Un=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.filteredWidgetItemsArr,(function(t,r){return n("div",{key:t.id,staticClass:"widget-container",class:{hovering:e.hoveredWidgetId===t.id,dragging:e.pageState.interactiveState.draggingWidgetId===t.id,notDragging:e.pageState.interactiveState.draggingWidgetId&&e.pageState.interactiveState.draggingWidgetId!==t.id},on:{mouseenter:function(n){return n.stopPropagation(),r=n,e.onMouseEnter(r,t.id);var r},mouseleave:function(n){return n.stopPropagation(),r=n,e.onMouseLeave(r,t.id);var r}}},[n("div",{staticClass:"left-actions-wrapper"},[n("a",{staticClass:"dnd-placeholder",on:{mousedown:function(n){return e.onDnDPlaceholderMouseDown(n,t.id)},mouseup:function(n){return e.onDnDPlaceholderMouseUp(n,t.id)}}},[e._v("\n          ↑↓\n        ")]),e._v(" "),n("a",{staticClass:"delete-button",on:{click:function(){return t.removeWidget()}}},[e._v("\n          🗑\n        ")])]),e._v(" "),n("div",{staticClass:"add-line",class:{opened:e.openedAddOptionsIndex===r}},[n("div",{staticClass:"line",on:{click:function(n){return n.stopPropagation(),i=n,e.toggleShowAddOptions(i,t,r);var i}}}),e._v(" "),n("a",{staticClass:"add-button",on:{click:function(n){return n.stopPropagation(),i=n,e.toggleShowAddOptions(i,t,r);var i}}},[n("span",[e._v("+")])]),e._v(" "),n("div",{staticClass:"add-options-wrapper",class:{open:e.openedAddOptionsIndex===r}},[n("div",{staticClass:"add-options-inner-wrapper"},e._l(Object.keys(e.widgetControls),(function(i){return n("a",{key:i,on:{click:function(n){return e.addWidget(n,i,t,r)}}},[e._v("\n              "+e._s(i)+"\n            ")])})),0)])]),e._v(" "),n("builder-widget-view",{attrs:{widget:t,"widget-controls":e.widgetControls,"widget-items":e.widgetItems,"page-state":e.pageState,"set-widget-state":e.setWidgetState,"get-widget-state":e.getWidgetState,view:e.view}}),e._v(" "),r===e.filteredWidgetItemsArr.length-1?n("div",{staticClass:"add-line",class:{opened:e.openedAddOptionsIndex===r+1}},[n("div",{staticClass:"line",on:{click:function(n){return n.stopPropagation(),i=n,e.toggleShowAddOptions(i,t,r+1);var i}}}),e._v(" "),n("a",{staticClass:"add-button",on:{click:function(n){return n.stopPropagation(),i=n,e.toggleShowAddOptions(i,t,r+1);var i}}},[n("span",[e._v("+")])]),e._v(" "),n("div",{staticClass:"add-options-wrapper",class:{open:e.openedAddOptionsIndex===r+1}},[n("div",{staticClass:"add-options-inner-wrapper"},e._l(Object.keys(e.widgetControls),(function(i){return n("a",{key:i,on:{click:function(n){return e.addWidget(n,i,t,r+1)}}},[e._v("\n              "+e._s(i)+"\n            ")])})),0)])]):e._e()],1)})),0)},staticRenderFns:[]},zn,Hn,"data-v-68166712",false,undefined,!1,De,void 0,void 0),Kn=Un,Yn={props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:{type:Function,required:!0},getWidgetState:{type:Function,required:!0},view:String},inject:["widgetEffectControls"],data:function(){return{isMounted:!1}},computed:{widgetView:function(){return this.view||"display"}},mounted:function(){this.isMounted=!0},methods:{getWidgetEffectRender:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display",n=this.widgetEffectControls[e];if(!n)throw new Error("widget effect type [".concat(e,"] from widget [").concat(this.widget.id,"] was not found. Maybe the widget effect control was not imported"));var r=n[t];if(!r)throw new Error("widget view [".concat(t,"] does not exist for widget effect type [").concat(e,"]"));return r},getWidgetRender:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"display",n=arguments.length>1?arguments[1]:void 0,r=this.widgetControls[(null===(e=this.widget)||void 0===e?void 0:e.type)||""];if(!r){var i;if(null!=n&&n.nullable)return null;throw new Error("widget type [".concat(null===(i=this.widget)||void 0===i?void 0:i.type,"] from widget [").concat(this.widget.id,"] was not found. Maybe the widget control was not imported"))}var a=r[t];if(!a){if(null!=n&&n.nullable)return null;throw new Error("widget view [".concat(t,"] does not exist for widget type [").concat(this.widget.type,"]"))}return a}}},Jn=Yn,Gn=function(e){e&&e("data-v-ed524fac_0",{source:".widget-component-wrapper[data-v-ed524fac]{position:relative}.widget-wrapper[data-v-ed524fac]{padding:0;scroll-margin:100px}",map:void 0,media:void 0})},Qn=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"widget-wrapper",attrs:{"widget-id":e.widget.id,"widget-code":e.widget.code}},[e.widget.style?n("style",{tag:"component",attrs:{scoped:""}},[e._v("\n    "+e._s(e.widget.style)+"\n  ")]):e._e(),e._v(" "),"builder"===e.view?n("div",{staticClass:"widget-form-control"},[n(e.getWidgetRender("builderControl",{nullable:!0}),{tag:"component",attrs:{widget:e.widget,properties:e.widget.properties,widgetControls:e.widgetControls,widgetItems:e.widgetItems,pageState:e.pageState,setWidgetState:function(t,n){return e.setWidgetState(t,n,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)},view:e.widgetView},on:{setWidgetState:function(t,n){return e.setWidgetState(t,n,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)}}})],1):e._e(),e._v(" "),n("div",{ref:"widgetComponentWrapper",class:["widget-component-wrapper","view-"+e.widgetView],attrs:{id:"widget-wrapper-"+e.widget.id,"data-test":"widget-wrapper-"+e.widget.code}},[e.isMounted?[e._l(e.widget.effects,(function(t){return n(e.getWidgetEffectRender(t.type,"display"),{key:t.type,tag:"component",attrs:{properties:t.properties,wrapperRef:e.$refs.widgetComponentWrapper}})})),e._v(" "),e.widget?n(e.getWidgetRender(e.widgetView),{tag:"component",attrs:{id:"widget-"+e.widget.id,"data-test":"widget-"+e.widget.code,widget:e.widget,properties:e.widget.properties,widgetControls:e.widgetControls,widgetItems:e.widgetItems,pageState:e.pageState,setWidgetState:function(t,n){return e.setWidgetState(t,n,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)},view:e.widgetView,wrapperRef:e.$refs.widgetComponentWrapper,t:e.widget.t},on:{setWidgetState:function(t,n){return e.setWidgetState(t,n,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)}}}):e._e()]:e._e()],2)],1)},staticRenderFns:[]},Gn,Jn,"data-v-ed524fac",false,undefined,!1,De,void 0,void 0),Xn=Qn,Zn={components:{WidgetView:Xn},props:{widgetControls:Object,widgetItems:Object,excludeWidgetIds:ut(String),onlyIncludeWidgetIds:ut(String),widgetsOrder:ut(String),forParent:String,view:String},inject:["widgetControls","getPageState","getView","setPageState"],computed:{widgetView:function(){return this.view||this.getView()},pageState:function(){return this.getPageState()},widgetItemsArr:function(){return Object.values(this.widgetItems)},filteredWidgetItemsArr:function(){var e=this;return this.widgetItemsArr.filter((function(t){return(!e.forParent&&!t.parentId||t.parentId===e.forParent)&&(!e.onlyIncludeWidgetIds||e.onlyIncludeWidgetIds.includes(t.id))&&(!(e.excludeWidgetIds||[]).length||!e.excludeWidgetIds.includes(t.id))})).sort((function(t,n){return((e.widgetsOrder||[]).includes(t.id)?e.widgetsOrder.indexOf(t.id):t.order||0)-((e.widgetsOrder||[]).includes(n.id)?e.widgetsOrder.indexOf(n.id):n.order||0)}))}},methods:{setWidgetState:function(e,t,n){var r=this.pageState;if(void 0===t){if(!r.widgetState[n.id])return;delete r.widgetState[n.id][e]}else r.widgetState[n.id]||(r.widgetState[n.id]={}),r.widgetState[n.id][e]=t;this.setPageState(r)},getWidgetState:function(e,t){var n;return e?null===(n=this.pageState.widgetState[t.id])||void 0===n?void 0:n[e]:this.pageState.widgetState[t.id]}}},er=Zn,tr=function(e){e&&e("data-v-68b249e9_0",{source:".widget-container[data-v-68b249e9]{position:relative}",map:void 0,media:void 0})},nr=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.filteredWidgetItemsArr,(function(t){return n("div",{key:t.id,staticClass:"widget-container"},[t.getState("reflexiveHide")?e._e():n("widget-view",{attrs:{widget:t,"widget-controls":e.widgetControls,"widget-items":e.widgetItems,"page-state":e.pageState,"set-widget-state":e.setWidgetState,"get-widget-state":e.getWidgetState,view:e.widgetView}})],1)})),0)},staticRenderFns:[]},tr,er,"data-v-68b249e9",false,undefined,!1,De,void 0,void 0),rr=nr,ir=function(e){g(i,e);var t,n,r=m(i);function i(e){var t;return l(this,i),f(y(t=r.call(this,e)),"isSubmitting",!1),t}return p(i,[{key:"getSortedPages",value:function(){return this.properties.pages}},{key:"isWidgetIdInWidgetIds",value:function(e,t){var n=this;return t.some((function(t){return t===e||n.isWidgetIdInWidgetIds(e,n._widgetItems[t].getChildrenIds())}))}},{key:"getChildIndexByWidgetId",value:function(e){var t=this;return this.getSortedPages().findIndex((function(n){return t.isWidgetIdInWidgetIds(e,n.children)}))}},{key:"getChildrenIds",value:function(e,t){var n=this;return this.getSortedPages().filter((function(e,r){var i;return null!=t&&null!==(i=t.inPageIndices)&&void 0!==i&&i.length?t.inPageIndices.includes(r):null!=t&&t.currentPageIndexOnly?r===n.currentPageIndex:e})).reduce((function(r,i){return[].concat(S(r),S(i.children),S(null!=e&&e.deep?i.children.reduce((function(r,i){return[].concat(S(r),S(n._widgetItems[i].getChildrenIds(e,t)))}),[]):[]))}),[])}},{key:"setChildLoading",value:function(e,t){_(v(i.prototype),"setChildLoading",this).call(this,e,t);var n,r=this.getState("pageIdxLoadings")||{},a=this.getChildIndexByWidgetId(e);if(-1===a)throw new Error("child widget [".concat(e,"] not in paging ").concat(this.id));t?(r[a]||(r[a]={}),r[a][e]=t):(null===(n=r[a])||void 0===n||delete n[e],Object.keys(r[a]||{}).length||delete r[a]);this.setState("pageIdxLoadings",Object.keys(r).length?r:void 0)}},{key:"pageIndexHasLoadings",value:function(e,t){var n=this.getState("pageIdxLoadings")||{};if(!Object.keys(n||[]).length)return!1;if(!Object.keys(n[e]||{}).length)return!1;var r=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null;return!(r&&(null==r||!r.properties.detachParentIntegration)&&"none"!==(null==r?void 0:r.nextButtonType()))||(null!=t&&t.allChildPages?r.hasChildLoading():r.currentPageIndexHasLoadings(t))}},{key:"currentPageIndexHasLoadings",value:function(e){return this.pageIndexHasLoadings(this.currentPageIndex,e)}},{key:"setChildErrors",value:(n=u(regeneratorRuntime.mark((function e(t,n){var r,a,s,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(v(i.prototype),"setChildErrors",this).call(this,t,n),e.next=3,this._widgetItems[t].isReflexive();case 3:if(!e.sent){e.next=7;break}e.t0=n,e.next=8;break;case 7:e.t0=null;case 8:if(r=e.t0,a=this.getState("pageIdxErrors")||{},s=o({},this.getState("pageIdxErrors"))||{},-1!==(d=this.getChildIndexByWidgetId(t))){e.next=14;break}throw new Error("child widget [".concat(t,"] not in paging ").concat(this.id));case 14:if(r?(s[d]||(s[d]={}),s[d][t]=r):(null===(u=s[d])||void 0===u||delete u[t],Object.keys(s[d]||{}).length||delete s[d]),Object.keys(s).length!==Object.keys(a).length||!Object.keys(s).every((function(e){return a[e]===s[e]}))){e.next=17;break}return e.abrupt("return");case 17:this.setState("pageIdxErrors",Object.keys(s).length?s:void 0);case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"addChild",value:function(e,t){_(v(i.prototype),"addChild",this).call(this,e,t),this._widget.properties.pages[(null==t?void 0:t.pageIdx)||0].children.splice((null==t?void 0:t.childIdx)||0,0,e.id)}},{key:"removeChild",value:function(e){_(v(i.prototype),"removeChild",this).call(this,e),this._widget.properties.pages.forEach((function(t){t.children=t.children.filter((function(t){return t!==e.id}))})),this._update(this)}},{key:"onChangePageIndex",value:function(e){var t=this.getSortedPages();e<0||e>t.length-1||this.setState("currentPageIndex",e)}},{key:"currentPageIndex",get:function(){return this.getState("currentPageIndex")||0}},{key:"getParentPagesWidgets",value:function(e){var t=this.getParents().filter((function(e){return"pages"===e.type}));return null!=e&&e.first?t[0]:t}},{key:"getChildrenPagesWidgets",value:function(e){var t=this.getChildren({deep:!0},{inPageIndices:null==e?void 0:e.inPageIndices}).filter((function(e){return"pages"===e.type}));return null!=e&&e.first?t[0]:t}},{key:"pageIndexHasErrors",value:function(e,t){var n=this,r=this.getState("pageIdxErrors")||{};if(!Object.keys(r||[]).length)return!1;if(!Object.keys(r[e]||{}).filter((function(e){return!(null!=t&&t.skipPristine&&n._widgetItems[e].getState("pristine"))})).length)return!1;var i=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null;return!(i&&(null==i||!i.properties.detachParentIntegration)&&"none"!==(null==i?void 0:i.nextButtonType()))||(null!=t&&t.allChildPages?i.hasChildErrors():i.currentPageIndexHasErrors(t))}},{key:"currentPageIndexHasErrors",value:function(e){return this.pageIndexHasErrors(this.currentPageIndex,e)}},{key:"toNextPage",value:(t=u(regeneratorRuntime.mark((function e(){var t,n,r,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getChildren({deep:!0},{currentPageIndexOnly:!0}),e.next=3,Promise.all(t.map(function(){var e=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.getState("pristine")&&(t.setState({pristine:!1,dirty:!0}),t.update()),e.next=3,t.isReflexive();case 3:if(!e.sent){e.next=7;break}e.t0=t.runValidations(),e.next=8;break;case 7:e.t0=null;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:if(e.sent.some((function(e){return(e||[]).some((function(e){return!e.isWarning}))}))){e.next=20;break}if("complete"!==(n=this.nextButtonType())){e.next=14;break}return r=this.properties.pages.map((function(e,t){return a.pageIndexHasErrors(t,{allChildPages:!0,includeWarnings:!1})})),this.isSubmitting=!0,e.next=11,this.emitEvent("pages_complete",{pageErrors:r,hasErrors:r.some((function(e){return e})),pageWidget:this});case 11:this.isSubmitting=!1,e.next=20;break;case 14:if("none"!==n){e.next=18;break}return e.abrupt("return");case 18:!(i=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null)||null!=i&&i.properties.detachParentIntegration||"none"===(null==i?void 0:i.nextButtonType())?(this.onChangePageIndex(this.currentPageIndex+1),this.emitEvent("pages_page_change",this.currentPageIndex)):i.toNextPage();case 20:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toPreviousPage",value:function(){if("none"!==this.previousButtonType()){var e=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null;!e||null!=e&&e.properties.detachParentIntegration||"none"===(null==e?void 0:e.previousButtonType())?(this.onChangePageIndex(this.currentPageIndex-1),this.emitEvent("pages_page_change",this.currentPageIndex)):e.toPreviousPage()}}},{key:"previousButtonType",value:function(){var e=this.currentPageIndex<=0,t=this.getChildrenPagesWidgets({first:!0});return this.properties.navigationIntegrateChildrenPages&&t&&!t.properties.detachParentIntegration&&e?t.previousButtonType():e?"none":"previous"}},{key:"nextButtonType",value:function(){var e=this.currentPageIndex>=this._widget.properties.pages.length-1,t=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0}):null;return this.properties.navigationIntegrateChildrenPages&&t&&"none"!==t.nextButtonType()&&!t.properties.detachParentIntegration&&e?t.nextButtonType():e?this.properties.hasCompleteButton?"complete":"none":"next"}},{key:"hasPreviousButton",value:function(){return!!this.properties.navigationVisible&&"none"!==this.previousButtonType()}},{key:"hasNextButton",value:function(){return!!this.properties.navigationVisible&&"none"!==this.nextButtonType()}}]),i}(Ln),ar={widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},or={components:{WidgetsLayout:rr,BuilderWidgetsLayout:Kn},props:o(o({},ar),{},{widget:{type:ir,required:!0}}),data:function(){return{sortedPages:[]}},computed:{currentPageIndex:function(){var e,t;return(null===(e=this.pageState.widgetState)||void 0===e||null===(t=e[this.widget.id])||void 0===t?void 0:t.currentPageIndex)||0}},watch:{currentPageIndex:{handler:function(){var e=this.widget.getState("viewedIndices")||[];e.includes(this.currentPageIndex)||this.widget.setState("viewedIndices",[].concat(S(e),[this.currentPageIndex]))},immediate:!0},"widget.properties.pages":{handler:function(){this.sortedPages=this.widget.getSortedPages()},immediate:!0}}},sr=or,dr=function(e){e&&e("data-v-6a25db02_0",{source:".pages-menu-wrapper[data-v-6a25db02]{display:flex;flex-direction:row;justify-content:center;margin:10px 0}.pages-menu-item[data-v-6a25db02]{display:inline-block;padding:10px 20px;cursor:pointer;text-align:center}.pages-menu-item.unopened[data-v-6a25db02]{opacity:.3;cursor:default}.pages-menu-item.active[data-v-6a25db02]{border-bottom:3px solid #03a9f4}.pages-menu-item.errors[data-v-6a25db02]{border-color:red}.back-forward-wrapper[data-v-6a25db02]{display:flex;flex-direction:row;justify-content:space-between}.back-forward-button[data-v-6a25db02]{padding:10px 20px;margin:10px;border:1px solid transparent;background-color:#03a9f4;color:#fff;cursor:pointer}.back-forward-button.errors[data-v-6a25db02]{background-color:red;color:#fff;opacity:.2;cursor:default}",map:void 0,media:void 0})},ur=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.widget.properties.tabsVisible?n("div",{staticClass:"pages-menu-wrapper"},e._l(e.sortedPages,(function(t,r){return n("a",{key:r,staticClass:"pages-menu-item",class:{active:e.currentPageIndex===r,errors:e.widget.pageIndexHasErrors(r,{allChildPages:!0}),unopened:!(e.widget.getState("viewedIndices")||[]).includes(r)},on:{click:function(){return e.widget.onChangePageIndex(r)}}},[e._v("\n      "+e._s(e.t(t.labelKey,e.widget.id))+"\n    ")])})),0):e._e(),e._v(" "),n("div",{staticClass:"pages-content-item"},[n("builder-widgets-layout",{attrs:{"widget-items":e.widgetItems,"exclude-widget-ids":[e.widget.id],"only-include-widget-ids":e.sortedPages.length&&e.currentPageIndex>-1?e.sortedPages[e.currentPageIndex].children:[],"for-parent":e.widget.id}})],1),e._v(" "),e.widget.properties.navigationVisible?n("div",{staticClass:"back-forward-wrapper"},[n("div",[e.widget.hasPreviousButton()?n("button",{staticClass:"back-forward-button",on:{click:function(){return e.widget.toPreviousPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.previousButtonType(),e.widget.id))+"\n      ")]):e._e()]),e._v(" "),n("div",[e.widget.hasNextButton()?n("button",{staticClass:"back-forward-button",class:{errors:e.widget.pageIndexHasErrors(e.currentPageIndex)},on:{click:function(){return e.widget.toNextPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.nextButtonType(),e.widget.id))+"\n      ")]):e._e()])]):e._e()])},staticRenderFns:[]},dr,sr,"data-v-6a25db02",false,undefined,!1,De,void 0,void 0),lr=ur,cr={props:{widget:Object,t:Function},inject:["updateWidget","setMessage","getLocale"],methods:{setPageLabel:function(e,t){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:this.$props.widget.properties.pages[e].labelKey,value:t})},setProperty:function(e,t){this.widget.setProperty(e,t)}}},pr=cr,fr=function(e){e&&e("data-v-47418e34_0",{source:".section[data-v-47418e34]{padding:15px 5px}label[data-v-47418e34]{display:block;padding:5px 0}.page-item[data-v-47418e34]{padding:5px 0;display:flex;flex-direction:row;justify-content:space-between}.page-item input[data-v-47418e34]{flex:1;border-width:0 0 1px 0;outline:0}.page-item .delete-page-button[data-v-47418e34]{padding-right:5px;padding-left:5px}",map:void 0,media:void 0})},gr=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"section"},[n("label",[e._v("Pages")]),e._v(" "),n("div",{staticClass:"pages-list-wrapper"},e._l(e.widget.properties.pages,(function(t,r){return n("div",{key:r,staticClass:"page-item"},[n("input",{attrs:{type:"text"},domProps:{value:e.t(t.labelKey)},on:{change:function(t){return e.setPageLabel(r,t.target.value)}}}),e._v(" "),n("a",{staticClass:"delete-page-button",on:{click:function(){return e.widget.removeWidget()}}},[e._v("🗑")])])})),0)]),e._v(" "),n("div",{staticClass:"section"},[n("label",[e._v("Options")]),e._v(" "),n("label",[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.widget.properties.hasCompleteButton},on:{change:function(t){return e.setProperty("hasCompleteButton",t.target.checked)}}}),e._v("\n      has complete button\n    ")]),e._v(" "),n("label",[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.widget.properties.tabsVisible},on:{change:function(t){return e.setProperty("tabsVisible",t.target.checked)}}}),e._v("\n      show tabs\n    ")]),e._v(" "),n("label",[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.widget.properties.navigationVisible},on:{change:function(t){return e.setProperty("navigationVisible",t.target.checked)}}}),e._v("\n      show navigation\n    ")]),e._v(" "),n("label",[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.widget.properties.navigationIntegrateChildrenPages},on:{change:function(t){return e.setProperty("navigationIntegrateChildrenPages",t.target.checked)}}}),e._v("\n      integrate children pages\n    ")])])])},staticRenderFns:[]},fr,pr,"data-v-47418e34",false,undefined,!1,De,void 0,void 0),vr=gr,hr={widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},yr={components:{WidgetsLayout:rr},props:o(o({},hr),{},{widget:{type:Object,required:!0},t:Function}),data:function(){return{sortedPages:[]}},computed:{currentPageIndex:function(){var e,t,n;return(null===(e=this.pageState)||void 0===e||null===(t=e.widgetState)||void 0===t||null===(n=t[this.widget.id])||void 0===n?void 0:n.currentPageIndex)||0}},watch:{currentPageIndex:{handler:function(){var e=this.widget.getState("viewedIndices")||[];e.includes(this.currentPageIndex)||this.widget.setState("viewedIndices",[].concat(S(e),[this.currentPageIndex]))},immediate:!0},"widget.properties.pages":{handler:function(){this.sortedPages=this.widget.getSortedPages()},immediate:!0}}},wr=yr,mr=function(e){e&&e("data-v-8d79d2a6_0",{source:".pages-menu-wrapper[data-v-8d79d2a6]{display:flex;flex-direction:row;justify-content:center;margin:10px 0}.pages-menu-item[data-v-8d79d2a6]{display:inline-block;padding:10px 20px;cursor:pointer;text-align:center}.pages-menu-item.unopened[data-v-8d79d2a6]{opacity:.3;cursor:default}.pages-menu-item.active[data-v-8d79d2a6]{border-bottom:3px solid #03a9f4}.pages-menu-item.errors[data-v-8d79d2a6]{border-color:red}.back-forward-wrapper[data-v-8d79d2a6]{display:flex;flex-direction:row;justify-content:space-between}.back-forward-button[data-v-8d79d2a6]{padding:10px 20px;margin:10px;border:1px solid transparent;background-color:#03a9f4;color:#fff;cursor:pointer}.back-forward-button.errors[data-v-8d79d2a6]{background-color:red;color:#fff;opacity:.2;cursor:default}.back-forward-button.submitting[data-v-8d79d2a6]{opacity:.2}",map:void 0,media:void 0})},br=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.widget.properties.tabsVisible?n("div",{staticClass:"pages-menu-wrapper"},e._l(e.sortedPages,(function(t,r){return n("a",{key:r,staticClass:"pages-menu-item",class:{active:e.currentPageIndex===r,errors:e.widget.pageIndexHasErrors(r,{allChildPages:!0}),unopened:!(e.widget.getState("viewedIndices")||[]).includes(r)},attrs:{id:"pages-"+e.widget.id+"-"+r,"data-test":"pages-"+e.widget.code+"-"+r,disabled:!(e.widget.getState("viewedIndices")||[]).includes(r)},on:{click:function(){return(e.widget.getState("viewedIndices")||[]).includes(r)&&e.widget.onChangePageIndex(r)}}},[e._v("\n      "+e._s(e.t(t.labelKey,e.widget.id))+"\n    ")])})),0):e._e(),e._v(" "),n("div",{staticClass:"pages-content-item"},[n("widgets-layout",{attrs:{"widget-items":e.widgetItems,"exclude-widget-ids":[e.widget.id],"only-include-widget-ids":e.sortedPages.length&&e.currentPageIndex>-1?e.sortedPages[e.currentPageIndex].children:void 0,"widgets-order":e.sortedPages.length&&e.currentPageIndex>-1?e.sortedPages[e.currentPageIndex].children:void 0,"for-parent":e.widget.id}})],1),e._v(" "),e.widget.properties.navigationVisible?n("div",{staticClass:"back-forward-wrapper"},[n("div",[e.widget.hasPreviousButton()?n("button",{staticClass:"back-forward-button",attrs:{disabled:e.widget.pageIndexHasLoadings(e.currentPageIndex)||e.widget.isSubmitting},on:{click:function(){return e.widget.toPreviousPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.previousButtonType(),e.widget.id))+"\n      ")]):e._e()]),e._v(" "),n("div",[e.widget.hasNextButton()?n("button",{staticClass:"back-forward-button",class:{errors:e.widget.pageIndexHasErrors(e.currentPageIndex),submitting:e.widget.isSubmitting},attrs:{disabled:e.widget.pageIndexHasLoadings(e.currentPageIndex)||e.widget.pageIndexHasErrors(e.currentPageIndex)||e.widget.isSubmitting},on:{click:function(){return e.widget.toNextPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.nextButtonType(),e.widget.id))+"\n      ")]):e._e()])]):e._e()])},staticRenderFns:[]},mr,wr,"data-v-8d79d2a6",false,undefined,!1,De,void 0,void 0),_r=br,xr={widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},Sr={components:{WidgetsLayout:rr},props:o(o({},xr),{},{widget:{type:Object,required:!0},t:Function}),data:function(){return{sortedPages:[]}},computed:{currentPageIndex:function(){var e,t,n;return(null===(e=this.pageState)||void 0===e||null===(t=e.widgetState)||void 0===t||null===(n=t[this.widget.id])||void 0===n?void 0:n.currentPageIndex)||0}},watch:{currentPageIndex:{handler:function(){var e=this.widget.getState("viewedIndices")||[];e.includes(this.currentPageIndex)||this.widget.setState("viewedIndices",[].concat(S(e),[this.currentPageIndex]))},immediate:!0},"widget.properties.pages":{handler:function(){this.sortedPages=this.widget.getSortedPages()},immediate:!0}}},Cr=Sr,kr=function(e){e&&e("data-v-1e28174e_0",{source:".pages-menu-wrapper[data-v-1e28174e]{display:flex;flex-direction:row;justify-content:center;margin:10px 0}.pages-menu-item[data-v-1e28174e]{display:inline-block;padding:10px 20px;cursor:pointer;text-align:center}.pages-menu-item.unopened[data-v-1e28174e]{opacity:.3;cursor:default}.pages-menu-item.active[data-v-1e28174e]{border-bottom:3px solid #03a9f4}.pages-menu-item.errors[data-v-1e28174e]{border-color:red}.back-forward-wrapper[data-v-1e28174e]{display:flex;flex-direction:row;justify-content:space-between}.back-forward-button[data-v-1e28174e]{padding:10px 20px;margin:10px;border:1px solid transparent;background-color:#03a9f4;color:#fff;cursor:pointer}.back-forward-button.errors[data-v-1e28174e]{background-color:red;color:#fff;opacity:.2;cursor:default}.back-forward-button.submitting[data-v-1e28174e]{opacity:.2}",map:void 0,media:void 0})},Or=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.sortedPages,(function(t,r){return n("div",{key:r,attrs:{id:"pages-"+e.widget.id+"-"+r}},[n("h3",[e._v(e._s(e.t(t.labelKey,e.widget.id)))]),e._v(" "),n("widgets-layout",{attrs:{"widget-items":e.widgetItems,"exclude-widget-ids":[e.widget.id],"only-include-widget-ids":t.children,"widgets-order":t.children,"for-parent":e.widget.id}})],1)})),0)},staticRenderFns:[]},kr,Cr,"data-v-1e28174e",false,undefined,!1,De,void 0,void 0),Ir=Or,jr={name:"BuilderWidgetTree",props:{widgetItems:Object,parentId:String,listIds:Array,level:Number},inject:["widgetControls"],data:function(){return{filteredWidgetItems:[]}},computed:{changes:function(){return{listIds:this.$props.listIds,parentId:this.$props.parentId}}},watch:{changes:{handler:function(e){var t=this,n=e.listIds,r=e.parentId;this.$data.filteredWidgetItems=n?n.map((function(e){return t.$props.widgetItems[e]})):Object.values(this.$props.widgetItems).filter((function(e){return e.parentId===r}))},immediate:!0}}},Er=jr,Pr=function(e){e&&e("data-v-3c1fc8b6_0",{source:".tree-item-box[data-v-3c1fc8b6]{border:1px solid #f2f2f2;border-radius:4px;padding:5px;margin:2px 0;display:flex;flex-direction:row;align-items:center}.tree-item-box>*[data-v-3c1fc8b6]{margin:0;margin-right:5px}.tree-item-box small[data-v-3c1fc8b6]{color:#a1a1a1}.drag-icon[data-v-3c1fc8b6]{cursor:grab}.drag-icon[data-v-3c1fc8b6]:active{cursor:grabbing}",map:void 0,media:void 0})},Wr=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-level-wrapper"},e._l(e.filteredWidgetItems,(function(t){return n("div",{key:t.id,staticClass:"tree-item",style:{marginLeft:10*(e.level||0)+"px"}},[n("div",{staticClass:"tree-item-box"},[n("span",{staticClass:"drag-icon"},[e._v("☷")]),e._v(" "),n("p",[e._v(e._s(t.type))]),e._v(" "),n("small",[e._v(e._s(t.code))])]),e._v(" "),e.widgetControls[t.type].widgetTree?[n(e.widgetControls[t.type].widgetTree,{tag:"component",attrs:{widgetItems:e.widgetItems,widgetItem:t,parentId:t.id,level:1}})]:[n("builder-widget-tree",{attrs:{widgetItems:e.widgetItems,parentId:t.id,level:1}})]],2)})),0)},staticRenderFns:[]},Pr,Er,"data-v-3c1fc8b6",false,undefined,!1,De,void 0,void 0),qr=Wr,Rr={components:{BuilderWidgetTree:qr},props:{widgetItems:Object,widgetItem:Object,parentId:String,level:Number},inject:["t","setMessage","getLocale"],methods:{onPageLabelChange:function(e,t){this.setMessage({id:this.$props.widgetItem.id,locale:this.getLocale(),key:this.$props.widgetItem.properties.pages[e].labelKey,value:t})}}},$r={create:function(e){return{id:Te(),type:"pages",properties:o({pages:[{labelKey:"",children:[]}],navigationVisible:!0,tabsVisible:!0,hasCompleteButton:!1,navigationIntegrateChildrenPages:!1,detachParentIntegration:!1},e)}},display:_r,builder:lr,builderForm:vr,readOnly:Ir,widgetItem:ir,widgetTree:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.widgetItem.properties.pages,(function(t,r){return n("div",{key:r},[n("div",{staticClass:"page-label"},[n("small",[n("input",{domProps:{value:e.t(e.widgetItem.id+"."+t.labelKey)},on:{change:function(t){return e.onPageLabelChange(r,t.target.value)}}})])]),e._v(" "),n("builder-widget-tree",{attrs:{widgetItems:e.widgetItems,level:1,listIds:t.children}})],1)})),0)},staticRenderFns:[]},(function(e){e&&e("data-v-d2da775a_0",{source:".page-label[data-v-d2da775a]{padding:6px}.page-label input[data-v-d2da775a]{border:none;outline:0}",map:void 0,media:void 0})}),Rr,"data-v-d2da775a",false,undefined,!1,De,void 0,void 0)},Fr={inject:["questionControls","widgetControls","getPageState","setPageState","getLocale","setMessage"],props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:{type:Function,required:!0},getWidgetState:{type:Function,required:!0},t:Function,view:String},created:function(){var e;this.widget.setState(o({type:"question"},void 0===(null===(e=this.widget.getState())||void 0===e?void 0:e.touched)?{touched:!1,pristine:!0,dirty:!1}:{}))},mounted:function(){var e=this;this.$nextTick((function(){e.$refs.labelInput&&(e.$refs.labelInput.style.height="",e.$refs.labelInput.style.height=e.$refs.labelInput.scrollHeight+"px")}))},methods:{updateText:function(e,t){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__".concat(e),value:t.replaceAll(/\n|\r/g,"")})},onChange:function(e,t){var n,r=this;null===(n=this.widget)||void 0===n||n.setState(o({response:e},t?{}:{touched:!0,pristine:!1,dirty:!0})),t||u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.widget.runValidations();case 2:r.widget.emitListener("change");case 3:case"end":return e.stop()}}),e)})))()}}},Tr=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.widget.getState("reflexiveHide")?e._e():n("div",[n("div",{staticClass:"question-wrapper"},[e.widget.properties.hideLabel?e._e():n("label",{class:{errors:(e.getWidgetState("errors")||[]).length},attrs:{for:e.widget.code||e.widget.id}},[n("textarea",{ref:"labelInput",staticClass:"text-input",attrs:{oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},domProps:{value:e.t("__label",e.widget.id)},on:{input:function(t){return e.updateText("label",t.target.value)}}})]),e._v(" "),n("div",[n(e.questionControls[e.widget.properties.control].display,{tag:"component",attrs:{properties:e.widget.properties.controlProperties,widget:e.widget,"widget-items":e.widgetItems,"on-change":e.onChange,value:e.widget.getState("response"),"set-widget-state":e.setWidgetState,"get-widget-state":e.getWidgetState,view:e.view,errors:e.getWidgetState("errors"),t:function(t,n){return e.t("control_"+t,n)}}}),e._v(" "),e.getWidgetState("dirty")&&e.getWidgetState("errors")?e._l(e.getWidgetState("errors").slice(0,1),(function(t,r){return n("span",{key:t.err+"_"+r,staticClass:"error"},[e.t("control_"+t.err)?[e._v(e._s(e.t("control_"+t.err,t.data)))]:[e._v(e._s(e.t(""+t.err,t.data)))]],2)})):e._e()],2)])])},staticRenderFns:[]},(function(e){e&&e("data-v-0020c860_0",{source:".question-wrapper[data-v-0020c860]{width:100%;display:flex;flex-direction:row}.question-wrapper>label[data-v-0020c860]{flex:1;max-width:300px;border-right:1px solid #393939;padding:20px 0;margin-right:20px}.question-wrapper>label.errors[data-v-0020c860]{color:red}.question-wrapper>div[data-v-0020c860]{flex:2;padding:20px 0}.error[data-v-0020c860]{display:block;color:red;margin-top:10px}.text-input[data-v-0020c860]{font-size:inherit;font-weight:inherit;font-family:inherit;border:none;outline:0;width:100%;background-color:transparent;resize:none;min-height:10px;margin-bottom:-15px}",map:void 0,media:void 0})}),Fr,"data-v-0020c860",false,undefined,!1,De,void 0,void 0),Lr={props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:{type:Function,required:!0},getWidgetState:{type:Function,required:!0},t:Function,view:String},inject:["questionControls","widgetControls","setPageState"],created:function(){var e,t,n=(null===(e=this.widget)||void 0===e?void 0:e.getState())||{};n.type&&void 0!==n.touched||(null===(t=this.widget)||void 0===t||t.setState(o({type:"question"},void 0===n.touched?{touched:!1,pristine:!0,dirty:!1}:{})))},unmounted:function(){},methods:{onChange:function(e,t){var n,r=this;null===(n=this.widget)||void 0===n||n.setState(o({response:e},t?{}:{touched:!0,pristine:!1,dirty:!0})),t||u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.widget)||void 0===t?void 0:t.runValidations();case 2:null===(n=r.widget)||void 0===n||n.emitListener("change");case 3:case"end":return e.stop()}}),e)})))()},getQuestionControlRender:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display",i=null===(t=this.questionControls)||void 0===t?void 0:t[e];if(!i)throw new Error("question control type [".concat(e,"] from widget [").concat(null===(n=this.widget)||void 0===n?void 0:n.id,"] was not found. Maybe the question control was not imported"));var a=i[r];if(!a)throw new Error("widget view [".concat(r,"] does not exist for question control type [").concat(e,"]"));return a}}},Ar=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.widget.getState("reflexiveHide")?e._e():n("div",[n("div",{staticClass:"question-wrapper"},[e.widget.properties.hideLabel?e._e():n("label",{class:{errors:(e.getWidgetState("errors")||[]).length},attrs:{for:e.widget.code||e.widget.id}},[e._v(e._s(e.t("__label",e.widget.id)))]),e._v(" "),n("div",[n(e.getQuestionControlRender(e.widget.properties.control),{tag:"component",attrs:{id:"widget_question_"+e.widget.id,"data-test":"widget_question_"+e.widget.code,properties:e.widget.properties.controlProperties,widget:e.widget,widgetItems:e.widgetItems,questionItem:e.widget.questionItem,onChange:e.onChange,value:e.widget.getState("response"),setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view,errors:e.getWidgetState("errors"),t:function(t,n){return e.t("control_"+t,n)}},on:{onChange:e.onChange,t:function(t,n){return e.t("control_"+t,n)},setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState}}),e._v(" "),e.getWidgetState("dirty")&&e.getWidgetState("errors")?e._l(e.getWidgetState("errors").slice(0,1),(function(t,r){return n("span",{key:t.err+"_"+r,staticClass:"error"},[e.t("control_"+t.err)?[e._v(e._s(e.t("control_"+t.err,t.data)))]:[e._v(e._s(e.t(""+t.err,t.data)))]],2)})):e._e()],2)])])},staticRenderFns:[]},(function(e){e&&e("data-v-fe1414d8_0",{source:".question-wrapper[data-v-fe1414d8]{width:100%;display:flex;flex-direction:row}.question-wrapper>label[data-v-fe1414d8]{flex:1;max-width:300px;border-right:1px solid #393939;padding:20px 0;margin-right:20px}.question-wrapper>label.errors[data-v-fe1414d8]{color:red}.question-wrapper>div[data-v-fe1414d8]{flex:2;padding:20px 0}.error[data-v-fe1414d8]{display:block;color:red}@media only screen and (max-width:600px){.question-wrapper[data-v-fe1414d8]{flex-direction:column}.question-wrapper>label[data-v-fe1414d8]{border-right:none;padding:10px 0 5px 0}.question-wrapper>label.errors[data-v-fe1414d8]{color:#000}.question-wrapper>div[data-v-fe1414d8]{padding:5px 0 10px 0}}",map:void 0,media:void 0})}),Lr,"data-v-fe1414d8",false,undefined,!1,De,void 0,void 0),Mr=function(){function e(t){var n=t.widget;l(this,e),f(this,"_widget",void 0),this._widget=n}return p(e,[{key:"widget",get:function(){return this._widget}},{key:"destroy",value:function(){}}]),e}(),Dr=function(e){g(i,e);var t,n,r=m(i);function i(e){var t;l(this,i),f(y(t=r.call(this,e)),"questionControlErrors",[]),f(y(t),"_questionItem",void 0);var n=e.getQuestionControls()[t._widget.properties.control].questionItem||Mr;return t._questionItem=new n({widget:y(t)}),t}return p(i,[{key:"questionItem",get:function(){return this._questionItem}},{key:"setQuestionErrors",value:(n=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.questionControlErrors=t,e.next=3,this.runValidations();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"runValidations",value:(t=u(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=[],e.t1=S(this.questionControlErrors),e.t2=S,e.next=5,_(v(i.prototype),"runValidations",this).call(this,t);case 5:if(e.t3=e.sent,e.t3){e.next=8;break}e.t3=[];case 8:return e.t4=e.t3,e.t5=(0,e.t2)(e.t4),r=e.t0.concat.call(e.t0,e.t1,e.t5),null!==(n=r)&&void 0!==n&&n.length||(r=null),this.setState({errors:r||[],valid:!r,hasErrors:!!r}),(this.getParentIds()||[]).forEach((function(e){a._widgetItems[e].setChildErrors(a.id,r)})),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){_(v(i.prototype),"destroy",this).call(this),this.questionItem.destroy()}}]),i}(Ln),Vr={create:function(e){return{id:Te(),type:"question",properties:o({responseType:"",hideLabel:!1,control:"",controlProperties:{}},e)}},display:Ar,builder:Tr,readOnly:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.getWidgetState("reflexiveHide")?e._e():n("div",[n("div",{staticClass:"question-wrapper"},[e.widget.properties.hideLabel?e._e():n("label",[e._v(e._s(e.t("__label",e.widget.id)))]),e._v(" "),n("div",[n(e.questionControls[e.widget.properties.control].readOnly,{tag:"component",attrs:{properties:e.widget.properties.controlProperties,widget:e.widget,"on-change":e.onChange,value:e.getWidgetState("response"),"set-widget-state":e.setWidgetState,"get-widget-state":e.getWidgetState,view:e.view,t:e.t}})],1)])])},staticRenderFns:[]},(function(e){e&&e("data-v-38a5845c_0",{source:".question-wrapper[data-v-38a5845c]{width:100%;display:flex;flex-direction:row;padding:10px 10px}.question-wrapper>label[data-v-38a5845c]{flex:1;max-width:300px;border-right:1px solid #393939;padding:10px 0}.question-wrapper>div[data-v-38a5845c]{flex:2;padding:10px 20px}",map:void 0,media:void 0})}),{inject:["questionControls","widgetControls","getPageState","setPageState"],props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},computed:{pageState:function(){return this.getPageState()}},created:function(){},unmounted:function(){},methods:{onChange:function(e){this.setWidgetState("response",e)}}},"data-v-38a5845c",false,undefined,!1,De,void 0,void 0),widgetItem:Dr},Nr={components:{BuilderWidgetsLayout:Kn,WidgetsLayout:rr},inject:["getLocale","setMessage"],props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},setup:function(){},computed:{label:function(){var e;return null===(e=this.t)||void 0===e?void 0:e.call(this,"__label",this.widget.id)},childErrors:function(){var e;return null===(e=this.widget.getState())||void 0===e?void 0:e.childErrors},hasChildErrors:function(){return this.widget.hasChildErrors()}},methods:{updateText:function(e,t){this.setMessage({id:this.widget.id,locale:this.getLocale(),key:"__".concat(e),value:t.replaceAll(/\n|\r/g,"")})},isShowLabel:function(e){return this.widget.properties.hasLabel&&this.widget.properties.labelPosition===e}}},Br=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section-wrapper",class:{errors:e.hasChildErrors}},[n("label",[n("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:e.label},on:{input:function(t){return e.updateText("label",t.target.value)}}})]),e._v(" "),n("builder-widgets-layout",{attrs:{"widget-controls":e.widgetControls,"widget-items":e.widgetItems,"for-parent":e.widget.id}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-47295f4d_0",{source:".section-wrapper[data-v-47295f4d]{position:relative;border:1px solid #a9a9a9;min-height:30px;padding:10px;margin:10px 0;border-radius:8px}.section-wrapper>label[data-v-47295f4d]{position:absolute;top:0;left:10px;transform:translateY(-50%);background-color:#fff;padding:1px 10px;z-index:10}.section-wrapper.errors[data-v-47295f4d]{border-color:red}.text-input[data-v-47295f4d]{font-size:inherit;font-weight:inherit;font-family:inherit;border:none;outline:0;width:100%;background-color:transparent;resize:none;min-height:10px;margin-bottom:-15px}",map:void 0,media:void 0})}),Nr,"data-v-47295f4d",false,undefined,!1,De,void 0,void 0),Hr=Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("section builder form")])},staticRenderFns:[]},undefined,{inject:["updateWidget"],props:{widget:Object}},undefined,false,undefined,!1,void 0,void 0,void 0),zr=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section-wrapper",class:{errors:e.hasChildErrors}},[e.label?n("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),n("widgets-layout",{attrs:{"widget-controls":e.widgetControls,"widget-items":e.widgetItems,"for-parent":e.widget.id}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-cc68ccc6_0",{source:".section-wrapper[data-v-cc68ccc6]{position:relative;border:1px solid #a9a9a9;min-height:30px;padding:10px;margin:10px 0;border-radius:8px}.section-wrapper>label[data-v-cc68ccc6]{position:absolute;top:0;left:10px;transform:translateY(-50%);background-color:#fff;padding:10px}.section-wrapper.errors[data-v-cc68ccc6]{border-color:red}@media only screen and (max-width:600px){.section-wrapper label[data-v-cc68ccc6]{font-size:10pt}}",map:void 0,media:void 0})}),{components:{WidgetsLayout:rr},props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},setup:function(){},computed:{label:function(){var e;return null===(e=this.t)||void 0===e?void 0:e.call(this,"__label",this.widget.id)},childErrors:function(){var e;return null===(e=this.widget.getState())||void 0===e?void 0:e.childErrors},hasChildErrors:function(){return this.widget.hasChildErrors()}},methods:{isShowLabel:function(e){return this.widget.properties.hasLabel&&this.widget.properties.labelPosition===e}}},"data-v-cc68ccc6",false,undefined,!1,De,void 0,void 0),Ur=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section-wrapper"},[e.label?n("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),n("widgets-layout",{attrs:{"widget-controls":e.widgetControls,"widget-items":e.widgetItems,"for-parent":e.widget.id}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-b08fbba2_0",{source:".section-wrapper[data-v-b08fbba2]{position:relative;border:1px solid #a9a9a9;min-height:30px;padding:10px;margin:10px;border-radius:8px}.section-wrapper>label[data-v-b08fbba2]{position:absolute;top:0;left:10px;transform:translateY(-50%);background-color:#fff;padding:10px}",map:void 0,media:void 0})}),{components:{WidgetsLayout:rr},props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},setup:function(){},computed:{label:function(){var e,t;return null===(e=this.t)||void 0===e?void 0:e.call(this,"__label",null===(t=this.widget)||void 0===t?void 0:t.id)}},methods:{isShowLabel:function(e){var t,n;return(null===(t=this.widget)||void 0===t?void 0:t.properties.hasLabel)&&(null===(n=this.widget)||void 0===n?void 0:n.properties.labelPosition)===e}}},"data-v-b08fbba2",false,undefined,!1,De,void 0,void 0),Kr=function(e){g(n,e);var t=m(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"getChildrenIds",value:function(){return this.properties.children}},{key:"addChild",value:function(e,t){_(v(n.prototype),"addChild",this).call(this,e,t),this._widget.properties.children.splice((null==t?void 0:t.idx)||0,0,e.id)}},{key:"removeChild",value:function(e){_(v(n.prototype),"removeChild",this).call(this,e);var t=this._widget.properties.children.findIndex((function(t){return t===e.id}));t>-1&&this._widget.properties.children.splice(t,1)}}]),n}(Ln),Yr={create:function(e){return{id:Te(),type:"section",properties:o({children:[]},e)}},display:zr,builder:Br,builderForm:Hr,readOnly:Ur,widgetItem:Kr},Jr={inject:["getLocale","setMessage"],props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},setup:function(){},computed:{label:function(){var e;return null===(e=this.t)||void 0===e?void 0:e.call(this,"__label",this.widget.id)}},methods:{updateText:function(e,t){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__".concat(e),value:t.replaceAll(/\n|\r/g,"")})},isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},Gr=Ae({render:function(){var e,t,n,r=this,i=r.$createElement,a=r._self._c||i;return a("div",{staticClass:"line-wrapper",class:{vertical:"vertical"===r.widget.properties.dir}},[r.isShowLabel("start")?a("label",{class:(e={},e[r.widget.properties.labelPosition||"start"]=!0,e)},[a("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:r.label},on:{input:function(e){return r.updateText("label",e.target.value)}}})]):r._e(),r._v(" "),a("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("center")?a("label",{class:(t={},t[r.widget.properties.labelPosition||"start"]=!0,t)},[a("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:r.label},on:{input:function(e){return r.updateText("label",e.target.value)}}})]):r._e(),r._v(" "),a("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("end")?a("label",{class:(n={},n[r.widget.properties.labelPosition||"start"]=!0,n)},[a("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:r.label},on:{input:function(e){return r.updateText("label",e.target.value)}}})]):r._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-bba692ee_0",{source:".line-wrapper[data-v-bba692ee]{display:flex;flex-direction:row;align-items:center;padding:10px 0}.line-wrapper.vertical[data-v-bba692ee]{flex-direction:column}.line-wrapper .line[data-v-bba692ee]{flex:1;background-color:#a0a0a0;height:1px}.line-wrapper.vertical .line[data-v-bba692ee]{width:1px}.line-wrapper label[data-v-bba692ee]{padding:10px;background-color:rgba(255,255,255,.5);border-radius:10px}.line-wrapper label.start[data-v-bba692ee]{padding-left:0}.line-wrapper label.end[data-v-bba692ee]{padding-right:0}.text-input[data-v-bba692ee]{font-size:inherit;font-weight:inherit;font-family:inherit;border:none;outline:0;width:100%;background-color:transparent;resize:none;min-height:10px;margin-bottom:-15px}.start .text-input[data-v-bba692ee]{text-align:left}.center .text-input[data-v-bba692ee]{text-align:center}.end .text-input[data-v-bba692ee]{text-align:right}.line-wrapper.vertical .text-input[data-v-bba692ee]{text-align:center}",map:void 0,media:void 0})}),Jr,"data-v-bba692ee",false,undefined,!1,De,void 0,void 0),Qr=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"fieldItem"},[n("label",{staticClass:"label"},[e._v("Label Position")]),e._v(" "),n("div",{staticClass:"button-group"},[n("button",{staticClass:"button-item",class:{active:"start"===e.widget.properties.labelPosition},on:{click:function(){return e.setLabelPosition("start")}}},[e._v("\n        start\n      ")]),e._v(" "),n("button",{staticClass:"button-item",class:{active:"center"===e.widget.properties.labelPosition},on:{click:function(){return e.setLabelPosition("center")}}},[e._v("\n        center\n      ")]),e._v(" "),n("button",{staticClass:"button-item",class:{active:"end"===e.widget.properties.labelPosition},on:{click:function(){return e.setLabelPosition("end")}}},[e._v("\n        end\n      ")])])])])},staticRenderFns:[]},(function(e){e&&e("data-v-423a58fa_0",{source:".fieldItem[data-v-423a58fa]{padding:10px}.fieldItem>.label[data-v-423a58fa]{display:block;padding:10px 0}.button-group[data-v-423a58fa]{position:relative;display:flex;flex-direction:row;border-radius:4px;overflow:hidden;width:100%;max-width:300px}.button-item[data-v-423a58fa]{padding:5px 10px;border:none;flex:1;cursor:pointer}.button-item.active[data-v-423a58fa]{background-color:#03a9f4;color:#fff}",map:void 0,media:void 0})}),{props:{widget:{type:Ln,required:!0}},inject:["updateWidget"],methods:{setLabelPosition:function(e){this.$props.widget.properties.labelPosition=e,this.updateWidget(this.$props.widget)}}},"data-v-423a58fa",false,undefined,!1,De,void 0,void 0),Xr={create:function(e){return{id:Te(),type:"separator",properties:o({dir:"horizontal",hasLabel:!0,labelPosition:"start"},e)}},display:Ae({render:function(){var e,t,n,r=this,i=r.$createElement,a=r._self._c||i;return a("div",{staticClass:"line-wrapper",class:{vertical:"vertical"===r.widget.properties.dir}},[r.isShowLabel("start")?a("label",{class:(e={},e[r.widget.properties.labelPosition||"start"]=!0,e)},[r._v(r._s(r.label))]):r._e(),r._v(" "),a("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("center")?a("label",{class:(t={},t[r.widget.properties.labelPosition||"start"]=!0,t)},[r._v(r._s(r.label))]):r._e(),r._v(" "),a("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("end")?a("label",{class:(n={},n[r.widget.properties.labelPosition||"start"]=!0,n)},[r._v(r._s(r.label))]):r._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-84f25dd2_0",{source:".line-wrapper[data-v-84f25dd2]{display:flex;flex-direction:row;align-items:center;padding:10px 0}.line-wrapper.vertical[data-v-84f25dd2]{flex-direction:column}.line-wrapper .line[data-v-84f25dd2]{flex:1;background-color:#a0a0a0;height:1px}.line-wrapper.vertical .line[data-v-84f25dd2]{width:1px}.line-wrapper label[data-v-84f25dd2]{padding:10px;background-color:rgba(255,255,255,.5);border-radius:10px}.line-wrapper label.start[data-v-84f25dd2]{padding-left:0}.line-wrapper label.end[data-v-84f25dd2]{padding-right:0}@media only screen and (max-width:600px){.line-wrapper label[data-v-84f25dd2]{font-size:10pt}}",map:void 0,media:void 0})}),{props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},setup:function(){},computed:{label:function(){var e;return null===(e=this.t)||void 0===e?void 0:e.call(this,"__label",this.widget.id)}},methods:{isShowLabel:function(e){return this.widget.properties.hasLabel&&this.widget.properties.labelPosition===e}}},"data-v-84f25dd2",false,undefined,!1,De,void 0,void 0),builder:Gr,builderForm:Qr,readOnly:Ae({render:function(){var e,t,n,r=this,i=r.$createElement,a=r._self._c||i;return a("div",{staticClass:"line-wrapper",class:{vertical:"vertical"===r.widget.properties.dir}},[r.isShowLabel("start")?a("label",{class:(e={},e[r.widget.properties.labelPosition||"start"]=!0,e)},[r._v(r._s(r.label))]):r._e(),r._v(" "),a("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("center")?a("label",{class:(t={},t[r.widget.properties.labelPosition||"start"]=!0,t)},[r._v(r._s(r.label))]):r._e(),r._v(" "),a("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("end")?a("label",{class:(n={},n[r.widget.properties.labelPosition||"start"]=!0,n)},[r._v(r._s(r.label))]):r._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-5fb0eccc_0",{source:".line-wrapper[data-v-5fb0eccc]{display:flex;flex-direction:row;align-items:center;padding:10px}.line-wrapper.vertical[data-v-5fb0eccc]{flex-direction:column}.line-wrapper .line[data-v-5fb0eccc]{flex:1;background-color:#a0a0a0;height:1px}.line-wrapper.vertical .line[data-v-5fb0eccc]{width:1px}.line-wrapper label[data-v-5fb0eccc]{padding:10px;background-color:rgba(255,255,255,.5);border-radius:10px}.line-wrapper label.start[data-v-5fb0eccc]{padding-left:0}.line-wrapper label.end[data-v-5fb0eccc]{padding-right:0}",map:void 0,media:void 0})}),{props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},setup:function(){},computed:{label:function(){var e,t;return null===(e=this.t)||void 0===e?void 0:e.call(this,"__label",null===(t=this.widget)||void 0===t?void 0:t.id)}},methods:{isShowLabel:function(e){var t,n;return(null===(t=this.widget)||void 0===t?void 0:t.properties.hasLabel)&&(null===(n=this.widget)||void 0===n?void 0:n.properties.labelPosition)===e}}},"data-v-5fb0eccc",false,undefined,!1,De,void 0,void 0)},Zr=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.widget.properties.tagType,{tag:"component",staticClass:"text"},[n("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:e.t("__label",e.widget.id)},on:{input:e.onTextChange}})])},staticRenderFns:[]},(function(e){e&&e("data-v-016e0c50_0",{source:".text-input[data-v-016e0c50]{font-size:inherit;font-family:inherit;font-weight:inherit;outline:0;border:none;width:100%;background-color:transparent}",map:void 0,media:void 0})}),{props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},inject:["getLocale","setMessage"],methods:{onTextChange:function(e){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__label",value:e.target.value})}}},"data-v-016e0c50",false,undefined,!1,De,void 0,void 0),ei=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-wrapper"},[n("a",{staticClass:"tag-selection",class:{selected:"h1"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h1")}}},[e._v("H1")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h2"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h2")}}},[e._v("H2")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h3"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h3")}}},[e._v("H3")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h4"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h4")}}},[e._v("H4")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h5"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h5")}}},[e._v("H5")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h6"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h6")}}},[e._v("H6")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"p"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("p")}}},[e._v("Paragraph")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"small"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("small")}}},[e._v("Small")])])},staticRenderFns:[]},(function(e){e&&e("data-v-f76b79c0_0",{source:".control-wrapper[data-v-f76b79c0]{display:flex;flex-direction:row;border-radius:8px;border:1px solid #e8e8e8;background-color:#fff;overflow:hidden}.tag-selection[data-v-f76b79c0]{height:30px;min-width:40px;padding:0 5px;display:flex;align-items:center;justify-content:center;cursor:pointer}.tag-selection[data-v-f76b79c0]:hover{background-color:#e8e8e8}.tag-selection.selected[data-v-f76b79c0]{background-color:#03a9f4;color:#fff}",map:void 0,media:void 0})}),{props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}},inject:["updateWidget"],methods:{setTagType:function(e){this.widget.properties.tagType=e,this.updateWidget(this.widget)}}},"data-v-f76b79c0",false,undefined,!1,De,void 0,void 0),ti={alert:He,header:Ke,html:Je,pages:$r,question:Vr,section:Yr,separator:Xr,text:{create:function(e){return{id:Te(),type:"text",properties:o({tagType:"p"},e)}},display:Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"text",attrs:{maxlength:e.widget.properties.maxLength}},[e._v("\n  "+e._s(e.t("__label",e.widget.id))+"\n")])},staticRenderFns:[]},undefined,{props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:{type:Function,required:!0},getWidgetState:{type:Function,required:!0},t:Function,view:String}},"data-v-33c0476c",false,undefined,!1,void 0,void 0,void 0),builder:Zr,builderControl:ei,readOnly:Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"text",class:[e.widget.properties.tagType]},[e._v("\n  "+e._s(e.t("__label"))+"\n")])},staticRenderFns:[]},undefined,{props:{widget:{type:Object,required:!0},widgetControls:{type:Object,required:!0},widgetItems:{type:Object,required:!0},pageState:{type:Object,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},wrapperRef:{type:HTMLDivElement,required:!0},t:Function,properties:{type:Object,required:!0},onChange:Function,value:{type:String},errors:{type:Array,required:!1}}},"data-v-e1dae31a",false,undefined,!1,void 0,void 0,void 0)}},ni=function(){function e(t){var n=t.display,r=t.form,i=t.name,a=t.key,o=t.create;l(this,e),f(this,"_display",void 0),f(this,"_form",void 0),f(this,"_name",void 0),f(this,"_key",void 0),f(this,"_create",void 0),this._create=o,this._key=a,this._name=i,this._display=n,this._form=r}return p(e,[{key:"create",get:function(){return this._create}},{key:"display",get:function(){return this._display}},{key:"form",get:function(){return this._form}},{key:"name",get:function(){return this._name}},{key:"key",get:function(){return this._key}}]),e}(),ri=new ni({key:"anchor",name:"Anchor",create:function(e){return{type:this.key,properties:o({id:"",top:0},e)}},display:Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("a",{staticClass:"anchor",style:{top:(e.properties.top||0)+"px"},attrs:{id:e.$props.properties.id}})},staticRenderFns:[]},(function(e){e&&e("data-v-6d640e86_0",{source:"a.anchor[data-v-6d640e86]{position:absolute;top:0;left:0}",map:void 0,media:void 0})}),{props:{wrapperRef:HTMLDivElement,properties:Object}},"data-v-6d640e86",false,undefined,!1,De,void 0,void 0),form:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"field-wrapper"},[n("label",{attrs:{for:"id"}},[e._v("ID")]),e._v(" "),n("input",{attrs:{id:"id",type:"text"},domProps:{value:e.properties.id},on:{change:function(t){return e.onChange("id",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"field-wrapper"},[n("label",{attrs:{for:"top"}},[e._v("Position from top (px)")]),e._v(" "),n("input",{attrs:{id:"top",type:"number"},domProps:{value:e.properties.top},on:{change:function(t){return e.onChange("top",parseFloat(t.target.value))}}})])])},staticRenderFns:[]},(function(e){e&&e("data-v-34f2b220_0",{source:".field-wrapper[data-v-34f2b220]{padding:5px 0 15px 0}.field-wrapper.row[data-v-34f2b220]{display:flex;flex-direction:row;align-items:center}.field-wrapper>label[data-v-34f2b220]{display:block;margin-bottom:3px;font-size:9pt}.field-wrapper.row>label[data-v-34f2b220]{margin-right:5px}.field-wrapper select[data-v-34f2b220]{padding:5px;border-width:0 0 1px 0}.field-wrapper input[data-v-34f2b220]{padding:5px;border-width:0 0 1px 0}.field-row[data-v-34f2b220]{display:flex;flex-direction:row}",map:void 0,media:void 0})}),{props:{effect:Object,properties:Object,widgetItem:Object},methods:{onChange:function(e,t){this.$emit("onPropertiesChange",o(o({},this.$props.properties),{},f({},e,t)))}}},"data-v-34f2b220",false,undefined,!1,De,void 0,void 0)});
/*! @license is-dom-node v1.0.4

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/
function ii(e){return"object"==typeof window.Node?e instanceof window.Node:null!==e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}
/*! @license is-dom-node-list v1.2.1

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/
/*! @license Tealight v0.3.6

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/
function ai(e,t){if(void 0===t&&(t=document),e instanceof Array)return e.filter(ii);if(ii(e))return[e];if(n=e,r=Object.prototype.toString.call(n),"object"==typeof window.NodeList?n instanceof window.NodeList:null!==n&&"object"==typeof n&&"number"==typeof n.length&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(r)&&(0===n.length||ii(n[0])))return Array.prototype.slice.call(e);var n,r;if("string"==typeof e)try{var i=t.querySelectorAll(e);return Array.prototype.slice.call(i)}catch(e){return[]}return[]}
/*! @license Rematrix v0.3.0

	Copyright 2018 Julian Lloyd.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	THE SOFTWARE.
*/function oi(e){if(e.constructor!==Array)throw new TypeError("Expected array.");if(16===e.length)return e;if(6===e.length){var t=si();return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}throw new RangeError("Expected array with either 6 or 16 values.")}function si(){for(var e=[],t=0;t<16;t++)t%5==0?e.push(1):e.push(0);return e}function di(e,t){for(var n=oi(e),r=oi(t),i=[],a=0;a<4;a++)for(var o=[n[a],n[a+4],n[a+8],n[a+12]],s=0;s<4;s++){var d=4*s,u=[r[d],r[d+1],r[d+2],r[d+3]],l=o[0]*u[0]+o[1]*u[1]+o[2]*u[2]+o[3]*u[3];i[a+d]=l}return i}function ui(e){if("string"==typeof e){var t=e.match(/matrix(3d)?\(([^)]+)\)/);if(t)return oi(t[2].split(", ").map(parseFloat))}return si()}function li(e,t){var n=si();return n[0]=e,n[5]="number"==typeof t?t:e,n}
/*! @license miniraf v1.0.0

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/
var ci,pi=(ci=Date.now(),function(e){var t=Date.now();t-ci>16?(ci=t,e(t)):setTimeout((function(){return pi(e)}),0)}),fi=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||pi,gi={delay:0,distance:"0",duration:600,easing:"cubic-bezier(0.5, 0, 0, 1)",interval:0,opacity:0,origin:"bottom",rotate:{x:0,y:0,z:0},scale:1,cleanup:!1,container:document.documentElement,desktop:!0,mobile:!0,reset:!1,useDelay:"always",viewFactor:0,viewOffset:{top:0,right:0,bottom:0,left:0},afterReset:function(){},afterReveal:function(){},beforeReset:function(){},beforeReveal:function(){}};var vi={success:function(){document.documentElement.classList.add("sr"),document.body?document.body.style.height="100%":document.addEventListener("DOMContentLoaded",(function(){document.body.style.height="100%"}))},failure:function(){return document.documentElement.classList.remove("sr"),{clean:function(){},destroy:function(){},reveal:function(){},sync:function(){},get noop(){return!0}}}};function hi(e){return null!==e&&e instanceof Object&&(e.constructor===Object||"[object Object]"===Object.prototype.toString.call(e))}function yi(e,t){if(hi(e))return Object.keys(e).forEach((function(n){return t(e[n],n,e)}));if(e instanceof Array)return e.forEach((function(n,r){return t(n,r,e)}));throw new TypeError("Expected either an array or object literal.")}function wi(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(this.constructor.debug&&console){var r="%cScrollReveal: "+e;t.forEach((function(e){return r+="\n — "+e})),console.log(r,"color: #ea654b;")}}function mi(){var e=this,t={active:[],stale:[]},n={active:[],stale:[]},r={active:[],stale:[]};try{yi(ai("[data-sr-id]"),(function(e){var n=parseInt(e.getAttribute("data-sr-id"));t.active.push(n)}))}catch(e){throw e}yi(this.store.elements,(function(e){-1===t.active.indexOf(e.id)&&t.stale.push(e.id)})),yi(t.stale,(function(t){return delete e.store.elements[t]})),yi(this.store.elements,(function(e){-1===r.active.indexOf(e.containerId)&&r.active.push(e.containerId),e.hasOwnProperty("sequence")&&-1===n.active.indexOf(e.sequence.id)&&n.active.push(e.sequence.id)})),yi(this.store.containers,(function(e){-1===r.active.indexOf(e.id)&&r.stale.push(e.id)})),yi(r.stale,(function(t){var n=e.store.containers[t].node;n.removeEventListener("scroll",e.delegate),n.removeEventListener("resize",e.delegate),delete e.store.containers[t]})),yi(this.store.sequences,(function(e){-1===n.active.indexOf(e.id)&&n.stale.push(e.id)})),yi(n.stale,(function(t){return delete e.store.sequences[t]}))}var bi=function(){var e={},t=document.documentElement.style;function n(n,r){if(void 0===r&&(r=t),n&&"string"==typeof n){if(e[n])return e[n];if("string"==typeof r[n])return e[n]=n;if("string"==typeof r["-webkit-"+n])return e[n]="-webkit-"+n;throw new RangeError('Unable to find "'+n+'" style property.')}throw new TypeError("Expected a string.")}return n.clearCache=function(){return e={}},n}();function _i(e){var t=window.getComputedStyle(e.node),n=t.position,r=e.config,i={},a=(e.node.getAttribute("style")||"").match(/[\w-]+\s*:\s*[^;]+\s*/gi)||[];i.computed=a?a.map((function(e){return e.trim()})).join("; ")+";":"",i.generated=a.some((function(e){return e.match(/visibility\s?:\s?visible/i)}))?i.computed:a.concat(["visibility: visible"]).map((function(e){return e.trim()})).join("; ")+";";var o,s,d,u=parseFloat(t.opacity),l=isNaN(parseFloat(r.opacity))?parseFloat(t.opacity):parseFloat(r.opacity),c={computed:u!==l?"opacity: "+u+";":"",generated:u!==l?"opacity: "+l+";":""},p=[];if(parseFloat(r.distance)){var f="top"===r.origin||"bottom"===r.origin?"Y":"X",g=r.distance;"top"!==r.origin&&"left"!==r.origin||(g=/^-/.test(g)?g.substr(1):"-"+g);var v=g.match(/(^-?\d+\.?\d?)|(em$|px$|%$)/g),h=v[0];switch(v[1]){case"em":g=parseInt(t.fontSize)*h;break;case"px":g=h;break;case"%":g="Y"===f?e.node.getBoundingClientRect().height*h/100:e.node.getBoundingClientRect().width*h/100;break;default:throw new RangeError("Unrecognized or missing distance unit.")}"Y"===f?p.push(function(e){var t=si();return t[13]=e,t}(g)):p.push(function(e){var t=si();return t[12]=e,t}(g))}r.rotate.x&&p.push((o=r.rotate.x,s=Math.PI/180*o,(d=si())[5]=d[10]=Math.cos(s),d[6]=d[9]=Math.sin(s),d[9]*=-1,d)),r.rotate.y&&p.push(function(e){var t=Math.PI/180*e,n=si();return n[0]=n[10]=Math.cos(t),n[2]=n[8]=Math.sin(t),n[2]*=-1,n}(r.rotate.y)),r.rotate.z&&p.push(function(e){var t=Math.PI/180*e,n=si();return n[0]=n[5]=Math.cos(t),n[1]=n[4]=Math.sin(t),n[4]*=-1,n}(r.rotate.z)),1!==r.scale&&(0===r.scale?p.push(li(2e-4)):p.push(li(r.scale)));var y={};if(p.length){y.property=bi("transform"),y.computed={raw:t[y.property],matrix:ui(t[y.property])},p.unshift(y.computed.matrix);var w=p.reduce(di);y.generated={initial:y.property+": matrix3d("+w.join(", ")+");",final:y.property+": matrix3d("+y.computed.matrix.join(", ")+");"}}else y.generated={initial:"",final:""};var m={};if(c.generated||y.generated.initial){m.property=bi("transition"),m.computed=t[m.property],m.fragments=[];var b=r.delay,_=r.duration,x=r.easing;c.generated&&m.fragments.push({delayed:"opacity "+_/1e3+"s "+x+" "+b/1e3+"s",instant:"opacity "+_/1e3+"s "+x+" 0s"}),y.generated.initial&&m.fragments.push({delayed:y.property+" "+_/1e3+"s "+x+" "+b/1e3+"s",instant:y.property+" "+_/1e3+"s "+x+" 0s"}),m.computed&&!m.computed.match(/all 0s|none 0s/)&&m.fragments.unshift({delayed:m.computed,instant:m.computed});var S=m.fragments.reduce((function(e,t,n){return e.delayed+=0===n?t.delayed:", "+t.delayed,e.instant+=0===n?t.instant:", "+t.instant,e}),{delayed:"",instant:""});m.generated={delayed:m.property+": "+S.delayed+";",instant:m.property+": "+S.instant+";"}}else m.generated={delayed:"",instant:""};return{inline:i,opacity:c,position:n,transform:y,transition:m}}function xi(e,t){t.split(";").forEach((function(t){var n=t.split(":"),r=n[0],i=n.slice(1);r&&i&&(e.style[r.trim()]=i.join(":"))}))}function Si(e){var t,n=this;try{yi(ai(e),(function(e){var r=e.getAttribute("data-sr-id");if(null!==r){t=!0;var i=n.store.elements[r];i.callbackTimer&&window.clearTimeout(i.callbackTimer.clock),xi(i.node,i.styles.inline.generated),e.removeAttribute("data-sr-id"),delete n.store.elements[r]}}))}catch(e){return wi.call(this,"Clean failed.",e.message)}if(t)try{mi.call(this)}catch(e){return wi.call(this,"Clean failed.",e.message)}}function Ci(){var e=this;yi(this.store.elements,(function(e){xi(e.node,e.styles.inline.generated),e.node.removeAttribute("data-sr-id")})),yi(this.store.containers,(function(t){var n=t.node===document.documentElement?window:t.node;n.removeEventListener("scroll",e.delegate),n.removeEventListener("resize",e.delegate)})),this.store={containers:{},elements:{},history:[],sequences:{}}}function ki(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(hi(e))return yi(t,(function(t){yi(t,(function(t,n){hi(t)?(e[n]&&hi(e[n])||(e[n]={}),ki(e[n],t)):e[n]=t}))})),e;throw new TypeError("Target must be an object literal.")}function Oi(e){return void 0===e&&(e=navigator.userAgent),/Android|iPhone|iPad|iPod/i.test(e)}var Ii,ji=(Ii=0,function(){return Ii++});function Ei(){var e=this;mi.call(this),yi(this.store.elements,(function(e){var t=[e.styles.inline.generated];e.visible?(t.push(e.styles.opacity.computed),t.push(e.styles.transform.generated.final),e.revealed=!0):(t.push(e.styles.opacity.generated),t.push(e.styles.transform.generated.initial),e.revealed=!1),xi(e.node,t.filter((function(e){return""!==e})).join(" "))})),yi(this.store.containers,(function(t){var n=t.node===document.documentElement?window:t.node;n.addEventListener("scroll",e.delegate),n.addEventListener("resize",e.delegate)})),this.delegate(),this.initTimeout=null}function Pi(e,t){void 0===t&&(t={});var n=t.pristine||this.pristine,r="always"===e.config.useDelay||"onload"===e.config.useDelay&&n||"once"===e.config.useDelay&&!e.seen,i=e.visible&&!e.revealed,a=!e.visible&&e.revealed&&e.config.reset;return t.reveal||i?Wi.call(this,e,r):t.reset||a?qi.call(this,e):void 0}function Wi(e,t){var n=[e.styles.inline.generated,e.styles.opacity.computed,e.styles.transform.generated.final];t?n.push(e.styles.transition.generated.delayed):n.push(e.styles.transition.generated.instant),e.revealed=e.seen=!0,xi(e.node,n.filter((function(e){return""!==e})).join(" ")),Ri.call(this,e,t)}function qi(e){var t=[e.styles.inline.generated,e.styles.opacity.generated,e.styles.transform.generated.initial,e.styles.transition.generated.instant];e.revealed=!1,xi(e.node,t.filter((function(e){return""!==e})).join(" ")),Ri.call(this,e)}function Ri(e,t){var n=this,r=t?e.config.duration+e.config.delay:e.config.duration,i=e.revealed?e.config.beforeReveal:e.config.beforeReset,a=e.revealed?e.config.afterReveal:e.config.afterReset,o=0;e.callbackTimer&&(o=Date.now()-e.callbackTimer.start,window.clearTimeout(e.callbackTimer.clock)),i(e.node),e.callbackTimer={start:Date.now(),clock:window.setTimeout((function(){a(e.node),e.callbackTimer=null,e.revealed&&!e.config.reset&&e.config.cleanup&&Si.call(n,e.node)}),r-o)}}function $i(e,t){if(void 0===t&&(t=this.pristine),!e.visible&&e.revealed&&e.config.reset)return Pi.call(this,e,{reset:!0});var n=this.store.sequences[e.sequence.id],r=e.sequence.index;if(n){var i=new Ti(n,"visible",this.store),a=new Ti(n,"revealed",this.store);if(n.models={visible:i,revealed:a},!a.body.length){var o=n.members[i.body[0]],s=this.store.elements[o];if(s)return Li.call(this,n,i.body[0],-1,t),Li.call(this,n,i.body[0],1,t),Pi.call(this,s,{reveal:!0,pristine:t})}if(!n.blocked.head&&r===[].concat(a.head).pop()&&r>=[].concat(i.body).shift())return Li.call(this,n,r,-1,t),Pi.call(this,e,{reveal:!0,pristine:t});if(!n.blocked.foot&&r===[].concat(a.foot).shift()&&r<=[].concat(i.body).pop())return Li.call(this,n,r,1,t),Pi.call(this,e,{reveal:!0,pristine:t})}}function Fi(e){var t=Math.abs(e);if(isNaN(t))throw new RangeError("Invalid sequence interval.");this.id=ji(),this.interval=Math.max(t,16),this.members=[],this.models={},this.blocked={head:!1,foot:!1}}function Ti(e,t,n){var r=this;this.head=[],this.body=[],this.foot=[],yi(e.members,(function(e,i){var a=n.elements[e];a&&a[t]&&r.body.push(i)})),this.body.length&&yi(e.members,(function(e,i){var a=n.elements[e];a&&!a[t]&&(i<r.body[0]?r.head.push(i):r.foot.push(i))}))}function Li(e,t,n,r){var i=this,a=["head",null,"foot"][1+n],o=e.members[t+n],s=this.store.elements[o];e.blocked[a]=!0,setTimeout((function(){e.blocked[a]=!1,s&&$i.call(i,s,r)}),e.interval)}function Ai(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=!1);var i,a=[],o=t.interval||gi.interval;try{o&&(i=new Fi(o));var s=ai(e);if(!s.length)throw new Error("Invalid reveal target.");var d=s.reduce((function(e,n){var o={},s=n.getAttribute("data-sr-id");s?(ki(o,r.store.elements[s]),xi(o.node,o.styles.inline.computed)):(o.id=ji(),o.node=n,o.seen=!1,o.revealed=!1,o.visible=!1);var d=ki({},o.config||r.defaults,t);if(!d.mobile&&Oi()||!d.desktop&&!Oi())return s&&Si.call(r,o),e;var u,l=ai(d.container)[0];if(!l)throw new Error("Invalid container.");return l.contains(n)?(u=function(e){var t=[],n=arguments.length-1;for(;n-- >0;)t[n]=arguments[n+1];var r=null;return yi(t,(function(t){yi(t,(function(t){null===r&&t.node===e&&(r=t.id)}))})),r}(l,a,r.store.containers),null===u&&(u=ji(),a.push({id:u,node:l})),o.config=d,o.containerId=u,o.styles=_i(o),i&&(o.sequence={id:i.id,index:i.members.length},i.members.push(o.id)),e.push(o),e):e}),[]);yi(d,(function(e){r.store.elements[e.id]=e,e.node.setAttribute("data-sr-id",e.id)}))}catch(e){return wi.call(this,"Reveal failed.",e.message)}yi(a,(function(e){r.store.containers[e.id]={id:e.id,node:e.node}})),i&&(this.store.sequences[i.id]=i),!0!==n&&(this.store.history.push({target:e,options:t}),this.initTimeout&&window.clearTimeout(this.initTimeout),this.initTimeout=window.setTimeout(Ei.bind(this),0))}function Mi(){var e=this;yi(this.store.history,(function(t){Ai.call(e,t.target,t.options,!0)})),Ei.call(this)}var Di=Math.sign||function(e){return(e>0)-(e<0)||+e};function Vi(e,t){var n=t?e.node.clientHeight:e.node.offsetHeight,r=t?e.node.clientWidth:e.node.offsetWidth,i=0,a=0,o=e.node;do{isNaN(o.offsetTop)||(i+=o.offsetTop),isNaN(o.offsetLeft)||(a+=o.offsetLeft),o=o.offsetParent}while(o);return{bounds:{top:i,right:a+r,bottom:i+n,left:a},height:n,width:r}}function Ni(e){var t,n;return e.node===document.documentElement?(t=window.pageYOffset,n=window.pageXOffset):(t=e.node.scrollTop,n=e.node.scrollLeft),{top:t,left:n}}function Bi(e){void 0===e&&(e={});var t=this.store.containers[e.containerId];if(t){var n=Math.max(0,Math.min(1,e.config.viewFactor)),r=e.config.viewOffset,i=e.geometry.bounds.top+e.geometry.height*n,a=e.geometry.bounds.right-e.geometry.width*n,o=e.geometry.bounds.bottom-e.geometry.height*n,s=e.geometry.bounds.left+e.geometry.width*n,d=t.geometry.bounds.top+t.scroll.top+r.top,u=t.geometry.bounds.right+t.scroll.left-r.right,l=t.geometry.bounds.bottom+t.scroll.top-r.bottom,c=t.geometry.bounds.left+t.scroll.left+r.left;return i<l&&a>c&&o>d&&s<u||"fixed"===e.styles.position}}function Hi(e,t){var n=this;void 0===e&&(e={type:"init"}),void 0===t&&(t=this.store.elements),fi((function(){var r="init"===e.type||"resize"===e.type;yi(n.store.containers,(function(e){r&&(e.geometry=Vi.call(n,e,!0));var t=Ni.call(n,e);e.scroll&&(e.direction={x:Di(t.left-e.scroll.left),y:Di(t.top-e.scroll.top)}),e.scroll=t})),yi(t,(function(e){(r||void 0===e.geometry)&&(e.geometry=Vi.call(n,e)),e.visible=Bi.call(n,e)})),yi(t,(function(e){e.sequence?$i.call(n,e):Pi.call(n,e)})),n.pristine=!1}))}var zi,Ui,Ki,Yi,Ji,Gi,Qi,Xi;function Zi(e){var t;if(void 0===e&&(e={}),void 0===this||Object.getPrototypeOf(this)!==Zi.prototype)return new Zi(e);if(!Zi.isSupported())return wi.call(this,"Instantiation failed.","This browser is not supported."),vi.failure();try{t=ki({},Gi||gi,e)}catch(e){return wi.call(this,"Invalid configuration.",e.message),vi.failure()}try{if(!ai(t.container)[0])throw new Error("Invalid container.")}catch(e){return wi.call(this,e.message),vi.failure()}return!(Gi=t).mobile&&Oi()||!Gi.desktop&&!Oi()?(wi.call(this,"This device is disabled.","desktop: "+Gi.desktop,"mobile: "+Gi.mobile),vi.failure()):(vi.success(),this.store={containers:{},elements:{},history:[],sequences:{}},this.pristine=!0,zi=zi||Hi.bind(this),Ui=Ui||Ci.bind(this),Ki=Ki||Ai.bind(this),Yi=Yi||Si.bind(this),Ji=Ji||Mi.bind(this),Object.defineProperty(this,"delegate",{get:function(){return zi}}),Object.defineProperty(this,"destroy",{get:function(){return Ui}}),Object.defineProperty(this,"reveal",{get:function(){return Ki}}),Object.defineProperty(this,"clean",{get:function(){return Yi}}),Object.defineProperty(this,"sync",{get:function(){return Ji}}),Object.defineProperty(this,"defaults",{get:function(){return Gi}}),Object.defineProperty(this,"version",{get:function(){return"4.0.9"}}),Object.defineProperty(this,"noop",{get:function(){return!1}}),Xi||(Xi=this))}Zi.isSupported=function(){return function(){var e=document.documentElement.style;return"transform"in e||"WebkitTransform"in e}()&&function(){var e=document.documentElement.style;return"transition"in e||"WebkitTransition"in e}()},Object.defineProperty(Zi,"debug",{get:function(){return Qi||!1},set:function(e){return Qi="boolean"==typeof e?e:Qi}}),Zi();var ea,ta={props:{wrapperRef:HTMLDivElement,properties:Object},data:function(){return{initialized:!1}},computed:{watchWrapperPropsChange:function(){return{properties:this.properties,wrapperRef:this.wrapperRef}}},watch:{watchWrapperPropsChange:{handler:function(e){var t=e.properties,n=e.wrapperRef;n&&(Zi().clean(n),Zi(t).reveal(n))},immediate:!0}},unmounted:function(){this.wrapperRef&&Zi().clean(this.wrapperRef)}},na=ta,ra=Ae({render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},undefined,na,undefined,false,undefined,!1,void 0,void 0,void 0),ia=ra,aa={props:{effect:Object,properties:Object,widgetItem:Object},methods:{onChange:function(e,t){this.$emit("onPropertiesChange",o(o({},this.$props.properties),{},f({},e,t)))}}},oa=aa,sa=function(e){e&&e("data-v-250ce009_0",{source:".field-wrapper[data-v-250ce009]{padding:5px 0 15px 0}.field-wrapper.row[data-v-250ce009]{display:flex;flex-direction:row;align-items:center}.field-wrapper>label[data-v-250ce009]{display:block;margin-bottom:3px;font-size:9pt}.field-wrapper.row>label[data-v-250ce009]{margin-right:5px}.field-wrapper select[data-v-250ce009]{padding:5px;border-width:0 0 1px 0}.field-wrapper input[data-v-250ce009]{padding:5px;border-width:0 0 1px 0}.field-row[data-v-250ce009]{display:flex;flex-direction:row}.flex-1[data-v-250ce009]{flex:1}",map:void 0,media:void 0})},da=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"field-wrapper row"},[n("label",{attrs:{for:"origin"}},[e._v("Origin")]),e._v(" "),n("select",{attrs:{id:"origin"},on:{change:function(t){return e.onChange("origin",t.target.value)}}},[n("option",{attrs:{value:"left"},domProps:{selected:"left"===e.properties.origin}},[e._v("\n        left\n      ")]),e._v(" "),n("option",{attrs:{value:"right"},domProps:{selected:"right"===e.properties.origin}},[e._v("\n        right\n      ")]),e._v(" "),n("option",{attrs:{value:"top"},domProps:{selected:"top"===e.properties.origin}},[e._v("top")]),e._v(" "),n("option",{attrs:{value:"bottom"},domProps:{selected:"bottom"===e.properties.origin}},[e._v("\n        bottom\n      ")])])]),e._v(" "),n("div",{staticClass:"field-wrapper"},[n("label",{attrs:{for:"delay"}},[e._v("Delay (ms)")]),e._v(" "),n("input",{attrs:{id:"delay",type:"number"},domProps:{value:e.properties.delay},on:{change:function(t){return e.onChange("delay",parseFloat(t.target.value))}}})]),e._v(" "),n("div",{staticClass:"field-wrapper"},[n("label",{attrs:{for:"duration"}},[e._v("Duration (ms)")]),e._v(" "),n("input",{attrs:{id:"duration",type:"number"},domProps:{value:e.properties.duration},on:{change:function(t){return e.onChange("duration",parseFloat(t.target.value))}}})]),e._v(" "),n("div",{staticClass:"field-wrapper"},[n("label",{attrs:{for:"distance"}},[e._v("Distance")]),e._v(" "),n("div",{staticClass:"field-row"},[n("input",{attrs:{id:"distance",type:"number"},domProps:{value:e.properties.distance.replace(/%|px/,"")},on:{change:function(t){return e.onChange("distance",t.target.value+e.properties.distance.replace(/^\d+/,""))}}}),e._v(" "),n("select",{on:{change:function(t){return e.onChange("distance",e.properties.distance.replace(/%|px/,"")+t.target.value)}}},[n("option",{attrs:{value:"%"},domProps:{selected:/%$/.test(e.properties.distance)}},[e._v("\n          %\n        ")]),e._v(" "),n("option",{attrs:{value:"px"},domProps:{selected:/px$/.test(e.properties.distance)}},[e._v("\n          px\n        ")])])])])])},staticRenderFns:[]},sa,oa,"data-v-250ce009",false,undefined,!1,De,void 0,void 0),ua=da,la=new ni({key:"reveal",name:"Reveal",create:function(e){return{type:this.key,properties:o({delay:100,duration:300,distance:"300px",origin:"left"},e)}},display:ia,form:ua}),ca={anchor:ri,reveal:la},pa=p((function e(t){var n=t.builder,r=t.display,i=t.readOnly,a=t.questionItem,o=void 0===a?Mr:a;l(this,e),f(this,"builder",void 0),f(this,"display",void 0),f(this,"readOnly",void 0),f(this,"questionItem",void 0),f(this,"tags",void 0),this.builder=n,this.display=r,this.readOnly=i,this.tags=[],this.questionItem=o})),fa={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},ga={props:o(o({},fa),{},{properties:{type:Object,required:!0},value:{type:String}}),data:function(){return{options:[]}},watch:f({},"properties.options",{handler:function(){var e=this;this.options=this.properties.options.map((function(t){return{value:t.value,label:e.t(t.labelKey,e.widget.id)}}))},immediate:!0}),computed:{selectedValue:function(){var e=this;return this.options.find((function(t){return t.value===e.value}))}},methods:{onSelectChange:function(e){var t;null===(t=this.onChange)||void 0===t||t.call(this,e)}}},va=ga,ha=function(e){e&&e("data-v-15bad84e_0",{source:".button-group-wrapper[data-v-15bad84e]{display:inline-flex;flex-direction:row;border:1px solid #000;border-radius:8px;overflow:hidden}button[data-v-15bad84e]{border:1px solid transparent;cursor:pointer;background-color:#fff}button[data-v-15bad84e]:not(.isLast){border-right-color:#000}button.selected[data-v-15bad84e]{background-color:#03a9f4;color:#fff}",map:void 0,media:void 0})},ya=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"button-group-wrapper"},e._l(e.options,(function(t,r){return n("button",{key:t.value,class:{isLast:r===e.options.length-1,selected:e.value===t.value},on:{click:function(){return e.onSelectChange(t.value)}}},[e._v("\n    "+e._s(t.label)+"\n  ")])})),0)},staticRenderFns:[]},ha,va,"data-v-15bad84e",false,undefined,!1,De,void 0,void 0),wa=ya,ma={props:{properties:Object,widget:Object,onChange:Function,value:String,setWidgetState:Function,getWidgetState:Function,view:String,errors:Array,t:Function},data:function(){return{translatedLabel:""}},methods:{getLabelByValue:function(e){var t;return this.t((null===(t=this.$props.properties.options.find((function(t){return t.value===e})))||void 0===t?void 0:t.labelKey)||"",this.$props.widget.id)}},watch:{value:{handler:function(e){this.$data.translatedLabel=this.getLabelByValue(e)},immediate:!0}}},ba=ma,_a=Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.translatedLabel)+"\n")])},staticRenderFns:[]},undefined,ba,undefined,false,undefined,!1,void 0,void 0,void 0),xa=_a,Sa=new pa({display:wa,readOnly:xa}),Ca={props:{properties:Object,widget:Object,onChange:Function,value:String,setWidgetState:Function,getWidgetState:Function,view:String,errors:Array,t:Function},methods:{onToggle:function(e){var t,n;null===(t=(n=this.$props).onChange)||void 0===t||t.call(n,e.target.checked)}}},ka=Ca,Oa=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[n("input",{attrs:{type:"checkbox",name:e.widget.id},domProps:{checked:e.value},on:{click:e.onToggle}}),e._v("\n    "+e._s(e.t("__checkboxLabel",e.widget.id))+"\n  ")])])},staticRenderFns:[]},undefined,ka,undefined,false,undefined,!1,void 0,void 0,void 0),Ia=Oa,ja={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},Ea={props:o(o({},ja),{},{properties:Object}),methods:{onToggle:function(e){var t,n;null===(t=(n=this.$props).onChange)||void 0===t||t.call(n,e.target.checked)}}},Pa=Ea,Wa=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[n("input",{attrs:{type:"checkbox",name:e.widget.id},domProps:{checked:e.value},on:{click:e.onToggle}}),e._v("\n    "+e._s(e.t("__checkboxLabel"))+"\n  ")])])},staticRenderFns:[]},undefined,Pa,undefined,false,undefined,!1,void 0,void 0,void 0),qa=Wa,Ra={props:{properties:Object,widget:Object,onChange:Function,value:String,setWidgetState:Function,getWidgetState:Function,view:String,errors:Array,t:Function}},$a=Ra,Fa=Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(!!e.value)+"\n")])},staticRenderFns:[]},undefined,$a,undefined,false,undefined,!1,void 0,void 0,void 0),Ta=Fa,La=new pa({builder:Ia,display:qa,readOnly:Ta}),Aa={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:String},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},Ma={props:o(o({},Aa),{},{value:{type:String}}),created:function(){var e;this.value||null===(e=this.onChange)||void 0===e||e.call(this,this.$data.defaultDate)},data:function(){var e,t,n;return{defaultDate:qn(Rn(null===(e=this.properties)||void 0===e?void 0:e.defaultDate)),minDate:qn(Rn(null===(t=this.properties)||void 0===t?void 0:t.minDate)),maxDate:qn(Rn(null===(n=this.properties)||void 0===n?void 0:n.maxDate))}},methods:{onDateChange:function(e){var t;null===(t=this.onChange)||void 0===t||t.call(this,e.target.value)}}},Da=Ma,Va=function(e){e&&e("data-v-9982ab16_0",{source:".radio-item[data-v-9982ab16]{margin-right:10px}",map:void 0,media:void 0})},Na=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{attrs:{type:"date",min:e.minDate,max:e.maxDate},domProps:{value:e.value||e.defaultDate},on:{change:e.onDateChange}})])},staticRenderFns:[]},Va,Da,"data-v-9982ab16",false,undefined,!1,De,void 0,void 0),Ba=Na,Ha={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},za={props:o({},Ha),computed:{label:function(){var e,t,n=this,r=null===(e=this.widget)||void 0===e?void 0:e.properties.controlProperties.options.find((function(e){return e.value===n.value}));return null!=r&&r.labelKey?this.t(r.labelKey,null===(t=this.widget)||void 0===t?void 0:t.id):""}}},Ua=za,Ka=Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.value)+"\n")])},staticRenderFns:[]},undefined,Ua,undefined,false,undefined,!1,void 0,void 0,void 0),Ya=Ka,Ja=new pa({display:Ba,readOnly:Ya}),Ga={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},Qa={props:o(o({},Ga),{},{widgetItem:Object,properties:Object,value:String}),inject:["pageEventListener","getPageState"],data:function(){return{options:[],attachedDependentCodeListeners:[]}},created:function(){var e,t;!this.value&&null!==(e=this.properties)&&void 0!==e&&e.defaultValue&&(null===(t=this.onChange)||void 0===t||t.call(this,this.properties.defaultValue))},unmounted:function(){var e=this;this.attachedDependentCodeListeners.forEach((function(t){var n,r=x(t,2),i=r[0],a=r[1];null===(n=e.pageEventListener)||void 0===n||n.remove(i,a)}))},watch:f({},"properties.options",{handler:function(){var e=this;return u(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=function e(t){return S(new Set(t.reduce((function(t,n){return n.any?[].concat(S(t),S(e(n.any))):n.all?[].concat(S(t),S(e(n.all))):[].concat(S(t),[n.fact])}),[])))},a=S(new Set((null===(n=e.widget)||void 0===n?void 0:n.properties.controlProperties).options.reduce((function(e,t){var n;return[].concat(S(e),S(null!==(n=t.conditions)&&void 0!==n&&n.length?i(t.conditions):[]))}),[]))),null===(r=e.widget)||void 0===r||r.setListenerSet("options",a.map((function(e){return"".concat(e,"_change")})),(function(){return e.setFilteredOptions()})),e.setFilteredOptions();case 4:case"end":return t.stop()}}),t)})))()},immediate:!0}),computed:{selectedValue:function(){var e=this;return this.$data.options.find((function(t){return t.value===e.value}))}},methods:{setFilteredOptions:function(){var e=this;return u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getFilteredOptions();case 2:e.$data.options=t.sent.map((function(t){return{value:t.value,label:e.t(t.labelKey)}}));case 3:case"end":return t.stop()}}),t)})))()},getFilteredOptions:function(){var e=this;return u(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.keys(e.widgetItems||{}).reduce((function(t,n){var r,i,a=null===(r=e.getPageState())||void 0===r||null===(i=r.widgetState[n])||void 0===i?void 0:i.response;return a&&(t[n]=a,e.widgetItems[n].code&&(t[e.widgetItems[n].code||""]=a)),t}),{}),t.next=3,Promise.all((null===(n=e.widget)||void 0===n?void 0:n.properties.controlProperties).options.map(function(){var t=u(regeneratorRuntime.mark((function t(n){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=!(null!==(i=n.conditions)&&void 0!==i&&i.length),t.t0){t.next=5;break}return t.next=4,null===(a=e.widget)||void 0===a?void 0:a.validator.validate(n.conditions,r);case 4:t.t0=t.sent;case 5:if(!t.t0){t.next=9;break}t.t1=n,t.next=10;break;case 9:t.t1=null;case 10:return t.abrupt("return",t.t1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",t.sent.filter((function(e){return e})));case 4:case"end":return t.stop()}}),t)})))()},onSelectChange:function(e){var t;null===(t=this.onChange)||void 0===t||t.call(this,e.target.value)}}},Xa=Qa,Za=function(e){e&&e("data-v-8ab8e6c2_0",{source:".radio-item[data-v-8ab8e6c2]{margin-right:10px}",map:void 0,media:void 0})},eo=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("select",{domProps:{value:e.value||""},on:{change:e.onSelectChange}},[n("option",{attrs:{value:"",disabled:""}},[e._v(e._s(e.t("__placeholder")))]),e._v(" "),e._l(e.options,(function(t){return n("option",{key:t.value,domProps:{value:t.value,selected:e.value===t.value}},[e._v("\n      "+e._s(t.label)+"\n    ")])}))],2)])},staticRenderFns:[]},Za,Xa,"data-v-8ab8e6c2",false,undefined,!1,De,void 0,void 0),to=eo,no={props:{properties:Object,widget:Object,onChange:Function,value:String,setWidgetState:Function,getWidgetState:Function,view:String,errors:Array,t:Function},data:function(){return{translatedLabel:""}},methods:{getLabelByValue:function(e){var t;return this.t((null===(t=this.$props.properties.options.find((function(t){return t.value===e})))||void 0===t?void 0:t.labelKey)||"",this.$props.widget.id)}},watch:{value:{handler:function(e){this.$data.translatedLabel=this.getLabelByValue(e)},immediate:!0}}},ro=no,io=Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.translatedLabel)+"\n")])},staticRenderFns:[]},undefined,ro,undefined,false,undefined,!1,void 0,void 0,void 0),ao=io,oo=new pa({display:to,readOnly:ao}),so={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},uo={props:o(o({},so),{},{value:Number}),created:function(){var e;void 0===this.value&&void 0!==(null===(e=this.properties)||void 0===e?void 0:e.default)&&this.changeValue(this.properties.default,!0)},computed:{step:function(){var e;return(null===(e=this.properties)||void 0===e?void 0:e.step)||1},numValue:function(){var e,t;return void 0!==this.value?this.value:void 0!==(null===(e=this.properties)||void 0===e?void 0:e.default)?this.properties.default:void 0!==(null===(t=this.properties)||void 0===t?void 0:t.min)?this.properties.min:0}},methods:{changeValue:function(e,t){var n,r,i,a,o;if(!/^[^0-9]+$/.test(e.toString())){var s=parseInt(e.toString(),10);void 0!==(null===(n=this.properties)||void 0===n?void 0:n.min)&&s<(null===(r=this.properties)||void 0===r?void 0:r.min)&&(s=this.properties.min),void 0!==(null===(i=this.properties)||void 0===i?void 0:i.max)&&s>(null===(a=this.properties)||void 0===a?void 0:a.max)&&(s=this.properties.max),null===(o=this.onChange)||void 0===o||o.call(this,s,t)}}}},lo=uo,co=function(e){e&&e("data-v-30f5c940_0",{source:"input[data-v-30f5c940]::-webkit-inner-spin-button,input[data-v-30f5c940]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}",map:void 0,media:void 0})},po=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:function(){return e.changeValue(e.numValue-e.step)}}},[e._v("-")]),e._v(" "),n("input",{attrs:{type:"number",step:e.step},domProps:{value:e.numValue},on:{keyup:function(t){return e.changeValue(t.target.value)}}}),e._v(" "),n("button",{on:{click:function(){return e.changeValue(e.numValue+e.step)}}},[e._v("+")])])},staticRenderFns:[]},co,lo,"data-v-30f5c940",false,undefined,!1,De,void 0,void 0),fo=po,go={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},vo={props:o(o({},go),{},{value:Number})},ho=vo,yo=Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.value||e.widget.properties.controlProperties.default)+"\n")])},staticRenderFns:[]},undefined,ho,undefined,false,undefined,!1,void 0,void 0,void 0),wo=yo,mo=new pa({builder:fo,display:fo,readOnly:wo}),bo={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},_o={props:o(o({},bo),{},{value:String}),methods:{onSelect:function(e){var t;null===(t=this.onChange)||void 0===t||t.call(this,e.target.value)}}},xo=_o,So=function(e){e&&e("data-v-0fd43287_0",{source:".radio-item[data-v-0fd43287]{margin-right:10px}",map:void 0,media:void 0})},Co=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.properties.options,(function(t){return n("label",{key:t.value,staticClass:"radio-item"},[n("input",{attrs:{type:"radio",name:e.widget.id},domProps:{checked:e.value===t.value,value:t.value},on:{change:e.onSelect}}),e._v("\n    "+e._s(e.t(t.labelKey,e.widget.id))+"\n  ")])})),0)},staticRenderFns:[]},So,xo,"data-v-0fd43287",false,undefined,!1,De,void 0,void 0),ko=Co,Oo={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},Io={props:o(o({},Oo),{},{value:String}),computed:{label:function(){var e,t,n=this,r=null===(e=this.widget)||void 0===e?void 0:e.properties.controlProperties.options.find((function(e){return e.value===n.value}));return null!=r&&r.labelKey?this.t(r.labelKey,null===(t=this.widget)||void 0===t?void 0:t.id):""}}},jo=Io,Eo=Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.label)+"\n")])},staticRenderFns:[]},undefined,jo,undefined,false,undefined,!1,void 0,void 0,void 0),Po=Eo,Wo=new pa({builder:ko,display:ko,readOnly:Po}),qo={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},Ro={props:o(o({},qo),{},{value:String}),methods:{onTextChange:function(e){var t;null===(t=this.onChange)||void 0===t||t.call(this,e.target.value)}}},$o=Ro,Fo=function(e){e&&e("data-v-5fb44e31_0",{source:".textInput[data-v-5fb44e31]::-webkit-inner-spin-button,.textInput[data-v-5fb44e31]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.textInput[data-v-5fb44e31]{min-height:42px}",map:void 0,media:void 0})},To=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.properties.multiline?e._e():n("input",{staticClass:"textInput",attrs:{type:"text"},domProps:{value:e.value},on:{input:e.onTextChange}}),e._v(" "),e.properties.multiline?n("textarea",{staticClass:"textInput",domProps:{value:e.value},on:{input:e.onTextChange}}):e._e()])},staticRenderFns:[]},Fo,$o,"data-v-5fb44e31",false,undefined,!1,De,void 0,void 0),Lo=To,Ao={properties:{type:Object,required:!0},widget:{type:Object,required:!0},onChange:Function,value:{type:Boolean,required:!0},t:{type:Function,required:!0},setWidgetState:Function,getWidgetState:Function,view:{type:String,required:!0},errors:{type:Array,required:!1}},Mo={props:o(o({},Ao),{},{value:String})},Do=Mo,Vo=Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.value||e.widget.properties.controlProperties.default)+"\n")])},staticRenderFns:[]},undefined,Do,undefined,false,undefined,!1,void 0,void 0,void 0),No=Vo,Bo=new pa({display:Lo,readOnly:No}),Ho={buttonGroup:Sa,checkbox:La,datePicker:Ja,dropdown:oo,numberPicker:mo,radio:Wo,text:Bo},zo=function(){function e(t){l(this,e),f(this,"_listenerFns",{}),f(this,"_emitEvent",void 0),this._emitEvent=t.emitEvent}return p(e,[{key:"addChangeListener",value:function(e,t){this.add("".concat(e,"_change"),t)}},{key:"add",value:function(e,t){this._listenerFns[e]||(this._listenerFns[e]=[]),this._listenerFns[e].push(t)}},{key:"remove",value:function(e,t){this._listenerFns[e]&&(this._listenerFns[e]=this._listenerFns[e].filter((function(e){return e!==t})))}},{key:"emit",value:function(e,t,n){(this._listenerFns[e]||[]).forEach((function(e){return e()})),null!=n&&n.toExternal&&this._emitEvent(e,t,n.widgetItem)}}]),e}(),Uo={components:{WidgetsLayout:rr},emits:{event:function(e){return!0},onStateChange:function(e){return!0},onPageChange:function(e){return!0}},props:{languages:{type:Object,required:!0},page:{type:Object,required:!0},onPageChange:Function,state:{type:Object,required:!0},widgetControls:Object,questionControls:Object,widgetEffectControls:Object,plugins:Array,view:String,config:Object},data:function(){return{widgetItems:{},pageEventListener:new zo({emitEvent:this.emitEvent})}},computed:{widgetItemsArr:function(){return this.page.widgets},combWidgetControls:function(){var e,t,n;return En.apply(void 0,["widgetControls",null!==(e=this.config)&&void 0!==e&&null!==(t=e.widgetControls)&&void 0!==t&&t.disableInternalControls?{}:ti].concat(S(null===(n=this.plugins||[])||void 0===n?void 0:n.map((function(e){return e.widgetControls}))),[this.widgetControls]))},combWidgetEffectControls:function(){var e,t,n;return En.apply(void 0,["widgetEffectControls",null!==(e=this.config)&&void 0!==e&&null!==(t=e.widgetEffectControls)&&void 0!==t&&t.disableInternalControls?{}:ca].concat(S(null===(n=this.plugins||[])||void 0===n?void 0:n.map((function(e){return e.widgetEffectControls}))),[this.widgetEffectControls]))},combQuestionControls:function(){var e,t,n;return En.apply(void 0,["questionControls",null!==(e=this.config)&&void 0!==e&&null!==(t=e.questionControls)&&void 0!==t&&t.disableInternalControls?{}:Ho].concat(S(null===(n=this.plugins||[])||void 0===n?void 0:n.map((function(e){return e.questionControls}))),[this.questionControls]))},validations:function(){var e,t,n,r;return{rules:o(o({},$n),null===(e=this.config)||void 0===e||null===(t=e.validations)||void 0===t?void 0:t.rules),facts:o({},null===(n=this.config)||void 0===n||null===(r=n.validations)||void 0===r?void 0:r.facts)}},pageState:function(){return this.state}},watch:{languages:{handler:function(){this.pageEventListener.emit("languages_changed",{})}},"page.widgets":{handler:function(e){var t,n,r=this;this.widgetItems=e.reduce((function(e,t){var n,i=(null===(n=r.combWidgetControls[t.type])||void 0===n?void 0:n.widgetItem)||Ln;return e[t.id]=new i({widget:t,pageEventListener:r.pageEventListener,emitEvent:r.emitEvent,t:function(e,n){return r.t([t.id,e],n)},getState:function(){return r.state},setState:function(e){r.$emit("onStateChange",e)},onUpdate:function(e){r._onPageChange(o(o({},r.page),{},{widgets:Object.values(o(o({},r.widgetItems),{},f({},e.id,Object.assign(Object.create(Object.getPrototypeOf(e)),e))))}))},getQuestionControls:function(){return r.combQuestionControls},getConfig:r.getConfig,getWidgetMeta:function(){var e,n;return null===(e=r.getConfig())||void 0===e||null===(n=e.meta)||void 0===n?void 0:n[t.type]},getValidator:r.getValidator}),e}),{}),Object.values(this.widgetItems).forEach((function(e){e.setWidgetItems(r.widgetItems)})),null!==(t=this.config)&&void 0!==t&&null!==(n=t.widgetsToExclude)&&void 0!==n&&n.length&&this.excludeWidgets(this.config.widgetsToExclude)},immediate:!0},"config.widgetsToExclude":{handler:function(){var e,t;null!==(e=this.config)&&void 0!==e&&null!==(t=e.widgetsToExclude)&&void 0!==t&&t.length&&this.excludeWidgets(this.config.widgetsToExclude)},deep:!0}},methods:{_onPageChange:function(e){var t;null===(t=this.onPageChange)||void 0===t||t.call(this,e),this.$emit("onPageChange",e)},t:function(e,t){return Wn(this.languages,e,t)},getConfig:function(){return o(o({},this.config),{},{validations:this.validations})},getValidator:function(){return new Tn(this.validations)},getRuleEngine:function(){return this.getValidator().getRuleEngine()},excludeWidgets:function(e){var t=this,n=Object.values(this.widgetItems).filter((function(t){return e.includes(t.id)||e.includes(t.code||"")})).map((function(e){return e.id}));n.forEach((function(e){delete t.widgetItems[e]})),Object.values(this.widgetItems).forEach((function(e){if("pages"===e.type)for(var t=e.properties.pages,r=t.length-1;r>=0;r--){for(var i=t[r].children,a=i.length-1;a>=0;a--)n.includes(i[a])&&i.splice(a,1);i.length||t.splice(r,1)}}))},emitEvent:function(e,t,n){var r=this;return u(regeneratorRuntime.mark((function i(){var a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!Array.isArray(r.$listeners.event)){i.next=5;break}return i.next=3,Promise.all(r.$listeners.event.map((function(i){return i({name:e,value:t,widget:n,pageState:r.pageState,widgetItems:r.widgetItems})})));case 3:i.next=7;break;case 5:return i.next=7,null===(a=(o=r.$listeners).event)||void 0===a?void 0:a.call(o,{name:e,value:t,widget:n,pageState:r.pageState,widgetItems:r.widgetItems});case 7:case"end":return i.stop()}}),i)})))()},validateAll:function(e){var t=this;return u(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object.values(t.widgetItems).reduce(function(){var t=u(regeneratorRuntime.mark((function t(n,r){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:return i=t.sent,t.next=5,r.runValidations({setDirty:(null==e?void 0:e.setDirty)||!1});case 5:if((a=t.sent)&&!(a||[]).every((function(e){return e.isWarning}))){t.next=8;break}return t.abrupt("return",i);case 8:return i[r.code||r.id]=a,t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Promise.resolve({}));case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})))()}},provide:function(){var e=this;return{getConfig:this.getConfig,getView:function(){return e.view},t:this.t,pageEventListener:this.pageEventListener,languages:this.languages,getPageState:function(){return e.state},setPageState:function(t){e.$emit("onStateChange",t)},emitEvent:this.emitEvent,widgetEffectControls:this.combWidgetEffectControls,widgetControls:this.combWidgetControls,questionControls:this.combQuestionControls,validateAll:this.validateAll,validations:this.validations,getRuleEngine:this.getRuleEngine,getValidator:this.getValidator}},expose:["validateAll"]},Ko=Uo,Yo=function(e){e&&e("data-v-4d51478b_0",{source:".main-wrapper[data-v-4d51478b]{font-family:Arial,Helvetica,sans-serif}",map:void 0,media:void 0})},Jo=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-wrapper"},[n("widgets-layout",{attrs:{widgetControls:e.combWidgetControls,widgetItems:e.widgetItems}})],1)},staticRenderFns:[]},Yo,Ko,"data-v-4d51478b",false,undefined,!1,De,void 0,void 0),Go=Jo,Qo={props:{position:{type:String,default:"left"},isOpen:{type:Boolean,default:!0},paneWidth:{type:Number,default:300}}},Xo=Qo,Zo=function(e){e&&e("data-v-81b41c56_0",{source:".pane-wrapper[data-v-81b41c56]{display:flex;flex-direction:row;align-items:stretch;height:100%;position:relative}.pane-outside-wrapper[data-v-81b41c56]{flex:1;position:relative}.pane-content-wrapper[data-v-81b41c56]{position:absolute;top:0;height:100%;z-index:10;background-color:#fff;box-shadow:0 0 4px -2px #000;overflow:hidden;display:flex;flex-direction:column}.pane-content-wrapper.left[data-v-81b41c56]{left:0}.pane-content-wrapper.right[data-v-81b41c56]{right:0}",map:void 0,media:void 0})},es=Ae({render:function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"pane-wrapper",class:{isOpen:t.isOpen}},["left"===t.position?r("div",{staticClass:"pane-content-wrapper left",style:{width:t.paneWidth+"px"}},[t._t("pane-content")],2):t._e(),t._v(" "),r("div",{staticClass:"pane-outside-wrapper",style:(e={},e["left"===t.position?"marginLeft":"marginRight"]=t.paneWidth+"px",e)},[t._t("default")],2),t._v(" "),"right"===t.position?r("div",{staticClass:"pane-content-wrapper right",style:{width:t.paneWidth+"px"}},[t._t("pane-content")],2):t._e()])},staticRenderFns:[]},Zo,Xo,"data-v-81b41c56",false,undefined,!1,De,void 0,void 0),ts=es,ns=function(){function e(t){var n=t.form,r=t.header,i=t.name,a=t.key;l(this,e),f(this,"_form",void 0),f(this,"_header",void 0),f(this,"_name",void 0),f(this,"_key",void 0),this._form=n,this._header=r,this._name=i,this._key=a}return p(e,[{key:"form",get:function(){return this._form}},{key:"header",get:function(){return this._header}},{key:"name",get:function(){return this._name}},{key:"key",get:function(){return this._key}}]),e}(),rs={components:{BuilderWidgetTree:qr},inject:["widgetControls"],props:{widgetItems:Object,selectedWidgetItem:Object}},is=rs,as=function(e){e&&e("data-v-7f636591_0",{source:".wrapper[data-v-7f636591]{display:flex;flex-direction:row;flex-wrap:wrap;height:auto}.widget-item[data-v-7f636591]{display:block;width:33%;border:1px solid #f2f2f2;border-radius:4px;padding:5px;box-sizing:border-box}",map:void 0,media:void 0})},os=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[e._l(e.widgetControls,(function(t,r){return[n("a",{key:r,staticClass:"widget-item"},[e._v("\n        "+e._s(r)+"\n      ")])]}))],2)},staticRenderFns:[]},as,is,"data-v-7f636591",false,undefined,!1,De,void 0,void 0),ss=os,ds={props:{panelType:String,widgetItems:Object}},us=ds,ls=new ns({key:"addWidget",name:"Add Widget",form:ss,header:Ae({render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},undefined,us,undefined,false,undefined,!1,void 0,void 0,void 0)}),cs=new ns({key:"effects",name:"Effects",form:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.selectedWidgetItem?n("div",{staticClass:"existing-effects-wrapper"},e._l(e.selectedWidgetItem.effects,(function(t){return n("div",{key:t.type,staticClass:"effect-wrapper"},[n("a",{staticClass:"remove-effect-button",on:{click:function(){return e.removeEffect(t)}}},[e._v("🗑")]),e._v(" "),n("h6",{staticClass:"effect-header"},[e._v("\n        "+e._s(e.widgetEffectControls[t.type].name)+"\n      ")]),e._v(" "),n(e.widgetEffectControls[t.type].form,{tag:"component",attrs:{effect:t,properties:t.properties,widgetItem:e.selectedWidgetItem},on:{onPropertiesChange:function(n){return e.onPropertiesChange(t.type,n)}}})],1)})),0):e._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-77374f20_0",{source:".effect-wrapper[data-v-77374f20]{position:relative;background-color:#fdfdfd;padding:0 5px 10px 5px}.effect-wrapper[data-v-77374f20]:not(:last-child){margin-bottom:1px}.remove-effect-button[data-v-77374f20]{position:absolute;top:0;right:0;padding:1px 10px;cursor:pointer;font-size:9pt}.effect-header[data-v-77374f20]{margin:0 -5px 0 -5px;padding:5px;background-color:#bcdff0}",map:void 0,media:void 0})}),{props:{widgetItems:Object,selectedWidgetItem:Object},inject:["widgetEffectControls"],methods:{onPropertiesChange:function(e,t){this.$props.selectedWidgetItem.setEffectProperties(e,t)},removeEffect:function(e){this.$props.selectedWidgetItem.removeEffect(e.type)}}},"data-v-77374f20",false,undefined,!1,De,void 0,void 0),header:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.selectedWidgetItem?n("div",[n("select",{on:{change:e.onAddEffect}},[n("option",{staticClass:"default",attrs:{value:"",disabled:"",selected:""}},[e._v("+")]),e._v(" "),e._l(e.panelSectionsAvailable,(function(t){return n("option",{key:t.key,domProps:{value:t.key}},[e._v("\n      "+e._s(t.name)+"\n    ")])}))],2)]):e._e()},staticRenderFns:[]},(function(e){e&&e("data-v-2421d1ea_0",{source:"select[data-v-2421d1ea]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:1px 6px;border-radius:4px;border:none;background-color:transparent;cursor:pointer}select option.default[data-v-2421d1ea]{text-align:right}",map:void 0,media:void 0})}),{props:{panelType:String,widgetItems:Object,selectedWidgetItem:Object},inject:["widgetEffectControls"],data:function(){return{panelSections:ws}},computed:{panelSectionsAvailable:function(){var e=this;return this.$props.selectedWidgetItem?Object.keys(this.widgetEffectControls).reduce((function(t,n){var r,i,a,o;return(null===(r=e.$props.selectedWidgetItem)||void 0===r||null===(i=r.effects)||void 0===i||!i.length||null!==(a=e.$props.selectedWidgetItem)&&void 0!==a&&null!==(o=a.effects)&&void 0!==o&&o.every((function(e){return e.type!==n})))&&t.push(e.widgetEffectControls[n]),t}),[]):[]}},methods:{onAddEffect:function(e){var t=e.target.value;e.target.value="",this.widgetEffectControls[t]&&this.$props.selectedWidgetItem.addEffect(this.widgetEffectControls[t].create())}}},"data-v-2421d1ea",false,undefined,!1,De,void 0,void 0)}),ps=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.selectedWidgetItem?n("div",e._l(e.selectedWidgetItem.reflexiveRules,(function(t,r){return n("div",{key:r,staticClass:"condition-wrapper"},[n("label",[e._v("condition "+e._s(r+1))]),e._v(" "),n("div",{staticClass:"condition-fields-wrapper"},[n("input",{attrs:{type:"text"},domProps:{value:t.fact}}),e._v(" "),n("select",[n("option",{attrs:{value:"in"},domProps:{selected:"in"===t.operator}},[e._v("in")]),e._v(" "),n("option",{attrs:{value:"equal"},domProps:{selected:"equal"===t.operator}},[e._v("\n          equals\n        ")]),e._v(" "),n("option",{attrs:{value:"notEqual"},domProps:{selected:"notEqual"===t.operator}},[e._v("\n          not equal\n        ")]),e._v(" "),n("option",{attrs:{value:"greaterThanInclusive"},domProps:{selected:"greaterThanInclusive"===t.operator}},[e._v("\n          >=\n        ")]),e._v(" "),n("option",{attrs:{value:"lessThanInclusive"},domProps:{selected:"lessThanInclusive"===t.operator}},[e._v("\n          "+e._s("<=")+"\n        ")])]),e._v(" "),n("input",{attrs:{type:"text"},domProps:{value:e.conditionValue(t.value)}})])])})),0):e._e()},staticRenderFns:[]},(function(e){e&&e("data-v-163cdc56_0",{source:"input[data-v-163cdc56],select[data-v-163cdc56],textarea[data-v-163cdc56]{border-width:0 0 1px 0}.sub-header[data-v-163cdc56]{margin:0;padding:5px;background-color:#bcdff0}.condition-wrapper[data-v-163cdc56]{padding:10px 5px;margin-bottom:10px}.condition-wrapper>label[data-v-163cdc56]{display:block;margin-bottom:5px;font-size:9pt}.condition-fields-wrapper[data-v-163cdc56]{display:flex;flex-direction:row}.condition-fields-wrapper>input[data-v-163cdc56]{width:0}.condition-fields-wrapper>*[data-v-163cdc56]{flex:1}.error-message-wrapper[data-v-163cdc56]{padding:10px 5px}.error-message-wrapper label[data-v-163cdc56]{display:block;font-size:9pt;margin-bottom:5px}.error-message-wrapper textarea[data-v-163cdc56]{box-sizing:border-box;width:100%;max-width:100%;min-width:100%;min-height:40px;color:red}",map:void 0,media:void 0})}),{props:{widgetItems:Object,selectedWidgetItem:Object},inject:["t","widgetEffectControls"],methods:{conditionValue:function(e){return Array.isArray(e)?e.join(", "):null===e?"null":void 0===e?"undefined":e},onPropertiesChange:function(e,t){this.$props.selectedWidgetItem.setEffectProperties(e,t)},removeEffect:function(e){this.$props.selectedWidgetItem.removeEffect(e.type)}}},"data-v-163cdc56",false,undefined,!1,De,void 0,void 0),fs=new ns({key:"reflexives",name:"Reflexives",form:ps,header:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.selectedWidgetItem?n("div",[n("button",{staticClass:"add-button",on:{click:e.addValidation}},[e._v("+")])]):e._e()},staticRenderFns:[]},(function(e){e&&e("data-v-11ce21ca_0",{source:".add-button[data-v-11ce21ca]{background-color:transparent;border:none}",map:void 0,media:void 0})}),{props:{panelType:String,widgetItems:Object,selectedWidgetItem:Object},inject:["widgetEffectControls"],data:function(){return{panelSections:ws}},computed:{panelSectionsAvailable:function(){var e=this;return this.$props.selectedWidgetItem?Object.keys(this.widgetEffectControls).reduce((function(t,n){var r,i,a,o;return(null===(r=e.$props.selectedWidgetItem)||void 0===r||null===(i=r.effects)||void 0===i||!i.length||null!==(a=e.$props.selectedWidgetItem)&&void 0!==a&&null!==(o=a.effects)&&void 0!==o&&o.every((function(e){return e.type!==n})))&&t.push(e.widgetEffectControls[n]),t}),[]):[]}},methods:{addValidation:function(){var e,t=null===(e=this.$props.selectedWidgetItem.validationRules||[])||void 0===e?void 0:e.length;this.$props.selectedWidgetItem.addValidation({conditions:[],error:"err".concat(t)})}}},"data-v-11ce21ca",false,undefined,!1,De,void 0,void 0)}),gs=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.selectedWidgetItem?n("div",e._l(e.selectedWidgetItem.validationRules,(function(t,r){return n("div",{key:r},[n("h6",{staticClass:"sub-header"},[e._v("rule "+e._s(r+1))]),e._v(" "),e._l(t.conditions,(function(t,r){return n("div",{key:r,staticClass:"condition-wrapper"},[n("label",[e._v("condition "+e._s(r+1))]),e._v(" "),n("div",{staticClass:"condition-fields-wrapper"},[n("input",{attrs:{type:"text"},domProps:{value:t.fact}}),e._v(" "),n("select",[n("option",{attrs:{value:"in"},domProps:{selected:"in"===t.operator}},[e._v("\n            in\n          ")]),e._v(" "),n("option",{attrs:{value:"equal"},domProps:{selected:"equal"===t.operator}},[e._v("\n            equals\n          ")]),e._v(" "),n("option",{attrs:{value:"notEqual"},domProps:{selected:"notEqual"===t.operator}},[e._v("\n            not equal\n          ")]),e._v(" "),n("option",{attrs:{value:"greaterThanInclusive"},domProps:{selected:"greaterThanInclusive"===t.operator}},[e._v("\n            >=\n          ")]),e._v(" "),n("option",{attrs:{value:"lessThanInclusive"},domProps:{selected:"lessThanInclusive"===t.operator}},[e._v("\n            "+e._s("<=")+"\n          ")])]),e._v(" "),n("input",{attrs:{type:"text"},domProps:{value:e.conditionValue(t.value)}})])])})),e._v(" "),n("div",{staticClass:"error-message-wrapper"},[n("label",[e._v("(conditions not met) error message")]),e._v(" "),n("textarea",{domProps:{value:e.t(e.selectedWidgetItem.id+"."+t.error)}})])],2)})),0):e._e()},staticRenderFns:[]},(function(e){e&&e("data-v-0544d0aa_0",{source:"input[data-v-0544d0aa],select[data-v-0544d0aa],textarea[data-v-0544d0aa]{border-width:0 0 1px 0}.sub-header[data-v-0544d0aa]{margin:0;padding:5px;background-color:#bcdff0}.condition-wrapper[data-v-0544d0aa]{padding:10px 5px;margin-bottom:10px}.condition-wrapper>label[data-v-0544d0aa]{display:block;margin-bottom:5px;font-size:9pt}.condition-fields-wrapper[data-v-0544d0aa]{display:flex;flex-direction:row}.condition-fields-wrapper>input[data-v-0544d0aa]{width:0}.condition-fields-wrapper>*[data-v-0544d0aa]{flex:1}.error-message-wrapper[data-v-0544d0aa]{padding:10px 5px}.error-message-wrapper label[data-v-0544d0aa]{display:block;font-size:9pt;margin-bottom:5px}.error-message-wrapper textarea[data-v-0544d0aa]{box-sizing:border-box;width:100%;max-width:100%;min-width:100%;min-height:40px;color:red}",map:void 0,media:void 0})}),{props:{widgetItems:Object,selectedWidgetItem:Object},inject:["t","widgetEffectControls"],methods:{conditionValue:function(e){return Array.isArray(e)?e.join(", "):null===e?"null":void 0===e?"undefined":e},onPropertiesChange:function(e,t){this.$props.selectedWidgetItem.setEffectProperties(e,t)},removeEffect:function(e){this.$props.selectedWidgetItem.removeEffect(e.type)}}},"data-v-0544d0aa",false,undefined,!1,De,void 0,void 0),vs=new ns({key:"validations",name:"Validations",form:gs,header:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.selectedWidgetItem?n("div",[n("button",{staticClass:"add-button",on:{click:e.addValidation}},[e._v("+")])]):e._e()},staticRenderFns:[]},(function(e){e&&e("data-v-11ce21ca_0",{source:".add-button[data-v-11ce21ca]{background-color:transparent;border:none}",map:void 0,media:void 0})}),{props:{panelType:String,widgetItems:Object,selectedWidgetItem:Object},inject:["widgetEffectControls"],data:function(){return{panelSections:ws}},computed:{panelSectionsAvailable:function(){var e=this;return this.$props.selectedWidgetItem?Object.keys(this.widgetEffectControls).reduce((function(t,n){var r,i,a,o;return(null===(r=e.$props.selectedWidgetItem)||void 0===r||null===(i=r.effects)||void 0===i||!i.length||null!==(a=e.$props.selectedWidgetItem)&&void 0!==a&&null!==(o=a.effects)&&void 0!==o&&o.every((function(e){return e.type!==n})))&&t.push(e.widgetEffectControls[n]),t}),[]):[]}},methods:{addValidation:function(){var e,t=null===(e=this.$props.selectedWidgetItem.validationRules||[])||void 0===e?void 0:e.length;this.$props.selectedWidgetItem.addValidation({conditions:[],error:"err".concat(t)})}}},"data-v-11ce21ca",false,undefined,!1,De,void 0,void 0)}),hs=new ns({key:"widget",name:"Widget",form:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.selectedWidgetItem?n("div",[e.selectedWidgetItem&&e.widgetControls[e.selectedWidgetItem.type]?n(e.widgetControls[e.selectedWidgetItem.type].builderForm,{tag:"component",attrs:{widget:e.selectedWidgetItem,t:e.selectedWidgetItem.t}}):e._e()],1):e._e()},staticRenderFns:[]},(function(e){e&&e("data-v-1e69f12a_0",{source:"input[data-v-1e69f12a],select[data-v-1e69f12a],textarea[data-v-1e69f12a]{border-width:0 0 1px 0}.sub-header[data-v-1e69f12a]{margin:0;padding:5px;background-color:#bcdff0}.condition-wrapper[data-v-1e69f12a]{padding:10px 5px;margin-bottom:10px}.condition-wrapper>label[data-v-1e69f12a]{display:block;margin-bottom:5px;font-size:9pt}.condition-fields-wrapper[data-v-1e69f12a]{display:flex;flex-direction:row}.condition-fields-wrapper>input[data-v-1e69f12a]{width:0}.condition-fields-wrapper>*[data-v-1e69f12a]{flex:1}.error-message-wrapper[data-v-1e69f12a]{padding:10px 5px}.error-message-wrapper label[data-v-1e69f12a]{display:block;font-size:9pt;margin-bottom:5px}.error-message-wrapper textarea[data-v-1e69f12a]{box-sizing:border-box;width:100%;max-width:100%;min-width:100%;min-height:40px;color:red}",map:void 0,media:void 0})}),{props:{widgetItems:Object,selectedWidgetItem:Object},inject:["widgetControls"],methods:{conditionValue:function(e){return Array.isArray(e)?e.join(", "):null===e?"null":void 0===e?"undefined":e},onPropertiesChange:function(e,t){this.$props.selectedWidgetItem.setEffectProperties(e,t)},removeEffect:function(e){this.$props.selectedWidgetItem.removeEffect(e.type)}}},"data-v-1e69f12a",false,undefined,!1,De,void 0,void 0),header:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.selectedWidgetItem?n("div",[e._v("\n  "+e._s(e.selectedWidgetItem.type)+"\n")]):e._e()},staticRenderFns:[]},(function(e){e&&e("data-v-3e8f789b_0",{source:".add-button[data-v-3e8f789b]{background-color:transparent;border:none}",map:void 0,media:void 0})}),{props:{panelType:String,widgetItems:Object,selectedWidgetItem:Object},inject:["widgetEffectControls"],data:function(){return{panelSections:ws}},computed:{panelSectionsAvailable:function(){var e=this;return this.$props.selectedWidgetItem?Object.keys(this.widgetEffectControls).reduce((function(t,n){var r,i,a,o;return(null===(r=e.$props.selectedWidgetItem)||void 0===r||null===(i=r.effects)||void 0===i||!i.length||null!==(a=e.$props.selectedWidgetItem)&&void 0!==a&&null!==(o=a.effects)&&void 0!==o&&o.every((function(e){return e.type!==n})))&&t.push(e.widgetEffectControls[n]),t}),[]):[]}},methods:{addValidation:function(){var e,t=null===(e=this.$props.selectedWidgetItem.validationRules||[])||void 0===e?void 0:e.length;this.$props.selectedWidgetItem.addValidation({conditions:[],error:"err".concat(t)})}}},"data-v-3e8f789b",false,undefined,!1,De,void 0,void 0)}),ys=new ns({key:"widgetTree",name:"Widget Tree",form:Ae({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("builder-widget-tree",{attrs:{"widget-items":e.widgetItems,"selected-widget-item":e.selectedWidgetItem}})},staticRenderFns:[]},undefined,{components:{BuilderWidgetTree:qr},props:{widgetItems:Object,selectedWidgetItem:Object}},undefined,false,undefined,!1,void 0,void 0,void 0),header:Ae({render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},undefined,{props:{panelType:String,widgetItems:Object}},undefined,false,undefined,!1,void 0,void 0,void 0)}),ws=(f(ea={},ls.key,ls),f(ea,cs.key,cs),f(ea,fs.key,fs),f(ea,vs.key,vs),f(ea,hs.key,hs),f(ea,ys.key,ys),ea),ms=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pane",{attrs:{position:"right",isOpen:!0},scopedSlots:e._u([{key:"pane-content",fn:function(){return[n("builder-panel-section-list-view",{attrs:{sections:["widget","reflexives","validations","effects"],widgetItems:e.widgetItems,selectedWidgetItem:e.selectedWidgetItem}})]},proxy:!0}])},[e._v(" "),[e._t("default")]],2)},staticRenderFns:[]},undefined,{components:{Pane:ts,BuilderPanelSectionListView:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},e._l(e.sections,(function(t){return n("builder-panel-section-view",{key:t,attrs:{panelType:t,selectedWidgetItem:e.selectedWidgetItem,widgetItems:e.widgetItems,isCollapsed:e.collapsed[t]},on:{onToggleCollapse:function(n){return e.onToggleCollapse(t,n)}}})})),1)},staticRenderFns:[]},(function(e){e&&e("data-v-0357272b_0",{source:".wrapper[data-v-0357272b]{position:relative;display:flex;flex-direction:column;flex:1}",map:void 0,media:void 0})}),{components:{BuilderPanelSectionView:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-section-wrapper",class:{isCollapsed:e.isCollapsed}},[n("div",{staticClass:"panel-header"},[n("div",{staticClass:"collapse-arrow",on:{click:e.onToggleCollapse}},[e._v("›")]),e._v(" "),n("h5",{staticClass:"panel-title",on:{click:e.onToggleCollapse}},[e._v("\n        "+e._s(e.panelSections[e.panelType].name)+"\n      ")]),e._v(" "),n(e.panelSections[e.panelType].header,{tag:"component",attrs:{"widget-items":e.widgetItems,"selected-widget-item":e.selectedWidgetItem}})],1),e._v(" "),n("div",{staticClass:"panel-content"},[n(e.panelSections[e.panelType].form,{tag:"component",attrs:{"widget-items":e.widgetItems,"selected-widget-item":e.selectedWidgetItem}})],1)])},staticRenderFns:[]},(function(e){e&&e("data-v-5958104d_0",{source:".panel-header[data-v-5958104d]{padding:5px 5px;background-color:#cbf3f0;color:#3a3a3a;display:flex;flex-direction:row;justify-content:space-between;align-items:center;box-shadow:0 3px 10px #a7a7a73b;z-index:10;position:relative}.panel-title[data-v-5958104d]{margin:0;margin-left:5px;flex:1;cursor:pointer}.panel-section-wrapper[data-v-5958104d]:not(.isCollapsed){flex:1;display:flex;flex-direction:column}.panel-section-wrapper.isCollapsed .panel-content[data-v-5958104d]{display:none}.collapse-arrow[data-v-5958104d]{cursor:pointer}.panel-section-wrapper:not(.isCollapsed) .collapse-arrow[data-v-5958104d]{transform:rotate(90deg)}.panel-section-wrapper:not(.isCollapsed) .panel-content[data-v-5958104d]{overflow:auto;flex:1}",map:void 0,media:void 0})}),{props:{panelType:String,widgetItems:Object,selectedWidgetItem:Object,isCollapsed:Boolean},data:function(){return{panelSections:ws}},methods:{onToggleCollapse:function(){this.$emit("onToggleCollapse",!this.$props.isCollapsed)}}},"data-v-5958104d",false,undefined,!1,De,void 0,void 0)},props:{sections:Array,selectedWidgetItem:Object,widgetItems:Object},data:function(){return{collapsed:{}}},methods:{onToggleCollapse:function(e,t){t?this.$data.collapsed[e]=!0:delete this.$data.collapsed[e],this.$data.collapsed=o({},this.$data.collapsed)}}},"data-v-0357272b",false,undefined,!1,De,void 0,void 0)},props:{widgetItems:Object},inject:["widgetControls","widgetEffectControls","getPageState"],data:function(){return{panelSections:ws}},computed:{selectedWidgetItem:function(){var e,t=this.getPageState();return t.interactiveState.selectedWidgetId?null===(e=this.$props.widgetItems)||void 0===e?void 0:e[t.interactiveState.selectedWidgetId]:null}}},"data-v-1e19a752",false,undefined,!1,void 0,void 0,void 0),bs=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pane",{attrs:{position:"left",isOpen:!0},scopedSlots:e._u([{key:"pane-content",fn:function(){return[n("div",{staticClass:"button-group"},e._l(e.sections,(function(t){return n("button",{key:t,class:{active:t===e.selectedSection},on:{click:function(){return e.setSelectedSection(t)}}},[e._v("\n        "+e._s(e.panelSections[t].name)+"\n      ")])})),0),e._v(" "),n(e.panelSections[e.selectedSection].form,{tag:"component",attrs:{widgetItems:e.widgetItems,selectedWidgetItem:e.selectedWidgetItem}})]},proxy:!0}])},[e._v(" "),[e._t("default")]],2)},staticRenderFns:[]},(function(e){e&&e("data-v-43275984_0",{source:".button-group[data-v-43275984]{display:flex;flex-direction:row;width:100%}.button-group button[data-v-43275984]{flex:1;background-color:#fff;padding:10px 5px;border-width:0 0 4px 0;border-color:transparent;position:relative}.button-group button.active[data-v-43275984]::before{content:'';position:absolute;bottom:0;left:0;width:100%;height:4px;background-color:#cbf3f0}",map:void 0,media:void 0})}),{components:{Pane:ts,BuilderWidgetTree:qr},props:{widgetItems:Object},inject:["getPageState"],data:function(){return{panelSections:ws,sections:["widgetTree","addWidget"],selectedSection:"widgetTree"}},computed:{selectedWidgetItem:function(){var e,t=this.getPageState();return t.interactiveState.selectedWidgetId?null===(e=this.$props.widgetItems)||void 0===e?void 0:e[t.interactiveState.selectedWidgetId]:null}},methods:{setSelectedSection:function(e){this.$data.selectedSection=e}}},"data-v-43275984",false,undefined,!1,De,void 0,void 0),_s={props:{widget:Object,widgetItems:Object},inject:["getPageState","setPageState"],methods:{setSelectWidget:function(e){var t=this.getPageState();t.interactiveState.selectedWidgetId=e.id,this.setPageState(t)}}},xs={data:function(){return{width:"100%",height:"100%"}},computed:{deviceStyles:function(){return{width:this.$data.width,height:this.$data.height}}},methods:{setWidthHeight:function(e){var t=x(e.target.value.split("_"),2),n=t[0],r=t[1];this.$data.width=n,this.$data.height=r}}},Ss={components:{BuilderWidgetsLayout:Kn,BuilderRightPane:ms,BuilderLeftPane:bs,BuilderBottomPane:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bottom-pane-wrapper"},[n("div",{staticClass:"left-pane"}),e._v(" "),n("div",{staticClass:"center"},[n("widget-breadcrumb",{attrs:{widget:e.selectedWidgetItem,widgetItems:e.widgetItems}})],1),e._v(" "),n("div",{staticClass:"right-pane"})])},staticRenderFns:[]},(function(e){e&&e("data-v-7da0862a_0",{source:".bottom-pane-wrapper[data-v-7da0862a]{height:40px;z-index:1000;box-shadow:0 0 4px -2px #000;display:flex;flex-direction:row}.center[data-v-7da0862a]{flex:1}.left-pane[data-v-7da0862a],.right-pane[data-v-7da0862a]{width:300px}",map:void 0,media:void 0})}),{components:{WidgetBreadcrumb:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.widget?n("div",{staticClass:"widget-breadcrumb-wrapper"},[e._l(e.widget.getParents().reverse(),(function(t){return n("div",{key:t.id,staticClass:"widget-breadcrumb-item",on:{click:function(){return e.setSelectWidget(t)}}},[n("p",[e._v(e._s(t.type))]),e._v(" "),t.code?n("small",[e._v("("+e._s(t.code)+")")]):e._e()])})),e._v(" "),n("div",{staticClass:"widget-breadcrumb-item"},[n("p",[e._v(e._s(e.widget.type))]),e._v(" "),e.widget.code?n("small",[e._v("("+e._s(e.widget.code)+")")]):e._e()])],2):e._e()},staticRenderFns:[]},(function(e){e&&e("data-v-34434a74_0",{source:".widget-breadcrumb-wrapper[data-v-34434a74]{display:flex;flex-direction:row;align-items:center}.widget-breadcrumb-item[data-v-34434a74]{position:relative;display:flex;flex-direction:row;padding:5px 10px 5px 20px;margin-top:5px;align-items:center;cursor:pointer}.widget-breadcrumb-item[data-v-34434a74]:not(:first-child)::before{content:'>';position:absolute;top:6px;left:0;font-size:12pt}.widget-breadcrumb-item p[data-v-34434a74]{margin:0}.widget-breadcrumb-item small[data-v-34434a74]{margin-left:5px;color:#a1a1a1}",map:void 0,media:void 0})}),_s,"data-v-34434a74",false,undefined,!1,De,void 0,void 0)},props:{widgetItems:Object},inject:["getPageState"],computed:{selectedWidgetItem:function(){var e,t=this.getPageState();return t.interactiveState.selectedWidgetId?null===(e=this.widgetItems)||void 0===e?void 0:e[t.interactiveState.selectedWidgetId]:null}}},"data-v-7da0862a",false,undefined,!1,De,void 0,void 0),BuilderScreenSimulationView:Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("select",{staticClass:"simulation-device-select",on:{change:e.setWidthHeight}},[n("option",{domProps:{value:"375px_667px",selected:"375px"===e.width&&"667px"===e.height}},[e._v("\n      iPhone SE\n    ")]),e._v(" "),n("option",{domProps:{value:"414px_896px",selected:"414px"===e.width&&"896px"===e.height}},[e._v("\n      iPhone XR\n    ")]),e._v(" "),n("option",{domProps:{value:"390px_844px",selected:"390px"===e.width&&"844px"===e.height}},[e._v("\n      iPhone 12 Pro\n    ")]),e._v(" "),n("option",{domProps:{value:"100%_100%",selected:"100%"===e.width&&"100%"===e.height}},[e._v("\n      Full\n    ")])]),e._v(" "),n("div",{staticClass:"device-wrapper",style:{height:e.deviceStyles.height}},[n("div",{staticClass:"device-background",style:e.deviceStyles}),e._v(" "),n("div",{staticClass:"device-inner-wrapper",style:{width:e.deviceStyles.width}},[e._t("default")],2)])])},staticRenderFns:[]},(function(e){e&&e("data-v-ce061fc0_0",{source:".wrapper[data-v-ce061fc0]{height:100%;overflow:hidden;background-color:#eaedf5;box-sizing:border-box;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center}.device-wrapper[data-v-ce061fc0]{height:100%;width:100%;padding:30px 30px 30px 30px;overflow-y:auto;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;overflow:auto}.device-inner-wrapper[data-v-ce061fc0]{min-height:100px;height:100%;border-radius:8px;position:relative}.device-background[data-v-ce061fc0]{background-color:#fff;border-radius:8px;margin:-30px auto 0 auto;position:absolute}.simulation-device-select[data-v-ce061fc0]{padding:5px 10px;border-radius:4px}",map:void 0,media:void 0})}),xs,"data-v-ce061fc0",false,undefined,!1,De,void 0,void 0)},props:{languages:{type:Object,required:!0},locale:String,page:{type:Object,required:!0},onPageChange:Function,state:{type:Object,required:!0},onStateChange:Function,widgetControls:Object,questionControls:Object,widgetEffectControls:Object,plugins:Array,view:String,config:Object},data:function(){return{widgetItems:{},pageEventListener:new zo({emitEvent:this.emitEvent})}},computed:{widgetItemsArr:function(){return this.page.widgets},combWidgetControls:function(){var e,t,n;return En.apply(void 0,["widgetControls",null!==(e=this.config)&&void 0!==e&&null!==(t=e.widgetControls)&&void 0!==t&&t.disableInternalControls?{}:ti].concat(S(null===(n=this.plugins||[])||void 0===n?void 0:n.map((function(e){return e.widgetControls}))),[this.widgetControls]))},combWidgetEffectControls:function(){var e,t,n;return En.apply(void 0,["widgetEffectControls",null!==(e=this.config)&&void 0!==e&&null!==(t=e.widgetEffectControls)&&void 0!==t&&t.disableInternalControls?{}:ca].concat(S(null===(n=this.plugins||[])||void 0===n?void 0:n.map((function(e){return e.widgetEffectControls}))),[this.widgetEffectControls]))},combQuestionControls:function(){var e,t,n;return En.apply(void 0,["questionControls",null!==(e=this.config)&&void 0!==e&&null!==(t=e.questionControls)&&void 0!==t&&t.disableInternalControls?{}:Ho].concat(S(null===(n=this.plugins||[])||void 0===n?void 0:n.map((function(e){return e.questionControls}))),[this.questionControls]))},validations:function(){var e,t,n,r;return{rules:o(o({},$n),null===(e=this.config)||void 0===e||null===(t=e.validations)||void 0===t?void 0:t.rules),facts:o({},null===(n=this.config)||void 0===n||null===(r=n.validations)||void 0===r?void 0:r.facts)}},pageState:function(){return this.state}},watch:{languages:{handler:function(){this.pageEventListener.emit(Os.LANGUAGE_CHANGED,{})}},"page.widgets":{handler:function(e){var t,n,r=this;this.$data.widgetItems=e.reduce((function(e,t){var n,i=(null===(n=r.combWidgetControls[t.type])||void 0===n?void 0:n.widgetItem)||Ln;return e[t.id]=new i({widget:t,pageEventListener:r.pageEventListener,emitEvent:r.emitEvent,removeWidget:r.removeWidget,t:function(e,n){return r.t([t.id,e],n)},getState:function(){return r.state},setState:function(e){r.$emit("onStateChange",e)},onUpdate:function(e){r._onPageChange(o(o({},r.page),{},{widgets:Object.values(o(o({},r.$data.widgetItems),{},f({},e.id,Object.assign(Object.create(Object.getPrototypeOf(e)),e))))}))},getQuestionControls:function(){return r.combQuestionControls},getConfig:function(){return o(o({},r.getConfig()),{},{validations:r.validations})},getWidgetMeta:function(){var e,n;return null===(e=r.getConfig())||void 0===e||null===(n=e.meta)||void 0===n?void 0:n[t.type]},getValidator:r.getValidator}),e}),{}),Object.values(this.$data.widgetItems).forEach((function(e){e.setWidgetItems(r.$data.widgetItems)})),null!==(t=this.config)&&void 0!==t&&null!==(n=t.widgetsToExclude)&&void 0!==n&&n.length&&this.excludeWidgets(this.config.widgetsToExclude)},immediate:!0,deep:!0},"config.validations.facts":{handler:function(e){var t=new dn.Engine(void 0,{allowUndefinedFacts:!0});null!=e&&e.facts&&Object.keys(null==e?void 0:e.facts).length&&Object.keys(e.facts).forEach((function(n){var r;t.addFact(n,null===(r=e.facts)||void 0===r?void 0:r[n])})),this.ruleEngine=t},deep:!0},"config.widgetsToExclude":{handler:function(){var e,t;null!==(e=this.config)&&void 0!==e&&null!==(t=e.widgetsToExclude)&&void 0!==t&&t.length&&this.excludeWidgets(this.config.widgetsToExclude)},deep:!0}},methods:{_onPageChange:function(e){var t;null===(t=this.onPageChange)||void 0===t||t.call(this,e),this.$emit("onPageChange",e)},t:function(e,t){var n=this,r=Pn(e).reduce((function(e,t,r){return"string"==typeof e?e:r>0?null==e?void 0:e[t]:(null==e?void 0:e[t][n.locale||""].message)||{}}),this.languages);return null==r?void 0:r.replace(/(\{(\w+)\})/g,(function(e,n,r){return(t||{})[r]}))},getConfig:function(){return this.config||{}},getValidator:function(){return new Tn(this.validations)},getRuleEngine:function(){return this.getValidator().getRuleEngine()},excludeWidgets:function(e){var t=this,n=Object.values(this.widgetItems).filter((function(t){return e.includes(t.id)||e.includes(t.code||"")})).map((function(e){return e.id}));n.forEach((function(e){delete t.widgetItems[e]})),Object.values(this.widgetItems).forEach((function(e){if("pages"===e.type){var t=[];e.properties.pages.forEach((function(e,r){e.children.every((function(e){return n.includes(e)}))&&t.push(r)})),t.length&&t.reverse().forEach((function(t){e.properties.pages.splice(t,1)}))}}))},emitEvent:function(e,t,n){var r=this;return u(regeneratorRuntime.mark((function i(){var a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!Array.isArray(r.$listeners.event)){i.next=5;break}return i.next=3,Promise.all(r.$listeners.event.map((function(i){return i({name:e,value:t,widget:n,pageState:r.pageState,widgetItems:r.$data.widgetItems})})));case 3:i.next=7;break;case 5:return i.next=7,null===(a=(o=r.$listeners).event)||void 0===a?void 0:a.call(o,{name:e,value:t,widget:n,pageState:r.pageState,widgetItems:r.$data.widgetItems});case 7:case"end":return i.stop()}}),i)})))()},validateAll:function(e){var t=this;return u(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object.values(t.widgetItems).reduce(function(){var t=u(regeneratorRuntime.mark((function t(n,r){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:return i=t.sent,t.next=5,r.runValidations({setDirty:(null==e?void 0:e.setDirty)||!1});case 5:if(a=t.sent){t.next=8;break}return t.abrupt("return",i);case 8:return i[r.code||r.id]=a,t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Promise.resolve({}));case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})))()},setMessage:function(e){var t=e.id,n=e.locale,r=e.key,i=e.value,a=e.type,s=void 0===a?"pageItem":a,d=o({},this.languages);d[t]||(d[t]={}),d[t][n]||(d[t][n]={id:"",refId:t,type:s,version:1,locale:n,message:{}}),d[t][n].message[r]=i,this.$emit("onLanguageChange",d)},updatePage:function(e){this.$emit("onPageChange",e)},updateWidget:function(e){this.$data.widgetItems[e.id]=e,this.updatePage(o(o({},this.page),{},{widgets:Object.values(this.$data.widgetItems).map((function(e){return e.widget}))}))},removeWidget:function(e){var t=this;this.updatePage(o(o({},this.page),{},{widgets:Object.keys(this.$data.widgetItems).reduce((function(n,r){return r===e?n:[].concat(S(n),[t.$data.widgetItems[r].widget])}),[])}));var n=o({},this.languages);delete n[e],this.$emit("onLanguageChange",n)}},provide:function(){var e=this;return{getConfig:function(){return e.configs},getView:function(){return e.view},t:this.t,pageEventListener:this.pageEventListener,emitEvent:this.emitEvent,getLocale:function(){return e.locale},languages:this.languages,setMessage:this.setMessage,updateWidget:this.updateWidget,removeWidget:this.removeWidget,getPageState:function(){return e.state},setPageState:function(t){e.$emit("onStateChange",t)},widgetEffectControls:this.combWidgetEffectControls,widgetControls:this.combWidgetControls,questionControls:this.combQuestionControls,validateAll:this.validateAll,validations:this.validations,getRuleEngine:this.getRuleEngine}},expose:["validateAll"]},Cs=Ae({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-wrapper"},[n("div",{staticClass:"main-pane-wrapper"},[n("builder-left-pane",{attrs:{widgetItems:e.widgetItems}},[n("builder-right-pane",{attrs:{widgetItems:e.widgetItems}},[n("builder-screen-simulation-view",[n("builder-widgets-layout",{attrs:{widgetControls:e.combWidgetControls,widgetItems:e.widgetItems}})],1)],1)],1)],1),e._v(" "),n("builder-bottom-pane",{attrs:{widgetItems:e.widgetItems}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-ecafe1d2_0",{source:".main-pane-wrapper[data-v-ecafe1d2]{flex:1;overflow:auto}.main-wrapper[data-v-ecafe1d2]{font-family:Arial,Helvetica,sans-serif;position:absolute;height:100%;width:100%;background-color:#fff;display:flex;flex-direction:column}.widgets-layout-wrapper[data-v-ecafe1d2]{padding:30px;background-color:#eaedf5;height:100%;box-sizing:border-box}.widgets-layout-inner-wrapper[data-v-ecafe1d2]{background-color:#fff;position:relative;border-radius:4px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}",map:void 0,media:void 0})}),Ss,"data-v-ecafe1d2",false,undefined,!1,De,void 0,void 0),ks=function(){function e(t){var n=t.widgetState,r=t.interactiveState,i=t.widgetCodeToIdMap,a=t.widgetIdToCodeMap;l(this,e),f(this,"_widgetState",void 0),f(this,"_interactiveState",void 0),f(this,"_widgetCodeToIdMap",void 0),f(this,"_widgetIdToCodeMap",void 0),this._widgetState=n||{},this._interactiveState=r||{},this._widgetCodeToIdMap=i||{},this._widgetIdToCodeMap=a||{}}return p(e,[{key:"interactiveState",get:function(){return this._interactiveState}},{key:"widgetState",get:function(){return this._widgetState}},{key:"widgetCodeToIdMap",get:function(){return this._widgetCodeToIdMap}},{key:"widgetIdToCodeMap",get:function(){return this._widgetIdToCodeMap}},{key:"getWidgetIdByCode",value:function(e){return this._widgetCodeToIdMap[e]}},{key:"getWidgetCodeById",value:function(e){return this._widgetIdToCodeMap[e]}},{key:"onUpdate",value:function(){}},{key:"getWidgetState",value:function(e,t){var n;return t?null===(n=this._widgetState[e])||void 0===n?void 0:n[t]:this._widgetState[e]}},{key:"setWidgetState",value:function(e,t,n){var r;(this._widgetState[e]||(this._widgetState[e]={}),"string"==typeof t)?void 0===n?null===(r=this._widgetState[e])||void 0===r||delete r[t]:this._widgetState[e][t]=n:"object"===s(t)&&(this._widgetState[e]=o(o({},this._widgetState[e]),t))}},{key:"clearWidgetState",value:function(e,t){this.setWidgetState(e,t)}},{key:"registerWidgetCode",value:function(e,t){this._widgetCodeToIdMap[e]=t,this._widgetIdToCodeMap[t]=e,this.setWidgetState(t,"code",e)}},{key:"unregisterWidgetCode",value:function(e){delete this._widgetCodeToIdMap[e]}}],[{key:"from",value:function(t){return new e(t instanceof e?{widgetState:t.widgetState,interactiveState:t.interactiveState,widgetCodeToIdMap:t.widgetCodeToIdMap,widgetIdToCodeMap:t.widgetIdToCodeMap}:{widgetState:t._widgetState,interactiveState:t._interactiveState,widgetCodeToIdMap:t._widgetCodeToIdMap,widgetIdToCodeMap:t._widgetIdToCodeMap})}}]),e}(),Os={LANGUAGE_CHANGED:"language_changed"},Is=Object.freeze({__proto__:null,VuePage:Go,WidgetsLayout:rr,WidgetView:Xn,QuestionControlProps:j,WidgetControlProps:E,VuePageBuilder:Cs,PageState:ks,WidgetItem:Ln,WidgetEffectControl:ni,PagesWidgetItem:ir,QuestionWidgetItem:Dr,widgets:ti,QuestionControl:pa,QuestionItem:Mr,questionControls:Ho,combineValidations:On,splitRootRegex:Cn,stringParser:kn,flatten:In,cachedMerge:En,flattenTranslateKey:Pn,translate:Wn,formatDateString:qn,getDateByPropertyValue:Rn,Event:Os}),js=function(e){Object.entries(Is).forEach((function(t){var n=x(t,2),r=n[0],i=n[1];e.component(r,i)}))},Es=Object.freeze({__proto__:null,default:js,VuePage:Go,WidgetsLayout:rr,WidgetView:Xn,QuestionControlProps:j,WidgetControlProps:E,VuePageBuilder:Cs,PageState:ks,WidgetItem:Ln,WidgetEffectControl:ni,PagesWidgetItem:ir,QuestionWidgetItem:Dr,widgets:ti,QuestionControl:pa,QuestionItem:Mr,questionControls:Ho,combineValidations:On,splitRootRegex:Cn,stringParser:kn,flatten:In,cachedMerge:En,flattenTranslateKey:Pn,translate:Wn,formatDateString:qn,getDateByPropertyValue:Rn,Event:Os});return Object.entries(Es).forEach((function(e){var t=x(e,2),n=t[0],r=t[1];"default"!==n&&(js[n]=r)})),js}(crypto,vm);