var VuePage=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n,r,i,o,a){try{var s=e[o](a),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,d,"next",e)}function d(e){o(a,r,i,s,d,"throw",e)}s(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=v(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},y.apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */()}function w(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x,C=function(e,t){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},C(e,t)};function S(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var O=[],j=function(){function e(e){this.active=!0,this.effects=[],this.cleanups=[],this.vm=e}return e.prototype.run=function(e){if(this.active)try{return this.on(),e()}finally{this.off()}},e.prototype.on=function(){this.active&&(O.push(this),x=this)},e.prototype.off=function(){this.active&&(O.pop(),x=O[O.length-1])},e.prototype.stop=function(){this.active&&(this.vm.$destroy(),this.effects.forEach((function(e){return e.stop()})),this.cleanups.forEach((function(e){return e()})),this.active=!1)},e}();!function(e){function t(t){void 0===t&&(t=!1);var n,r=void 0;return function(e){var t=E;E=!1;try{e()}finally{E=t}}((function(){r=K(W())})),n=e.call(this,r)||this,t||function(e,t){var n;if((t=t||x)&&t.active)return void t.effects.push(e);var r=null===(n=M())||void 0===n?void 0:n.proxy;r&&r.$on("hook:destroyed",(function(){return e.stop()}))}(n),n}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e)}(j);var k=void 0;try{var P=require("vue");P&&R(P)?k=P:P&&"default"in P&&R(P.default)&&(k=P.default)}catch(e){}var I=null,$=null,E=!0,T="__composition_api_installed__";function R(e){return e&&J(e)&&"Vue"===e.name}function W(){return I}function L(e){if(E){var t=$;null==t||t.scope.off(),null==($=e)||$.scope.on()}}function M(){return $}var A=new WeakMap;function F(e){if(A.has(e))return A.get(e);var t={proxy:e,update:e.$forceUpdate,type:e.$options,uid:e._uid,emit:e.$emit.bind(e),parent:null,root:null};!function(e){if(!e.scope){var t=new j(e.proxy);e.scope=t,e.proxy.$on("hook:destroyed",(function(){return t.stop()}))}e.scope}(t);return["data","props","attrs","refs","vnode","slots"].forEach((function(n){q(t,n,{get:function(){return e["$".concat(n)]}})})),q(t,"isMounted",{get:function(){return e._isMounted}}),q(t,"isUnmounted",{get:function(){return e._isDestroyed}}),q(t,"isDeactivated",{get:function(){return e._inactive}}),q(t,"emitted",{get:function(){return e._events}}),A.set(e,t),e.$parent&&(t.parent=F(e.$parent)),e.$root&&(t.root=F(e.$root)),t}function D(e){return"function"==typeof e&&/native code/.test(e.toString())}var N="undefined"!=typeof Symbol&&D(Symbol)&&"undefined"!=typeof Reflect&&D(Reflect.ownKeys),B=function(e){return e};function q(e,t,n){var r=n.get,i=n.set;Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:r||B,set:i||B})}function V(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function H(e,t){return Object.hasOwnProperty.call(e,t)}function U(e){return Array.isArray(e)}function z(e){return null!==e&&"object"==typeof e}function Y(e){return"[object Object]"===function(e){return Object.prototype.toString.call(e)}(e)}function J(e){return"function"==typeof e}function K(e,t){void 0===t&&(t={});var n=e.config.silent;e.config.silent=!0;var r=new e(t);return e.config.silent=n,r}function G(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e.$scopedSlots[t])return e.$scopedSlots[t].apply(e,n)}}var Q="composition-api.refKey",X=new WeakMap,Z=new WeakMap;function ee(e,t,n){var r=W().util;r.warn;var i=r.defineReactive,o=e.__ob__;function a(){o&&z(n)&&!H(n,"__ob__")&&ce(n)}if(U(e)){if(function(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)&&t<=4294967295}(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),a(),n;if("length"===t&&n!==e.length)return e.length=n,null==o||o.dep.notify(),n}return t in e&&!(t in Object.prototype)?(e[t]=n,a(),n):e._isVue||o&&o.vmCount?n:o?(i(o.value,t,n),ue(e,t,n),a(),o.dep.notify(),n):(e[t]=n,n)}var te=function(e){q(this,"value",{get:e.get,set:e.set})};function ne(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new te(e);n&&(r.effect=!0);var i=Object.seal(r);return t&&Z.set(i,!0),i}function re(e){var t;if(ie(e))return e;var n=pe(((t={})[Q]=e,t));return ne({get:function(){return n[Q]},set:function(e){return n[Q]=e}})}function ie(e){return e instanceof te}function oe(e,t){t in e||ee(e,t,void 0);var n=e[t];return ie(n)?n:ne({get:function(){return e[t]},set:function(n){return e[t]=n}})}function ae(e){var t;return Boolean(e&&H(e,"__ob__")&&"object"==typeof e.__ob__&&(null===(t=e.__ob__)||void 0===t?void 0:t.__raw__))}function se(e){var t;return Boolean(e&&H(e,"__ob__")&&"object"==typeof e.__ob__&&!(null===(t=e.__ob__)||void 0===t?void 0:t.__raw__))}function de(e){if(!(!Y(e)||ae(e)||U(e)||ie(e)||(t=e,n=W(),n&&t instanceof n)||X.has(e))){var t,n;X.set(e,!0);for(var r=Object.keys(e),i=0;i<r.length;i++)ue(e,r[i])}}function ue(e,t,n){if("__ob__"!==t&&!ae(e[t])){var r,i,o=Object.getOwnPropertyDescriptor(e,t);if(o){if(!1===o.configurable)return;r=o.get,i=o.set,r&&!i||2!==arguments.length||(n=e[t])}de(n),q(e,t,{get:function(){var i=r?r.call(e):n;return t!==Q&&ie(i)?i.value:i},set:function(o){r&&!i||(t!==Q&&ie(n)&&!ie(o)?n.value=o:i?(i.call(e,o),n=o):n=o,de(o))}})}}function le(e){var t,n=I||k;n.observable?t=n.observable(e):t=K(n,{data:{$$state:e}})._data.$$state;return H(t,"__ob__")||ce(t),t}function ce(e,t){var n,r;if(void 0===t&&(t=new Set),!t.has(e)&&!H(e,"__ob__")&&Object.isExtensible(e)){V(e,"__ob__",function(e){void 0===e&&(e={});return{value:e,dep:{notify:B,depend:B,addSub:B,removeSub:B}}}(e)),t.add(e);try{for(var i=S(Object.keys(e)),o=i.next();!o.done;o=i.next()){var a=e[o.value];(Y(a)||U(a))&&!ae(a)&&Object.isExtensible(a)&&ce(a,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}function pe(e){if(!z(e))return e;if(!Y(e)&&!U(e)||ae(e)||!Object.isExtensible(e))return e;var t=le(e);return de(t),t}var fe={set:function(e,t,n){(e.__composition_api_state__=e.__composition_api_state__||{})[t]=n},get:function(e,t){return(e.__composition_api_state__||{})[t]}};function he(e){var t=fe.get(e,"rawBindings")||{};if(t&&Object.keys(t).length){for(var n=e.$refs,r=fe.get(e,"refs")||[],i=0;i<r.length;i++){var o=t[d=r[i]];!n[d]&&o&&ie(o)&&(o.value=null)}var a=Object.keys(n),s=[];for(i=0;i<a.length;i++){var d;o=t[d=a[i]];n[d]&&o&&ie(o)&&(o.value=n[d],s.push(d))}fe.set(e,"refs",s)}}function ge(e){for(var t=[e._vnode];t.length;){var n=t.pop();if(n.context&&he(n.context),n.children)for(var r=0;r<n.children.length;++r)t.push(n.children[r])}}function ve(e,t){var n,r;if(e){var i=fe.get(e,"attrBindings");if(i||t){if(!i){var o=pe({});i={ctx:t,data:o},fe.set(e,"attrBindings",i),q(t,"attrs",{get:function(){return null==i?void 0:i.data},set:function(){}})}var a=e.$attrs,s=function(t){H(i.data,t)||q(i.data,t,{get:function(){return e.$attrs[t]}})};try{for(var d=S(Object.keys(a)),u=d.next();!u.done;u=d.next()){s(u.value)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}}}function ye(e,t){var n=e.$options._parentVnode;if(n){for(var r=fe.get(e,"slots")||[],i=function(e,t){var n;if(e){if(e._normalized)return e._normalized;for(var r in n={},e)e[r]&&"$"!==r[0]&&(n[r]=!0)}else n={};for(var r in t)r in n||(n[r]=!0);return n}(n.data.scopedSlots,e.$slots),o=0;o<r.length;o++){i[s=r[o]]||delete t[s]}var a=Object.keys(i);for(o=0;o<a.length;o++){var s;t[s=a[o]]||(t[s]=G(e,s))}fe.set(e,"slots",a)}}function be(e,t,n){var r=M();L(e);try{return t(e)}catch(e){if(!n)throw e;n(e)}finally{L(r)}}function we(e){function t(e,n){if(void 0===n&&(n=new Set),!n.has(e)&&Y(e)&&!ie(e)&&!se(e)&&!ae(e)){var r=W().util.defineReactive;Object.keys(e).forEach((function(i){var o=e[i];r(e,i,o),o&&(n.add(o),t(o,n))}))}}function n(e,t){return void 0===t&&(t=new Map),t.has(e)?t.get(e):(t.set(e,!1),U(e)&&se(e)?(t.set(e,!0),!0):!(!Y(e)||ae(e)||ie(e))&&Object.keys(e).some((function(r){return n(e[r],t)})))}e.mixin({beforeCreate:function(){var e=this,r=e.$options,i=r.setup,o=r.render;o&&(r.render=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return be(F(e),(function(){return o.apply(t,n)}))});if(!i)return;if(!J(i))return;var a=r.data;r.data=function(){return function(e,r){void 0===r&&(r={});var i,o=e.$options.setup,a=function(e){var t={slots:{}},n=["emit"];return["root","parent","refs","listeners","isServer","ssrContext"].forEach((function(n){var r="$".concat(n);q(t,n,{get:function(){return e[r]},set:function(){}})})),ve(e,t),n.forEach((function(n){var r="$".concat(n);q(t,n,{get:function(){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e[r].apply(e,t)}}})})),t}(e),s=F(e);if(s.setupContext=a,V(r,"__ob__",function(){return le({}).__ob__}()),ye(e,a.slots),be(s,(function(){i=o(r,a)})),!i)return;if(J(i)){var d=i;return void(e.$options.render=function(){return ye(e,a.slots),be(s,(function(){return d()}))})}if(z(i)){se(i)&&(i=function(e){if(!Y(e))return e;var t={};for(var n in e)t[n]=oe(e,n);return t}(i)),fe.set(e,"rawBindings",i);var u=i;Object.keys(u).forEach((function(r){var i=u[r];if(!ie(i))if(se(i))U(i)&&(i=re(i));else if(J(i)){var o=i;i=i.bind(e),Object.keys(o).forEach((function(e){i[e]=o[e]}))}else z(i)?n(i)&&t(i):i=re(i);!function(e,t,n){var r=e.$options.props;t in e||r&&H(r,t)||(ie(n)?q(e,t,{get:function(){return n.value},set:function(e){n.value=e}}):q(e,t,{get:function(){return se(n)&&n.__ob__.dep.depend(),n},set:function(e){n=e}}))}(e,r,i)}))}}(e,e.$props),J(a)?a.call(e,e):a||{}}},mounted:function(){ge(this)},beforeUpdate:function(){ve(this)},updated:function(){ge(this)}})}function me(e,t){if(!e)return t;if(!t)return e;for(var n,r,i,o=N?Reflect.ownKeys(e):Object.keys(e),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(r=t[n],i=e[n],H(t,n)?r!==i&&Y(r)&&!ie(r)&&Y(i)&&!ie(i)&&me(i,r):t[n]=i);return t}function _e(e){(function(e){return I&&H(e,T)})(e)||(e.config.optionMergeStrategies.setup=function(e,t){return function(n,r){return me(J(e)?e(n,r)||{}:void 0,J(t)?t(n,r)||{}:void 0)}},function(e){I=e,Object.defineProperty(e,T,{configurable:!0,writable:!0,value:!0})}(e),we(e))}var xe={install:function(e){return _e(e)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(xe);var Ce={props:{widget:Object,properties:Object},inject:["t","getLocale","setMessage"],mounted:function(){var e=this;this.$nextTick((function(){e.$refs.titleInput.style.height="",e.$refs.titleInput.style.height=e.$refs.titleInput.scrollHeight+"px",e.$refs.textInput.style.height="",e.$refs.textInput.style.height=e.$refs.textInput.scrollHeight+"px"}))},data:function(){return{isOpen:!0}},methods:{onCloseAlert:function(){var e=this;this.$data.isOpen=!1,setTimeout((function(){return e.$data.isOpen=!0}),1e3)},updateText:function(e,t){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__".concat(e),value:t.replaceAll(/\n|\r/g,"")})}},computed:{alertStyles:function(){var e,t;return"custom"!==(null===(e=this.widget)||void 0===e?void 0:e.properties.type)||null!==(t=this.widget)&&void 0!==t&&t.properties.customColor?{}:i({backgroundColor:this.widget.properties.customBackgroundColor,borderColor:this.widget.properties.customBorderColor||"transparent"},this.widget.properties.customTextColor?{color:this.widget.properties.customTextColor}:{})}}};function Se(e,t,n,r,i,o,a,s,d,u){"boolean"!=typeof a&&(d=s,s=a,a=!1);const l="function"==typeof n?n.options:n;let c;if(e&&e.render&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),r&&(l._scopeId=r),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=c):t&&(c=a?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),c)if(l.functional){const e=l.render;l.render=function(t,n){return c.call(n),e(t,n)}}else{const e=l.beforeCreate;l.beforeCreate=e?[].concat(e,c):[c]}return n}const Oe="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function je(e){return(e,t)=>function(e,t){const n=Oe?t.media||"default":e,r=Pe[n]||(Pe[n]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",t.media&&r.element.setAttribute("media",t.media),void 0===ke&&(ke=document.head||document.getElementsByTagName("head")[0]),ke.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(n),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{const e=r.ids.size-1,t=document.createTextNode(n),i=r.element.childNodes;i[e]&&r.element.removeChild(i[e]),i.length?r.element.insertBefore(t,i[e]):r.element.appendChild(t)}}}(e,t)}let ke;const Pe={};var Ie=Se({render:function(){var e,t=this,n=this,r=n.$createElement,i=n._self._c||r;return n.isOpen?i("div",{staticClass:"alert",class:(e={},e[n.widget.properties.type]=!0,e),style:n.alertStyles},[i("h3",{staticClass:"title"},[i("textarea",{ref:"titleInput",staticClass:"text-input",attrs:{oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},domProps:{value:n.t("__title",n.widget.id)},on:{input:function(e){return n.updateText("title",e.target.value)},load:function(){t.style.height="",t.style.height=t.scrollHeight+"px"}}})]),n._v(" "),i("p",[i("textarea",{ref:"textInput",staticClass:"text-input",attrs:{oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},domProps:{value:n.t("__text",n.widget.id)},on:{input:function(e){return n.updateText("text",e.target.value)},load:function(){t.style.height="",t.style.height=t.scrollHeight+"px"}}})]),n._v(" "),n.widget.properties.showCloseBtn?i("a",{staticClass:"close-button",on:{click:n.onCloseAlert}},[n._v("x")]):n._e()]):n._e()},staticRenderFns:[]},(function(e){e&&e("data-v-cdb552e4_0",{source:".alert[data-v-cdb552e4]{padding:18px 18px;margin:10px 0;border-radius:10px;background-color:#f4f6f8;border:1px solid #e5e9ed;position:relative}.alert.success[data-v-cdb552e4]{background-color:#ebf7ee;border-color:#e2f1e7}.alert.info[data-v-cdb552e4]{background-color:#e6f0f8;border-color:#cad9e7}.alert.danger[data-v-cdb552e4]{background-color:#fdede9;border-color:#f2e1dd}.alert.warning[data-v-cdb552e4]{background-color:#fef8ea;border-color:#f4eada}.alert .title[data-v-cdb552e4]{margin:0 0 10px 0;font-weight:700}.alert>.close-button[data-v-cdb552e4]{position:absolute;top:0;right:0;padding:18px 18px;cursor:pointer;transform:scaleX(1.2)}.text-input[data-v-cdb552e4]{font-size:inherit;font-weight:inherit;font-family:inherit;border:none;outline:0;width:100%;background-color:transparent;resize:none;min-height:10px;margin-bottom:-15px}",map:void 0,media:void 0})}),Ce,"data-v-cdb552e4",false,undefined,!1,je,void 0,void 0),$e={display:Se({render:function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return t.isOpen?r("div",{staticClass:"alert",class:(e={},e[t.widget.properties.type]=!0,e),style:t.alertStyles},[r("h3",{staticClass:"title"},[t._v(t._s(t.t("__title",t.widget.id)))]),t._v(" "),r("p",[t._v(t._s(t.t("__text",t.widget.id)))]),t._v(" "),t.widget.properties.showCloseBtn?r("a",{staticClass:"close-button",on:{click:t.onCloseAlert}},[t._v("x")]):t._e()]):t._e()},staticRenderFns:[]},(function(e){e&&e("data-v-5519b41c_0",{source:".alert[data-v-5519b41c]{padding:18px 18px;margin:10px 0;border-radius:10px;background-color:#f4f6f8;border:1px solid #e5e9ed;position:relative}.alert.success[data-v-5519b41c]{background-color:#ebf7ee;border-color:#e2f1e7}.alert.info[data-v-5519b41c]{background-color:#e6f0f8;border-color:#cad9e7}.alert.danger[data-v-5519b41c]{background-color:#fdede9;border-color:#f2e1dd}.alert.warning[data-v-5519b41c]{background-color:#fef8ea;border-color:#f4eada}.alert .title[data-v-5519b41c]{margin:0 0 10px 0;font-weight:700}.alert>.close-button[data-v-5519b41c]{position:absolute;top:0;right:0;padding:18px 18px;cursor:pointer;transform:scaleX(1.2)}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],data:function(){return{isOpen:!0}},methods:{onCloseAlert:function(){this.$data.isOpen=!1}},computed:{alertStyles:function(){return"custom"!==this.widget.properties.type||this.widget.properties.customColor?{}:i({backgroundColor:this.widget.properties.customBackgroundColor,borderColor:this.widget.properties.customBorderColor||"transparent"},this.widget.properties.customTextColor?{color:this.widget.properties.customTextColor}:{})}}},"data-v-5519b41c",false,undefined,!1,je,void 0,void 0),builder:Ie,readOnly:Se({render:function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return t.isOpen?r("div",{staticClass:"alert",class:(e={},e[t.widget.properties.type]=!0,e),style:t.alertStyles},[r("h3",[t._v(t._s(t.t("__title",t.widget.id)))]),t._v(" "),r("p",[t._v(t._s(t.t("__text",t.widget.id)))]),t._v(" "),t.widget.properties.showCloseBtn?r("a",{staticClass:"close-button",on:{click:t.onCloseAlert}},[t._v("x")]):t._e()]):t._e()},staticRenderFns:[]},(function(e){e&&e("data-v-5ede53fa_0",{source:".alert[data-v-5ede53fa]{padding:10px;margin:10px;border-radius:10px;background-color:#f4f6f8;border:1px solid #e5e9ed;position:relative}.alert.success[data-v-5ede53fa]{background-color:#ebf7ee;border-color:#e2f1e7}.alert.info[data-v-5ede53fa]{background-color:#e6f0f8;border-color:#cad9e7}.alert.danger[data-v-5ede53fa]{background-color:#fdede9;border-color:#f2e1dd}.alert.warning[data-v-5ede53fa]{background-color:#fef8ea;border-color:#f4eada}.alert>.close-button[data-v-5ede53fa]{position:absolute;top:0;right:0;padding:10px 15px;cursor:pointer;transform:scaleX(1.2)}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],data:function(){return{isOpen:!0}},methods:{onCloseAlert:function(){this.$data.isOpen=!1}},computed:{alertStyles:function(){return"custom"!==this.widget.properties.type||this.widget.properties.customColor?{}:i({backgroundColor:this.widget.properties.customBackgroundColor,borderColor:this.widget.properties.customBorderColor||"transparent"},this.widget.properties.customTextColor?{color:this.widget.properties.customTextColor}:{})}}},"data-v-5ede53fa",false,undefined,!1,je,void 0,void 0)},Ee=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.widget.properties.tagType,{tag:"component",staticClass:"header"},[n("input",{staticClass:"header-input",attrs:{type:"text"},domProps:{value:e.t("__label",e.widget.id)},on:{input:e.onTextChange}})])},staticRenderFns:[]},(function(e){e&&e("data-v-345c1574_0",{source:".header-input[data-v-345c1574]{font-size:inherit;font-family:inherit;font-weight:inherit;outline:0;border:none;width:100%;background-color:transparent}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t","getLocale","setMessage"],methods:{onTextChange:function(e){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__label",value:e.target.value})}}},"data-v-345c1574",false,undefined,!1,je,void 0,void 0),Te=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-wrapper"},[n("a",{staticClass:"tag-selection",class:{selected:"h1"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h1")}}},[e._v("H1")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h2"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h2")}}},[e._v("H2")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h3"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h3")}}},[e._v("H3")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h4"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h4")}}},[e._v("H4")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h5"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h5")}}},[e._v("H5")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h6"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h6")}}},[e._v("H6")])])},staticRenderFns:[]},(function(e){e&&e("data-v-5e7bbfc4_0",{source:".control-wrapper[data-v-5e7bbfc4]{display:flex;flex-direction:row;border-radius:8px;border:1px solid #e8e8e8;background-color:#fff;overflow:hidden}.tag-selection[data-v-5e7bbfc4]{height:30px;width:40px;display:flex;align-items:center;justify-content:center;cursor:pointer}.tag-selection[data-v-5e7bbfc4]:hover{background-color:#e8e8e8}.tag-selection.selected[data-v-5e7bbfc4]{background-color:#03a9f4;color:#fff}",map:void 0,media:void 0})}),{props:{widget:Object,widgets:Object,widgetItems:Object,pageState:Object,setWidgetState:Function},inject:["updateWidget"],methods:{setTagType:function(e){this.widget.properties.tagType=e,this.updateWidget(this.widget)}}},"data-v-5e7bbfc4",false,undefined,!1,je,void 0,void 0),Re={display:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"header"},[e._v(e._s(e.t("__label",e.widget.id)))])},staticRenderFns:[]},undefined,{props:{widget:Object},inject:["t"]},"data-v-4e34eb30",false,undefined,!1,void 0,void 0,void 0),builder:Ee,builderControl:Te,readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"header"},[e._v(e._s(e.t("__label",e.widget.id)))])},staticRenderFns:[]},(function(e){e&&e("data-v-19fb5abe_0",{source:".header[data-v-19fb5abe]{padding:0 10px}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"]},"data-v-19fb5abe",false,undefined,!1,je,void 0,void 0)},We=Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"html-wrapper",domProps:{innerHTML:e._s(e.t("__html",e.widget.id))}})},staticRenderFns:[]},undefined,{props:{widget:Object,widgets:Object,widgetItems:Object,pageState:Object,setWidgetState:Function},inject:["t"]},"data-v-0175fea6",false,undefined,!1,void 0,void 0,void 0),Le={display:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"html-wrapper",domProps:{innerHTML:e._s(e.t("__html",e.widget.id))}})},staticRenderFns:[]},undefined,{props:{widget:Object,widgets:Object,widgetItems:Object,pageState:Object,setWidgetState:Function},inject:["t"]},"data-v-1d1b834d",false,undefined,!1,void 0,void 0,void 0),builder:We,readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{domProps:{innerHTML:e._s(e.widget.properties.html)}})},staticRenderFns:[]},undefined,{props:{widget:Object,widgets:Object,widgetItems:Object,pageState:Object,setWidgetState:Function}},undefined,false,undefined,!1,void 0,void 0,void 0)};
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function Me(e){return"[object Object]"===Object.prototype.toString.call(e)}var Ae=Object.prototype,Fe=Ae.toString,De=Ae.hasOwnProperty,Ne=/^\s*function (\w+)/;function Be(e){var t,n=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:e;if(n){var r=n.toString().match(Ne);return r?r[1]:""}return""}var qe=function(e){var t,n;return!1!==Me(e)&&(void 0===(t=e.constructor)||!1!==Me(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))},Ve=function(e){return e},He=function(e,t){return De.call(e,t)},Ue=Array.isArray||function(e){return"[object Array]"===Fe.call(e)},ze=function(e){return"[object Function]"===Fe.call(e)};function Ye(e,t){return Object.defineProperty(e.bind(t),"__original",{value:e})}function Je(e,t,n){var r;void 0===n&&(n=!1);var i=!0,o="",a=function(e){return qe(e)&&He(e,"_vueTypes_name")}(r=qe(e)?e:{type:e})?r._vueTypes_name+" - ":"";if(function(e){return qe(e)&&(He(e,"type")||["_vueTypes_name","validator","default","required"].some((function(t){return He(e,t)})))}(r)&&null!==r.type){if(void 0===r.type||!0===r.type)return i;if(!r.required&&void 0===t)return i;Ue(r.type)?(i=r.type.some((function(e){return!0===Je(e,t,!0)})),o=r.type.map((function(e){return Be(e)})).join(" or ")):i="Array"===(o=Be(r))?Ue(t):"Object"===o?qe(t):"String"===o||"Number"===o||"Boolean"===o||"Function"===o?function(e){if(null==e)return"";var t=e.constructor.toString().match(Ne);return t?t[1]:""}(t)===o:t instanceof r.type}if(!i){var s=a+'value "'+t+'" should be of type "'+o+'"';return!1===n?(Ve(s),!1):s}if(He(r,"validator")&&ze(r.validator)){var d=Ve,u=[];if(Ve=function(e){u.push(e)},i=r.validator(t),Ve=d,!i){var l=(u.length>1?"* ":"")+u.join("\n* ");return u.length=0,!1===n?(Ve(l),i):l}}return i}function Ke(e,t){var n=Object.defineProperties(t,{_vueTypes_name:{value:e,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(e){return void 0===e?(He(this,"default")&&delete this.default,this):ze(e)||!0===Je(this,e,!0)?(this.default=Ue(e)?function(){return[].concat(e)}:qe(e)?function(){return Object.assign({},e)}:e,this):(Ve(this._vueTypes_name+' - invalid default value: "'+e+'"'),this)}}}),r=n.validator;return ze(r)&&(n.validator=Ye(r,n)),n}function Ge(e,t){var n=Ke(e,t);return Object.defineProperty(n,"validate",{value:function(e){return ze(this.validator)&&Ve(this._vueTypes_name+" - calling .validate() will overwrite the current custom validator function. Validator info:\n"+JSON.stringify(this)),this.validator=Ye(e,this),this}})}function Qe(e){return e.replace(/^(?!\s*$)/gm,"  ")}var Xe=function(){return Ge("boolean",{type:Boolean})},Ze=function(){return Ge("string",{type:String})};function et(e){return Ke("arrayOf",{type:Array,validator:function(t){var n="",r=t.every((function(t){return!0===(n=Je(e,t,!0))}));return r||Ve("arrayOf - value validation error:\n"+Qe(n)),r}})}function tt(e){return Ke("instanceOf",{type:e})}function nt(e){var t=Object.keys(e),n=t.filter((function(t){var n;return!(null===(n=e[t])||void 0===n||!n.required)})),r=Ke("shape",{type:Object,validator:function(r){var i=this;if(!qe(r))return!1;var o=Object.keys(r);if(n.length>0&&n.some((function(e){return-1===o.indexOf(e)}))){var a=n.filter((function(e){return-1===o.indexOf(e)}));return Ve(1===a.length?'shape - required property "'+a[0]+'" is not defined.':'shape - required properties "'+a.join('", "')+'" are not defined.'),!1}return o.every((function(n){if(-1===t.indexOf(n))return!0===i._vueTypes_isLoose||(Ve('shape - shape definition does not include a "'+n+'" property. Allowed keys: "'+t.join('", "')+'".'),!1);var o=Je(e[n],r[n],!0);return"string"==typeof o&&Ve('shape - "'+n+'" property validation error:\n '+Qe(o)),!0===o}))}});return Object.defineProperty(r,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(r,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),r}var rt=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"widget-wrapper"},[e.widget.style?n("style",{tag:"component",attrs:{scoped:""}},[e._v("\n    "+e._s(e.widget.style)+"\n  ")]):e._e(),e._v(" "),"builder"===e.view?n("div",{staticClass:"widget-form-control"},[n(e.widgetControls[e.widget.type].builderControl,{tag:"component",attrs:{widget:e.widget,widgetControls:e.widgetControls,widgetItems:e.widgetItems,pageState:e.pageState,setWidgetState:function(t,n){return e.setWidgetState(t,n,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)},view:e.view}})],1):e._e(),e._v(" "),n("div",{ref:"widgetComponentWrapper",staticClass:"widget-component-wrapper"},[e._l(e.widget.effects,(function(t){return n(e.widgetEffectControls[t.type].display,{key:t.type,tag:"component",attrs:{properties:t.properties,wrapperRef:e.$refs.widgetComponentWrapper}})})),e._v(" "),n(e.widgetControls[e.widget.type][e.view||"display"],{tag:"component",attrs:{widget:e.widget,widgetControls:e.widgetControls,widgetItems:e.widgetItems,pageState:e.pageState,setWidgetState:function(t,n){return e.setWidgetState(t,n,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)},view:e.view,wrapperRef:e.$refs.widgetComponentWrapper}})],2)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-196e182f_0",{source:".widget-component-wrapper[data-v-196e182f]{position:relative}.widget-wrapper[data-v-196e182f]{padding:0 10px}",map:void 0,media:void 0})}),{props:{widget:Object,widgetControls:Object,widgetItems:Object,pageState:Object,setWidgetState:Function,getWidgetState:Function,view:String},inject:["widgetEffectControls"]},"data-v-196e182f",false,undefined,!1,je,void 0,void 0),it=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.filteredWidgetItemsArr,(function(t){return n("div",{key:t.id,staticClass:"widget-container"},[n("widget-view",{attrs:{widget:t,widgetControls:e.widgetControls,widgetItems:e.widgetItems,pageState:e.pageState,setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view}})],1)})),0)},staticRenderFns:[]},(function(e){e&&e("data-v-301b8b22_0",{source:".widget-container[data-v-301b8b22]{position:relative}",map:void 0,media:void 0})}),{components:{WidgetView:rt},props:{widgetControls:Object,widgetItems:Object,excludeWidgetIds:et(String),onlyIncludeWidgetIds:et(String),widgetsOrder:et(String),forParent:String},inject:["widgetControls","getPageState","getView","setPageState"],computed:{view:function(){return this.getView()},pageState:function(){return this.getPageState()},widgetItemsArr:function(){return Object.values(this.$props.widgetItems)},filteredWidgetItemsArr:function(){var e=this;return this.widgetItemsArr.filter((function(t){return(!e.forParent&&!t.parentId||t.parentId===e.forParent)&&(!e.$props.onlyIncludeWidgetIds||e.$props.onlyIncludeWidgetIds.includes(t.id))&&(!(e.excludeWidgetIds||[]).length||!e.excludeWidgetIds.includes(t.id))})).sort((function(t,n){return((e.$props.widgetsOrder||[]).includes(t.id)?e.$props.widgetsOrder.indexOf(t.id):t.order||0)-((e.$props.widgetsOrder||[]).includes(n.id)?e.$props.widgetsOrder.indexOf(n.id):n.order||0)}))}},methods:{setWidgetState:function(e,t,n){var r=this.pageState;if(void 0===t){if(!r.widgetState[n.id])return;delete r.widgetState[n.id][e]}else r.widgetState[n.id]||(r.widgetState[n.id]={}),r.widgetState[n.id][e]=t;this.setPageState(r)},getWidgetState:function(e,t){var n;return null===(n=this.pageState.widgetState[t.id])||void 0===n?void 0:n[e]}}},"data-v-301b8b22",false,undefined,!1,je,void 0,void 0);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function ot(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var at=function(e,t){return e.reduce((function(e,n){var r="[object "+n+"]";return t?e[r]=n:e[n]=r,e}),{})},st=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},dt=["Array","Arguments","Object","RegExp","Symbol","Map","Set","Date","Error","Event","Generator","Promise","WeakMap","WeakSet","DocumentFragment","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","ArrayBuffer","DataView","DocumentFragment","Window","String","Number","Boolean","Function","Undefined","GeneratorFunction","BigInt","Null"],ut=at(dt,!1),lt=at(dt,!0),ct=st([ut.Generator,ut.Promise,ut.WeakMap,ut.WeakSet]),pt=st([ut.Map,ut.Set]),ft=st([ut.Date,ut.RegExp]),ht=st(["bigint","boolean","function","number","string","undefined"]),gt=st([ut.Arguments,ut.Array]),vt=st([ut.RegExp,ut.Symbol]),yt=st([ut.Float32Array,ut.Float64Array,ut.Int8Array,ut.Int16Array,ut.Int32Array,ut.Uint8Array,ut.Uint8ClampedArray,ut.Uint16Array,ut.Uint32Array]),bt="undefined"!=typeof Buffer&&"function"==typeof Buffer.from,wt="function"==typeof Uint16Array;function mt(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function _t(e){return Buffer.from(e).toString("utf8")}function xt(e){return""}var Ct=bt?_t:wt?mt:xt,St=/\[object ([HTML|SVG](.*)Element)\]/,Ot=Object.prototype.toString,jt=Object.keys;function kt(e,t){return e>t}function Pt(e,t){return e[0]>t[0]}function It(e,t){for(var n,r,i=0;i<e.length;++i){for(r=e[i],n=i-1;~n&&t(e[n],r);--n)e[n+1]=e[n];e[n+1]=r}return e}function $t(e){for(var t,n=It(jt(e),kt),r={},i=0;i<n.length;++i)r[t=n[i]]=e[t];return r}function Et(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n+1;return 0}function Tt(e,t,n,r){if(!r){var i=typeof e;if(ht[i])return i+"|"+e;if(null===e)return e+"|"+e}var o,a=r||Ot.call(e);return gt[a]?e:a===ut.Object?$t(e):vt[a]?lt[a]+"|"+e.toString():pt[a]?e instanceof Map?function(e,t,n){var r=[];e.forEach((function(e,i){r.push([Rt(i,t,n),Rt(e,t,n)])})),It(r,Pt);for(var i,o=0;o<r.length;++o)i=r[o],r[o]="["+i[0]+","+i[1]+"]";return"Map|["+r.join(",")+"]"}(e,t,n):function(e,t,n){var r=[];return e.forEach((function(e){r.push(Rt(e,t,n))})),It(r,kt),"Set|["+r.join(",")+"]"}(e,t,n):a===ut.Date?lt[a]+"|"+e.getTime():a===ut.Error?lt[a]+"|"+e.stack:a===ut.Event?{bubbles:(o=e).bubbles,cancelBubble:o.cancelBubble,cancelable:o.cancelable,composed:o.composed,currentTarget:o.currentTarget,defaultPrevented:o.defaultPrevented,eventPhase:o.eventPhase,isTrusted:o.isTrusted,returnValue:o.returnValue,target:o.target,type:o.type}:ct[a]?lt[a]+"|NOT_ENUMERABLE":St.test(a)?a.slice(8,-1)+"|"+e.outerHTML:a===ut.DocumentFragment?lt[a]+"|"+function(e){for(var t=e.children,n=[],r=0;r<t.length;++r)n.push(t[r].outerHTML);return n.join(",")}(e):yt[a]?lt[a]+"|"+e.join(","):a===ut.ArrayBuffer?lt[a]+"|"+Ct(e):a===ut.DataView?lt[a]+"|"+Ct(e.buffer):e}function Rt(e,t,n){if(!e||"object"!=typeof e)return Tt(e,t,n);var r=Ot.call(e);return ft[r]?Tt(e,t,n,r):JSON.stringify(e,function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),function(n,r){if("object"==typeof r)if(e.length){var i=Et(e,this);0===i?e.push(this):(e.splice(i),t.splice(i)),t.push(n);var o=Et(e,r);if(0!==o)return"[~"+(t.slice(0,o).join(".")||".")+"]";e.push(r)}else e[0]=r,t[0]=n;return n&&this[n]instanceof Date?Tt(this[n],e,t,ut.Date):Tt(r,e,t)}}(t,n))}function Wt(e){return function(e){for(var t,n=e.length,r=5381,i=52711;n--;)r=33*r^(t=e.charCodeAt(n)),i=33*i^t;return 4096*(r>>>0)+(i>>>0)}(Rt(e))}function Lt(e,t){return Wt(e)===Wt(t)}Lt.all=function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(!Lt(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!1;return!0},Lt.any=function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(Lt(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!0;return!1},Lt.not=function(e,t){return Wt(e)!==Wt(t)},Wt.is=Lt;var Mt=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n=Wt)&&n.__esModule?n:{default:n};var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t;var i={cache:!0};if(void 0===r&&(r=i),"function"!=typeof n?(this.value=n,this.type=this.constructor.CONSTANT):(this.calculationMethod=n,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(r.priority||1,10),this.options=Object.assign({},i,r),this.cacheKeyMethod=this.defaultCacheKeys,this}return r(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(e,t){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(e,t)}},{key:"defaultCacheKeys",value:function(e,t){return{params:t,id:e}}},{key:"getCacheKey",value:function(t){if(!0===this.options.cache){var n=this.cacheKeyMethod(this.id,t);return e.hashFromObject(n)}}}],[{key:"hashFromObject",value:function(e){return(0,i.default)(e)}}]),e}();o.CONSTANT="CONSTANT",o.DYNAMIC="DYNAMIC",t.default=o})),At=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{("undefined"!=typeof process&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||"undefined"!=typeof window&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}catch(e){}}}));var Ft=function(e){return!!e&&"object"==typeof e},Dt=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=o(At),i=o(Ft);function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("Condition: constructor options required");var n=e.booleanOperator(t);if(Object.assign(this,t),n){var r=t[n];if(!Array.isArray(r))throw new Error('"'+n+'" must be an array');this.operator=n,this.priority=parseInt(t.priority,10)||1,this[n]=r.map((function(t){return new e(t)}))}else{if(!Object.prototype.hasOwnProperty.call(t,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(t,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(t,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(t,"priority")&&(t.priority=parseInt(t.priority,10))}}return n(e,[{key:"toJSON",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n={};this.priority&&(n.priority=this.priority);var r=e.booleanOperator(this);return r?n[r]=this[r].map((function(e){return e.toJSON(t)})):(n.operator=this.operator,n.value=this.value,n.fact=this.fact,void 0!==this.factResult&&(n.factResult=this.factResult),void 0!==this.result&&(n.result=this.result),this.params&&(n.params=this.params),this.path&&(n.path=this.path)),t?JSON.stringify(n):n}},{key:"_getValue",value:function(e){var t=this.value;return(0,i.default)(t)&&Object.prototype.hasOwnProperty.call(t,"fact")?e.factValue(t.fact,t.params,t.path):Promise.resolve(t)}},{key:"evaluate",value:function(e,t){var n=this;if(!e)return Promise.reject(new Error("almanac required"));if(!t)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var i=t.get(this.operator);return i?this._getValue(e).then((function(t){return e.factValue(n.fact,n.params,n.path).then((function(e){var o=i.evaluate(e,t);return(0,r.default)("condition::evaluate <"+JSON.stringify(e)+" "+n.operator+" "+JSON.stringify(t)+"?> ("+o+")"),{result:o,leftHandSideValue:e,rightHandSideValue:t,operator:n.operator}}))})):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==e.booleanOperator(this)}}],[{key:"booleanOperator",value:function(e){return Object.prototype.hasOwnProperty.call(e,"any")?"any":Object.prototype.hasOwnProperty.call(e,"all")?"all":void 0}}]),e}();t.default=a})),Nt=ot((function(e){var t=function(){function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=Promise}catch(e){r=function(){}}function i(o,s,d,u,l){"object"==typeof s&&(d=s.depth,u=s.prototype,l=s.includeNonEnumerable,s=s.circular);var c=[],p=[],f="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===d&&(d=1/0),function o(d,h){if(null===d)return null;if(0===h)return d;var g,v;if("object"!=typeof d)return d;if(e(d,t))g=new t;else if(e(d,n))g=new n;else if(e(d,r))g=new r((function(e,t){d.then((function(t){e(o(t,h-1))}),(function(e){t(o(e,h-1))}))}));else if(i.__isArray(d))g=[];else if(i.__isRegExp(d))g=new RegExp(d.source,a(d)),d.lastIndex&&(g.lastIndex=d.lastIndex);else if(i.__isDate(d))g=new Date(d.getTime());else{if(f&&Buffer.isBuffer(d))return g=Buffer.allocUnsafe?Buffer.allocUnsafe(d.length):new Buffer(d.length),d.copy(g),g;e(d,Error)?g=Object.create(d):void 0===u?(v=Object.getPrototypeOf(d),g=Object.create(v)):(g=Object.create(u),v=u)}if(s){var y=c.indexOf(d);if(-1!=y)return p[y];c.push(d),p.push(g)}for(var b in e(d,t)&&d.forEach((function(e,t){var n=o(t,h-1),r=o(e,h-1);g.set(n,r)})),e(d,n)&&d.forEach((function(e){var t=o(e,h-1);g.add(t)})),d){var w;v&&(w=Object.getOwnPropertyDescriptor(v,b)),w&&null==w.set||(g[b]=o(d[b],h-1))}if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(d);for(b=0;b<m.length;b++){var _=m[b];(!(C=Object.getOwnPropertyDescriptor(d,_))||C.enumerable||l)&&(g[_]=o(d[_],h-1),C.enumerable||Object.defineProperty(g,_,{enumerable:!1}))}}if(l){var x=Object.getOwnPropertyNames(d);for(b=0;b<x.length;b++){var C,S=x[b];(C=Object.getOwnPropertyDescriptor(d,S))&&C.enumerable||(g[S]=o(d[S],h-1),Object.defineProperty(g,S,{enumerable:!1}))}}return g}(o,d)}function o(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=a,i}();e.exports&&(e.exports=t)})),Bt=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n=Nt)&&n.__esModule?n:{default:n};var o=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conditions=(0,i.default)(t),this.event=(0,i.default)(n),this.priority=(0,i.default)(r),this.name=(0,i.default)(o),this.result=null}return r(e,[{key:"setResult",value:function(e){this.result=e}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return e?JSON.stringify(t):t}}]),e}();t.default=o})),qt=ot((function(e,t){!function(t){var n=Object.hasOwnProperty,r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i="object"==typeof process&&"function"==typeof process.nextTick,o="function"==typeof Symbol,a="object"==typeof Reflect,s="function"==typeof setImmediate?setImmediate:setTimeout,d=o?a&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function u(){this._events={},this._conf&&l.call(this,this._conf)}function l(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==t&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var p=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function f(e,n){for(var r={},i=e.length,o=n?value.length:0,a=0;a<i;a++)r[e[a]]=a<o?n[a]:t;return r}function h(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var o=e._observers;o?o.push(this):e._observers=[this]}function g(e,r,i,o){var a=Object.assign({},r);if(!e)return a;if("object"!=typeof e)throw TypeError("options must be an object");var s,d,u,l=Object.keys(e),c=l.length;function p(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var f=0;f<c;f++){if(s=l[f],!o&&!n.call(r,s))throw Error('Unknown "'+s+'" option');(d=e[s])!==t&&(u=i[s],a[s]=u?u(d,p):d)}return a}function v(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function y(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var o=typeof e;if(o===r||o===i)return e;n(t)}:function(r,i){for(var o=typeof r,a=n;a-- >0;)if(o===e[a])return r;i(t)}}Object.assign(h.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,o=this._emitter,a=this._listeners,s=function(){var r=p.apply(null,arguments),a={data:r,name:t,original:e};if(n){var s=n.call(i,a);!1!==s&&o.emit.apply(o,[a.name].concat(r))}else o.emit.apply(o,[t].concat(r))};if(a[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===a[e]&&(a[e]=s,r._on.call(i,e,s))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!o.hasListeners(n)&&a[e]&&(a[e]=null,r._off.call(i,e,s))},a[e]=null,o.on("removeListener",this._onRemoveListener)):(a[e]=s,r._on.call(i,e,s))},unsubscribe:function(e){var t,n,r,i=this,o=this._listeners,a=this._emitter,s=this._off,u=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function l(){i._onNewListener&&(a.off("newListener",i._onNewListener),a.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=_.call(a,i);a._observers.splice(e,1)}if(e){if(!(t=o[e]))return;s.call(u,e,t),delete o[e],--this._listenersCount||l()}else{for(r=(n=d(o)).length;r-- >0;)e=n[r],s.call(u,e,o[e]);this._listeners={},this._listenersCount=0,l()}}});var b=y(["function"]),w=y(["object","function"]);function m(e,t,n){var r,i,o,a=0,s=new e((function(d,u,l){function c(){i&&(i=null),a&&(clearTimeout(a),a=0)}n=g(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof l;var p=function(e){c(),d(e)},f=function(e){c(),u(e)};r?t(p,f,l):(i=[function(e){f(e||Error("canceled"))}],t(p,f,(function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),o=!0),n.timeout>0&&(a=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",a=0,s.cancel(e),u(e)}),n.timeout))}));return r||(s.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),s}function _(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function x(e,t,n,r,i){if(!n)return null;if(0===r){var o=typeof t;if("string"===o){var a,s,u=0,l=0,c=this.delimiter,p=c.length;if(-1!==(s=t.indexOf(c))){a=new Array(5);do{a[u++]=t.slice(l,s),l=s+p}while(-1!==(s=t.indexOf(c,l)));a[u++]=t.slice(l),t=a,i=u}else t=[t],i=1}else"object"===o?i=t.length:(t=[t],i=1)}var f,h,g,v,y,b,w,m=null,_=t[r],C=t[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(e&&e.push(n._listeners),m=[n]):(e&&e.push.apply(e,n._listeners),m=[n]));else{if("*"===_){for(s=(b=d(n)).length;s-- >0;)"_listeners"!==(f=b[s])&&(w=x(e,t,n[f],r+1,i))&&(m?m.push.apply(m,w):m=w);return m}if("**"===_){for((y=r+1===i||r+2===i&&"*"===C)&&n._listeners&&(m=x(e,t,n,i,i)),s=(b=d(n)).length;s-- >0;)"_listeners"!==(f=b[s])&&("*"===f||"**"===f?(n[f]._listeners&&!y&&(w=x(e,t,n[f],i,i))&&(m?m.push.apply(m,w):m=w),w=x(e,t,n[f],r,i)):w=x(e,t,n[f],f===C?r+2:r,i),w&&(m?m.push.apply(m,w):m=w));return m}n[_]&&(m=x(e,t,n[_],r+1,i))}if((h=n["*"])&&x(e,t,h,r+1,i),g=n["**"])if(r<i)for(g._listeners&&x(e,t,g,i,i),s=(b=d(g)).length;s-- >0;)"_listeners"!==(f=b[s])&&(f===C?x(e,t,g[f],r+2,i):f===_?x(e,t,g[f],r+1,i):((v={})[f]=g[f],x(e,t,{"**":v},r+1,i)));else g._listeners?x(e,t,g,i,i):g["*"]&&g["*"]._listeners&&x(e,t,g["*"],i,i);return m}function C(e,t,n){var r,i,o=0,a=0,s=this.delimiter,d=s.length;if("string"==typeof e)if(-1!==(r=e.indexOf(s))){i=new Array(5);do{i[o++]=e.slice(a,r),a=r+d}while(-1!==(r=e.indexOf(s,a)));i[o++]=e.slice(a)}else i=[e],o=1;else i=e,o=e.length;if(o>1)for(r=0;r+1<o;r++)if("**"===i[r]&&"**"===i[r+1])return;var u,l=this.listenerTree;for(r=0;r<o;r++)if(l=l[u=i[r]]||(l[u]={}),r===o-1)return l._listeners?("function"==typeof l._listeners&&(l._listeners=[l._listeners]),n?l._listeners.unshift(t):l._listeners.push(t),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,c.call(this,l._listeners.length,u))):l._listeners=t,!0;return!0}function S(e,t,n,r){for(var i,o,a,s,u=d(e),l=u.length,c=e._listeners;l-- >0;)i=e[o=u[l]],a="_listeners"===o?n:n?n.concat(o):[o],s=r||"symbol"==typeof o,c&&t.push(s?a:a.join(this.delimiter)),"object"==typeof i&&S.call(this,i,t,a,s);return t}function O(e){for(var t,n,r,i=d(e),o=i.length;o-- >0;)(t=e[n=i[o]])&&(r=!0,"_listeners"===n||O(t)||delete e[n]);return r}function j(e,t,n){this.emitter=e,this.event=t,this.listener=n}function k(e,n,r){if(!0===r)a=!0;else if(!1===r)o=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var o=r.async,a=r.promisify,d=r.nextTick,u=r.objectify}if(o||d||a){var l=n,c=n._origin||n;if(d&&!i)throw Error("process.nextTick is not supported");a===t&&(a="AsyncFunction"===n.constructor.name),n=function(){var e=arguments,t=this,n=this.event;return a?d?Promise.resolve():new Promise((function(e){s(e)})).then((function(){return t.event=n,l.apply(t,e)})):(d?process.nextTick:s)((function(){t.event=n,l.apply(t,e)}))},n._async=!0,n._origin=c}return[n,u?new j(this,e,n):this]}function P(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,l.call(this,e)}j.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},P.EventEmitter2=P,P.prototype.listenTo=function(e,n,i){if("object"!=typeof e)throw TypeError("target musts be an object");var o=this;function a(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,r=i.reducers,a=_.call(o,e);n=-1===a?new h(o,e,i):o._observers[a];for(var s,u=d(t),l=u.length,c="function"==typeof r,p=0;p<l;p++)s=u[p],n.subscribe(s,t[s]||s,c?r:r&&r[s])}return i=g(i,{on:t,off:t,reducers:t},{on:b,off:b,reducers:w}),r(n)?a(f(n)):a("string"==typeof n?f(n.split(/\s+/)):n),this},P.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,o=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),o=!0);return o},P.prototype.delimiter=".",P.prototype.setMaxListeners=function(e){e!==t&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},P.prototype.getMaxListeners=function(){return this._maxListeners},P.prototype.event="",P.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},P.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},P.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},P.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},P.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},P.prototype._many=function(e,t,n,r,i){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function a(){return 0==--t&&o.off(e,a),n.apply(this,arguments)}return a._origin=n,this._on(e,a,r,i)},P.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,i,a,s=arguments[0],d=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return!1;if(d&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(n=s.length,o)for(r=0;r<n;r++)if("symbol"==typeof s[r]){a=!0;break}a||(s=s.join(this.delimiter))}var l,c=arguments.length;if(this._all&&this._all.length)for(r=0,n=(l=this._all.slice()).length;r<n;r++)switch(this.event=s,c){case 1:l[r].call(this,s);break;case 2:l[r].call(this,s,arguments[1]);break;case 3:l[r].call(this,s,arguments[1],arguments[2]);break;default:l[r].apply(this,arguments)}if(d)l=[],x.call(this,l,e,this.listenerTree,0,n);else{if("function"==typeof(l=this._events[s])){switch(this.event=s,c){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];l.apply(this,t)}return!0}l&&(l=l.slice())}if(l&&l.length){if(c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=l.length;r<n;r++)switch(this.event=s,c){case 1:l[r].call(this);break;case 2:l[r].call(this,arguments[1]);break;case 3:l[r].call(this,arguments[1],arguments[2]);break;default:l[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===s)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},P.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,i,a,s=arguments[0],d=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(d&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(r=s.length,o)for(i=0;i<r;i++)if("symbol"==typeof s[i]){t=!0;break}t||(s=s.join(this.delimiter))}var l,c=[],p=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=s,p){case 1:c.push(this._all[i].call(this,s));break;case 2:c.push(this._all[i].call(this,s,arguments[1]));break;case 3:c.push(this._all[i].call(this,s,arguments[1],arguments[2]));break;default:c.push(this._all[i].apply(this,arguments))}if(d?(l=[],x.call(this,l,e,this.listenerTree,0)):l=this._events[s],"function"==typeof l)switch(this.event=s,p){case 1:c.push(l.call(this));break;case 2:c.push(l.call(this,arguments[1]));break;case 3:c.push(l.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(p-1),a=1;a<p;a++)n[a-1]=arguments[a];c.push(l.apply(this,n))}else if(l&&l.length){if(l=l.slice(),p>3)for(n=new Array(p-1),a=1;a<p;a++)n[a-1]=arguments[a];for(i=0,r=l.length;i<r;i++)switch(this.event=s,p){case 1:c.push(l[i].call(this));break;case 2:c.push(l[i].call(this,arguments[1]));break;case 3:c.push(l[i].call(this,arguments[1],arguments[2]));break;default:c.push(l[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===s)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(c)},P.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},P.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},P.prototype.onAny=function(e){return this._onAny(e,!1)},P.prototype.prependAny=function(e){return this._onAny(e,!0)},P.prototype.addListener=P.prototype.on,P.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},P.prototype._on=function(e,n,r,i){if("function"==typeof e)return this._onAny(e,n),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");this._events||u.call(this);var o,a=this;return i!==t&&(n=(o=k.call(this,e,n,i))[0],a=o[1]),this._newListener&&this.emit("newListener",e,n),this.wildcard?(C.call(this,e,n,r),a):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(n):this._events[e].push(n),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=n,a)},P.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();if(!(i=x.call(this,null,o,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n})}for(var a=0;a<i.length;a++){var s=i[a];if(n=s._listeners,r(n)){for(var d=-1,u=0,l=n.length;u<l;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){d=u;break}if(d<0)continue;return this.wildcard?s._listeners.splice(d,1):this._events[e].splice(d,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&O(this.listenerTree),this},P.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},P.prototype.removeListener=P.prototype.off,P.prototype.removeAllListeners=function(e){if(e===t)return!this._events||u.call(this),this;if(this.wildcard){var n,r=x.call(this,null,e,this.listenerTree,0);if(!r)return this;for(n=0;n<r.length;n++)r[n]._listeners=null;this.listenerTree&&O(this.listenerTree)}else this._events&&(this._events[e]=null);return this},P.prototype.listeners=function(e){var n,r,i,o,a,s=this._events;if(e===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(o=(n=d(s)).length,i=[];o-- >0;)"function"==typeof(r=s[n[o]])?i.push(r):i.push.apply(i,r);return i}if(this.wildcard){if(!(a=this.listenerTree))return[];var u=[],l="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,u,l,a,0),u}return s&&(r=s[e])?"function"==typeof r?[r]:r:[]},P.prototype.eventNames=function(e){var t=this._events;return this.wildcard?S.call(this,this.listenerTree,[],null,e):t?d(t):[]},P.prototype.listenerCount=function(e){return this.listeners(e).length},P.prototype.hasListeners=function(e){if(this.wildcard){var n=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,n,r,this.listenerTree,0),n.length>0}var i=this._events,o=this._all;return!!(o&&o.length||i&&(e===t?d(i).length:i[e]))},P.prototype.listenersAny=function(){return this._all?this._all:[]},P.prototype.waitFor=function(e,n){var r=this,i=typeof n;return"number"===i?n={timeout:n}:"function"===i&&(n={filter:n}),m((n=g(n,{timeout:0,filter:t,handleError:!1,Promise:Promise,overload:!1},{filter:b,Promise:v})).Promise,(function(t,i,o){function a(){var o=n.filter;if(!o||o.apply(r,arguments))if(r.off(e,a),n.handleError){var s=arguments[0];s?i(s):t(p.apply(null,arguments).slice(1))}else t(p.apply(null,arguments))}o((function(){r.off(e,a)})),r._on(e,a,!1)}),{timeout:n.timeout,overload:n.overload})};var I=P.prototype;Object.defineProperties(P,{defaultMaxListeners:{get:function(){return I._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");I._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return m((n=g(n,{Promise:Promise,timeout:0,overload:!1},{Promise:v})).Promise,(function(n,r,i){var o;if("function"==typeof e.addEventListener)return o=function(){n(p.apply(null,arguments))},i((function(){e.removeEventListener(t,o)})),void e.addEventListener(t,o,{once:!0});var a,s=function(){a&&e.removeListener("error",a),n(p.apply(null,arguments))};"error"!==t&&(a=function(n){e.removeListener(t,s),r(n)},e.once("error",a)),i((function(){a&&e.removeListener("error",a),e.removeListener(t,s)})),e.once(t,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(I,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),e.exports=P}()})),Vt=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=a(Dt),i=a(Bt),o=a(At);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));"string"==typeof e&&(e=JSON.parse(e)),e&&e.conditions&&n.setConditions(e.conditions),e&&e.onSuccess&&n.on("success",e.onSuccess),e&&e.onFailure&&n.on("failure",e.onFailure),e&&(e.name||0===e.name)&&n.setName(e.name);var r=e&&e.priority||1;n.setPriority(r);var i=e&&e.event||{type:"unknown"};return n.setEvent(i),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"setPriority",value:function(e){if((e=parseInt(e,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=e,this}},{key:"setName",value:function(e){if(!e&&0!==e)throw new Error('Rule "name" must be defined');return this.name=e,this}},{key:"setConditions",value:function(e){if(!Object.prototype.hasOwnProperty.call(e,"all")&&!Object.prototype.hasOwnProperty.call(e,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new r.default(e),this}},{key:"setEvent",value:function(e){if(!e)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(e,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.ruleEvent={type:e.type},e.params&&(this.ruleEvent.params=e.params),this}},{key:"getEvent",value:function(){return this.ruleEvent}},{key:"getPriority",value:function(){return this.priority}},{key:"getConditions",value:function(){return this.conditions}},{key:"getEngine",value:function(){return this.engine}},{key:"setEngine",value:function(e){return this.engine=e,this}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.ruleEvent,name:this.name};return e?JSON.stringify(t):t}},{key:"prioritizeConditions",value:function(e){var t=this,n=e.reduce((function(e,n){var r=n.priority;if(!r){var i=t.engine.getFact(n.fact);r=i&&i.priority||1}return e[r]||(e[r]=[]),e[r].push(n),e}),{});return Object.keys(n).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(e){return n[e]}))}},{key:"evaluate",value:function(e){var t=this,n=new i.default(this.conditions,this.ruleEvent,this.priority,this.name),r=function(n,r){return Array.isArray(n)||(n=[n]),Promise.all(n.map((function(n){return function(n){if(n.isBooleanOperator()){var r=n[n.operator];return("all"===n.operator?d(r):s(r)).then((function(e){var t=!0===e;return n.result=t,t}))}return n.evaluate(e,t.engine.operators).then((function(e){var t=e.result;return n.factResult=e.leftHandSideValue,n.result=t,t}))}(n)}))).then((function(e){return(0,o.default)("rule::evaluateConditions results",e),r.call(e,(function(e){return!0===e}))}))},a=function(e,n){if(0===e.length)return Promise.resolve(!0);var i=Array.prototype.some;"all"===n&&(i=Array.prototype.every);for(var a=t.prioritizeConditions(e),s=Promise.resolve(),d=function(e){var t=a[e],d=!1;s=s.then((function(e){return"any"===n&&!0===e||d?((0,o.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),d=!0,!0):"all"===n&&!1===e||d?((0,o.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),d=!0,!1):r(t,i)}))},u=0;u<a.length;u++)d(u);return s},s=function(e){return a(e,"any")},d=function(e){return a(e,"all")},u=function(r){n.setResult(r);var i=r?"success":"failure";return t.emitAsync(i,n.event,e,n).then((function(){return n}))};return n.conditions.any?s(n.conditions.any).then((function(e){return u(e)})):d(n.conditions.all).then((function(e){return u(e)}))}}]),t}(a(qt).default);t.default=s})),Ht=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=String(t),!t)throw new Error("Missing operator name");if("function"!=typeof n)throw new Error("Missing operator callback");this.cb=n,this.factValueValidator=r,this.factValueValidator||(this.factValueValidator=function(){return!0})}return n(e,[{key:"evaluate",value:function(e,t){return this.factValueValidator(e)&&this.cb(e,t)}}]),e}();t.default=r})),Ut=ot((function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0}),t.UndefinedFactError=function(e){function t(){var e;n(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return s.code="UNDEFINED_FACT",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}()}));const{hasOwnProperty:zt}=Object.prototype;function Yt(e,t){return(e=e.slice()).push(t),e}function Jt(e,t){return(t=t.slice()).unshift(e),t}class Kt extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}}function Gt(e,t,n,r,i){if(!(this instanceof Gt))try{return new Gt(e,t,n,r,i)}catch(e){if(!e.avoidNew)throw e;return e.value}"string"==typeof e&&(i=r,r=n,n=t,t=e,e=null);const o=e&&"object"==typeof e;if(e=e||{},this.json=e.json||n,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=!zt.call(e,"wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||r||null,this.otherTypeCallback=e.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==e.autostart){const r={path:o?e.path:t};o?"json"in e&&(r.json=e.json):r.json=n;const i=this.evaluate(r);if(!i||"object"!=typeof i)throw new Kt(i);return i}}Gt.prototype.evaluate=function(e,t,n,r){let i=this.parent,o=this.parentProperty,{flatten:a,wrap:s}=this;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=r||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"==typeof e&&!Array.isArray(e)){if(!e.path&&""!==e.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!zt.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:t}=e),a=zt.call(e,"flatten")?e.flatten:a,this.currResultType=zt.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=zt.call(e,"sandbox")?e.sandbox:this.currSandbox,s=zt.call(e,"wrap")?e.wrap:s,this.currPreventEval=zt.call(e,"preventEval")?e.preventEval:this.currPreventEval,n=zt.call(e,"callback")?e.callback:n,this.currOtherTypeCallback=zt.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,i=zt.call(e,"parent")?e.parent:i,o=zt.call(e,"parentProperty")?e.parentProperty:o,e=e.path}if(i=i||null,o=o||null,Array.isArray(e)&&(e=Gt.toPathString(e)),!e&&""!==e||!t)return;const d=Gt.toPathArray(e);"$"===d[0]&&d.length>1&&d.shift(),this._hasParentSelector=null;const u=this._trace(d,t,["$"],i,o,n).filter((function(e){return e&&!e.isParentSelector}));return u.length?s||1!==u.length||u[0].hasArrExpr?u.reduce(((e,t)=>{const n=this._getPreferredOutput(t);return a&&Array.isArray(n)?e=e.concat(n):e.push(n),e}),[]):this._getPreferredOutput(u[0]):s?[]:void 0},Gt.prototype._getPreferredOutput=function(e){const t=this.currResultType;switch(t){case"all":{const t=Array.isArray(e.path)?e.path:Gt.toPathArray(e.path);return e.pointer=Gt.toPointer(t),e.path="string"==typeof e.path?e.path:Gt.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return Gt.toPathString(e[t]);case"pointer":return Gt.toPointer(e.path);default:throw new TypeError("Unknown result type")}},Gt.prototype._handleCallback=function(e,t,n){if(t){const r=this._getPreferredOutput(e);e.path="string"==typeof e.path?e.path:Gt.toPathString(e.path),t(r,n,e)}},Gt.prototype._trace=function(e,t,n,r,i,o,a,s){let d;if(!e.length)return d={path:n,value:t,parent:r,parentProperty:i,hasArrExpr:a},this._handleCallback(d,o,"value"),d;const u=e[0],l=e.slice(1),c=[];function p(e){Array.isArray(e)?e.forEach((e=>{c.push(e)})):c.push(e)}if(("string"!=typeof u||s)&&t&&zt.call(t,u))p(this._trace(l,t[u],Yt(n,u),t,u,o,a));else if("*"===u)this._walk(u,l,t,n,r,i,o,((e,t,n,r,i,o,a,s)=>{p(this._trace(Jt(e,n),r,i,o,a,s,!0,!0))}));else if(".."===u)p(this._trace(l,t,n,r,i,o,a)),this._walk(u,l,t,n,r,i,o,((e,t,n,r,i,o,a,s)=>{"object"==typeof r[e]&&p(this._trace(Jt(t,n),r[e],Yt(i,e),r,e,s,!0))}));else{if("^"===u)return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:l,isParentSelector:!0};if("~"===u)return d={path:Yt(n,u),value:i,parent:r,parentProperty:null},this._handleCallback(d,o,"property"),d;if("$"===u)p(this._trace(l,t,n,null,null,o,a));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(u))p(this._slice(u,l,t,n,r,i,o));else if(0===u.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(u,l,t,n,r,i,o,((e,t,n,r,i,o,a,s)=>{this._eval(t.replace(/^\?\((.*?)\)$/u,"$1"),r[e],e,i,o,a)&&p(this._trace(Jt(e,n),r,i,o,a,s,!0))}))}else if("("===u[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");p(this._trace(Jt(this._eval(u,t,n[n.length-1],n.slice(0,-1),r,i),l),t,n,r,i,o,a))}else if("@"===u[0]){let e=!1;const a=u.slice(1,-2);switch(a){case"scalar":t&&["object","function"].includes(typeof t)||(e=!0);break;case"boolean":case"string":case"undefined":case"function":typeof t===a&&(e=!0);break;case"integer":!Number.isFinite(t)||t%1||(e=!0);break;case"number":Number.isFinite(t)&&(e=!0);break;case"nonFinite":"number"!=typeof t||Number.isFinite(t)||(e=!0);break;case"object":t&&typeof t===a&&(e=!0);break;case"array":Array.isArray(t)&&(e=!0);break;case"other":e=this.currOtherTypeCallback(t,n,r,i);break;case"null":null===t&&(e=!0);break;default:throw new TypeError("Unknown value type "+a)}if(e)return d={path:n,value:t,parent:r,parentProperty:i},this._handleCallback(d,o,"value"),d}else if("`"===u[0]&&t&&zt.call(t,u.slice(1))){const e=u.slice(1);p(this._trace(l,t[e],Yt(n,e),t,e,o,a,!0))}else if(u.includes(",")){const e=u.split(",");for(const a of e)p(this._trace(Jt(a,l),t,n,r,i,o,!0))}else!s&&t&&zt.call(t,u)&&p(this._trace(l,t[u],Yt(n,u),t,u,o,a,!0))}if(this._hasParentSelector)for(let e=0;e<c.length;e++){const n=c[e];if(n&&n.isParentSelector){const s=this._trace(n.expr,t,n.path,r,i,o,a);if(Array.isArray(s)){c[e]=s[0];const t=s.length;for(let n=1;n<t;n++)e++,c.splice(e,0,s[n])}else c[e]=s}}return c},Gt.prototype._walk=function(e,t,n,r,i,o,a,s){if(Array.isArray(n)){const d=n.length;for(let u=0;u<d;u++)s(u,e,t,n,r,i,o,a)}else n&&"object"==typeof n&&Object.keys(n).forEach((d=>{s(d,e,t,n,r,i,o,a)}))},Gt.prototype._slice=function(e,t,n,r,i,o,a){if(!Array.isArray(n))return;const s=n.length,d=e.split(":"),u=d[2]&&Number.parseInt(d[2])||1;let l=d[0]&&Number.parseInt(d[0])||0,c=d[1]&&Number.parseInt(d[1])||s;l=l<0?Math.max(0,l+s):Math.min(s,l),c=c<0?Math.max(0,c+s):Math.min(s,c);const p=[];for(let e=l;e<c;e+=u){this._trace(Jt(e,t),n,r,i,o,a,!0).forEach((e=>{p.push(e)}))}return p},Gt.prototype._eval=function(e,t,n,r,i,o){e.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=o,e=e.replace(/@parentProperty/gu,"_$_parentProperty")),e.includes("@parent")&&(this.currSandbox._$_parent=i,e=e.replace(/@parent/gu,"_$_parent")),e.includes("@property")&&(this.currSandbox._$_property=n,e=e.replace(/@property/gu,"_$_property")),e.includes("@path")&&(this.currSandbox._$_path=Gt.toPathString(r.concat([n])),e=e.replace(/@path/gu,"_$_path")),e.includes("@root")&&(this.currSandbox._$_root=this.json,e=e.replace(/@root/gu,"_$_root")),/@([.\s)[])/u.test(e)&&(this.currSandbox._$_v=t,e=e.replace(/@([.\s)[])/gu,"_$_v$1"));try{return this.vm.runInNewContext(e,this.currSandbox)}catch(t){throw console.log(t),new Error("jsonPath: "+t.message+": "+e)}},Gt.cache={},Gt.toPathString=function(e){const t=e,n=t.length;let r="$";for(let e=1;e<n;e++)/^(~|\^|@.*?\(\))$/u.test(t[e])||(r+=/^[0-9*]+$/u.test(t[e])?"["+t[e]+"]":"['"+t[e]+"']");return r},Gt.toPointer=function(e){const t=e,n=t.length;let r="";for(let e=1;e<n;e++)/^(~|\^|@.*?\(\))$/u.test(t[e])||(r+="/"+t[e].toString().replace(/~/gu,"~0").replace(/\//gu,"~1"));return r},Gt.toPathArray=function(e){const{cache:t}=Gt;if(t[e])return t[e].concat();const n=[],r=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replace(/[['](\??\(.*?\))[\]']/gu,(function(e,t){return"[#"+(n.push(t)-1)+"]"})).replace(/\[['"]([^'\]]*)['"]\]/gu,(function(e,t){return"['"+t.replace(/\./gu,"%@%").replace(/~/gu,"%%@@%%")+"']"})).replace(/~/gu,";~;").replace(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replace(/%@%/gu,".").replace(/%%@@%%/gu,"~").replace(/(?:;)?(\^+)(?:;)?/gu,(function(e,t){return";"+t.split("").join(";")+";"})).replace(/;;;|;;/gu,";..;").replace(/;$|'?\]|'$/gu,"").split(";").map((function(e){const t=e.match(/#(\d+)/u);return t&&t[1]?n[t[1]]:e}));return t[e]=r,t[e].concat()},Gt.prototype.vm=n.default;var Qt,Xt=Object.freeze({__proto__:null,JSONPath:Gt}),Zt=(Qt=Xt,Qt&&Qt.default||Qt),en=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(Mt),o=s(At),a=s(Ft);function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(0,Zt.JSONPath)({path:t,json:e,wrap:!1})}var l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var s in d(this,e),this.factMap=new Map(t),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(a.allowUndefinedFacts),this.pathResolver=a.pathResolver||u,this.events={success:[],failure:[]},this.ruleResults=[],r){var l=void 0;l=r[s]instanceof i.default?r[s]:new i.default(s,r[s]),this._addConstantFact(l),(0,o.default)("almanac::constructor initialized runtime fact:"+l.id+" with "+l.value+"<"+n(l.value)+">")}}return r(e,[{key:"addEvent",value:function(e,t){if(!t)throw new Error('outcome required: "success" | "failure"]');this.events[t].push(e)}},{key:"getEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?this.events[e]:this.events.success.concat(this.events.failure)}},{key:"addResult",value:function(e){this.ruleResults.push(e)}},{key:"getResults",value:function(){return this.ruleResults}},{key:"_getFact",value:function(e){return this.factMap.get(e)}},{key:"_addConstantFact",value:function(e){this.factMap.set(e.id,e),this._setFactValue(e,{},e.value)}},{key:"_setFactValue",value:function(e,t,n){var r=e.getCacheKey(t),i=Promise.resolve(n);return r&&this.factResultsCache.set(r,i),i}},{key:"addRuntimeFact",value:function(e,t){(0,o.default)("almanac::addRuntimeFact id:"+e);var n=new i.default(e,t);return this._addConstantFact(n)}},{key:"factValue",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=void 0,d=this._getFact(e);if(void 0===d)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new Ut.UndefinedFactError("Undefined fact: "+e));if(d.isConstant())s=Promise.resolve(d.calculate(r,this));else{var u=d.getCacheKey(r),l=u&&this.factResultsCache.get(u);l?(s=Promise.resolve(l),(0,o.default)("almanac::factValue cache hit for fact:"+e)):((0,o.default)("almanac::factValue cache miss for fact:"+e+"; calculating"),s=this._setFactValue(d,r,d.calculate(r,this)))}return i?((0,o.default)("condition::evaluate extracting object property "+i),s.then((function(e){if((0,a.default)(e)){var r=t.pathResolver(e,i);return(0,o.default)("condition::evaluate extracting object property "+i+", received: "+JSON.stringify(r)),r}return(0,o.default)("condition::evaluate could not compute object path("+i+") of non-object: "+e+" <"+(void 0===e?"undefined":n(e))+">; continuing with "+e),e}))):s}}]),e}();t.default=l})),tn=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Ht)&&n.__esModule?n:{default:n};var i=[];function o(e){return"NaN"!==Number.parseFloat(e).toString()}i.push(new r.default("equal",(function(e,t){return e===t}))),i.push(new r.default("notEqual",(function(e,t){return e!==t}))),i.push(new r.default("in",(function(e,t){return t.indexOf(e)>-1}))),i.push(new r.default("notIn",(function(e,t){return-1===t.indexOf(e)}))),i.push(new r.default("contains",(function(e,t){return e.indexOf(t)>-1}),Array.isArray)),i.push(new r.default("doesNotContain",(function(e,t){return-1===e.indexOf(t)}),Array.isArray)),i.push(new r.default("lessThan",(function(e,t){return e<t}),o)),i.push(new r.default("lessThanInclusive",(function(e,t){return e<=t}),o)),i.push(new r.default("greaterThan",(function(e,t){return e>t}),o)),i.push(new r.default("greaterThanInclusive",(function(e,t){return e>=t}),o)),t.default=i})),nn=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FINISHED=t.RUNNING=t.READY=void 0;var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=l(Mt),i=l(Vt),o=l(Ht),a=l(en),s=l(qt),d=l(tn),u=l(At);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=t.READY="READY",h=t.RUNNING="RUNNING",g=t.FINISHED="FINISHED",v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.rules=[],r.allowUndefinedFacts=n.allowUndefinedFacts||!1,r.pathResolver=n.pathResolver,r.operators=new Map,r.facts=new Map,r.status=f,e.map((function(e){return r.addRule(e)})),d.default.map((function(e){return r.addOperator(e)})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"addRule",value:function(e){if(!e)throw new Error("Engine: addRule() requires options");var t=void 0;if(e instanceof i.default)t=e;else{if(!Object.prototype.hasOwnProperty.call(e,"event"))throw new Error('Engine: addRule() argument requires "event" property');if(!Object.prototype.hasOwnProperty.call(e,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');t=new i.default(e)}return t.setEngine(this),this.rules.push(t),this.prioritizedRules=null,this}},{key:"updateRule",value:function(e){var t=this.rules.findIndex((function(t){return t.name===e.name}));if(!(t>-1))throw new Error("Engine: updateRule() rule not found");this.rules.splice(t,1),this.addRule(e),this.prioritizedRules=null}},{key:"removeRule",value:function(e){var t=!1;if(e instanceof i.default){var n=this.rules.indexOf(e);n>-1&&(t=Boolean(this.rules.splice(n,1).length))}else{var r=this.rules.filter((function(t){return t.name!==e}));t=r.length!==this.rules.length,this.rules=r}return t&&(this.prioritizedRules=null),t}},{key:"addOperator",value:function(e,t){var n=void 0;n=e instanceof o.default?e:new o.default(e,t),(0,u.default)("engine::addOperator name:"+n.name),this.operators.set(n.name,n)}},{key:"removeOperator",value:function(e){var t=void 0;return t=e instanceof o.default?e.name:e,this.operators.delete(t)}},{key:"addFact",value:function(e,t,n){var i=e,o=void 0;return e instanceof r.default?(i=e.id,o=e):o=new r.default(e,t,n),(0,u.default)("engine::addFact id:"+i),this.facts.set(i,o),this}},{key:"removeFact",value:function(e){var t=void 0;return t=e instanceof r.default?e.id:e,this.facts.delete(t)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var e=this.rules.reduce((function(e,t){var n=t.priority;return e[n]||(e[n]=[]),e[n].push(t),e}),{});this.prioritizedRules=Object.keys(e).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(t){return e[t]}))}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=g,this}},{key:"getFact",value:function(e){return this.facts.get(e)}},{key:"evaluateRules",value:function(e,t){var n=this;return Promise.all(e.map((function(e){return n.status!==h?((0,u.default)("engine::run status:"+n.status+"; skipping remaining rules"),Promise.resolve()):e.evaluate(t).then((function(e){return(0,u.default)("engine::run ruleResult:"+e.result),t.addResult(e),e.result?(t.addEvent(e.event,"success"),n.emitAsync("success",e.event,t,e).then((function(){return n.emitAsync(e.event.type,e.event.params,t,e)}))):(t.addEvent(e.event,"failure"),n.emitAsync("failure",e.event,t,e))}))})))}},{key:"run",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)("engine::run started"),this.status=h;var n={allowUndefinedFacts:this.allowUndefinedFacts,pathResolver:this.pathResolver},r=new a.default(this.facts,t,n),i=this.prioritizeRules(),o=Promise.resolve();return new Promise((function(t,n){i.map((function(t){return o=o.then((function(){return e.evaluateRules(t,r)})).catch(n)})),o.then((function(){e.status=g,(0,u.default)("engine::run completed");var n=r.getResults().reduce((function(e,t){return e[t.result?"results":"failureResults"].push(t),e}),{results:[],failureResults:[]}),i=n.results,o=n.failureResults;t({almanac:r,results:i,failureResults:o,events:r.getEvents("success"),failureEvents:r.getEvents("failure")})})).catch(n)}))}}]),t}(s.default);t.default=v})),rn=ot((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=t.Operator=t.Rule=t.Fact=void 0,t.default=function(e,t){return new n.default(e,t)};var n=a(nn),r=a(Mt),i=a(Vt),o=a(Ht);function a(e){return e&&e.__esModule?e:{default:e}}t.Fact=r.default,t.Rule=i.default,t.Operator=o.default,t.Engine=n.default})),on=rn,an=function(){function e(t){var n,r=t.widget,i=t.removeWidget,o=t.emitEvent,a=t.getState,d=t.setState,u=t.onUpdate;s(this,e),this._removeWidget=i,this._emitEvent=o,this._widgetItems={},this._widget=r,this._getPageState=a,this._setPageState=d,this._onUpdate=u,this.code&&a().registerWidgetCode(this.code,this.id),null!==(n=this.reflexiveRules)&&void 0!==n&&n.length&&(this.pageState.registerReflexWatch(this.id,this.reflexiveRules.map((function(e){return e.fact}))),this.runReflexives())}var t,n,r,i,o;return u(e,[{key:"pageState",get:function(){return this._getPageState()}},{key:"emitEvent",value:function(e,t){this._emitEvent(e,t,this)}},{key:"id",get:function(){return this._widget.id}},{key:"widget",get:function(){return this._widget}},{key:"effects",get:function(){return this._widget.effects}},{key:"type",get:function(){return this._widget.type}},{key:"code",get:function(){return this._widget.code}},{key:"style",get:function(){return this._widget.style}},{key:"properties",get:function(){return this._widget.properties}},{key:"parentId",get:function(){return this._widget.parent}},{key:"parent",get:function(){return this._widget.parent},set:function(e){this._widget.parent=e}},{key:"reflexiveRules",get:function(){return this._widget.reflexiveRules}},{key:"validationRules",get:function(){return this._widget.validationRules}},{key:"destroyed",value:function(){var e;null!==(e=this.reflexiveRules)&&void 0!==e&&e.length&&this.pageState.unregisterReflexWatch(this.id,this.reflexiveRules.map((function(e){return e.fact})))}},{key:"removeWidget",value:function(){this.parentId&&this._widgetItems[this.parentId].removeChild(this),this.destroyed(),this._removeWidget(this.id)}},{key:"setWidgetItems",value:function(e){this._widgetItems=e}},{key:"validate",value:(o=a(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new on.Engine(void 0,{allowUndefinedFacts:!0})).addRule({conditions:{all:t},event:{type:"isTruthy"}}),e.next=4,r.run(n);case 4:return e.abrupt("return",e.sent.events.some((function(e){return"isTruthy"===e.type})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})},{key:"runValidations",value:(i=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getValidationErrors();case 2:return t=e.sent,this.setState("errors",t),this._setPageState(this.pageState),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_getValidationErrors",value:(r=a(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=this.validationRules)&&void 0!==t&&t.length){e.next=2;break}return e.abrupt("return",null);case 2:return n=this.getState("response"),e.next=5,Promise.all(this.validationRules.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.validate(t.conditions,{properties:i.properties,response:void 0===n?null:n});case 2:if(e.sent){e.next=5;break}return e.abrupt("return",t.error);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return r=e.sent.filter((function(e){return e})),e.abrupt("return",r.length?r:null);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setChildErrors",value:function(e,t){var n=this.getState("childErrors")||{};t?n[e]=t:delete n[e],Object.keys(n).length?this.setState("childErrors",n):this.setState("childErrors",void 0)}},{key:"childErrors",value:function(){return this.getState("childErrors")}},{key:"hasChildErrors",value:function(){return Object.keys(this.childErrors()||{}).length>0}},{key:"runReflexives",value:(n=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isReflexive();case 2:t=e.sent,this.setState("reflexiveHide",!t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"isReflexive",value:(t=a(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=this.reflexiveRules)&&void 0!==t&&t.length){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",this.validate(this.reflexiveRules,this.reflexiveRules.reduce((function(e,t){var r,i=n.pageState.widgetCodeToIdMap[t.fact],o=null===(r=n.pageState.widgetState[i])||void 0===r?void 0:r.response;return e[t.fact]=o,e}),{})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setState",value:function(e,t){this._getPageState().setWidgetState(this.id,e,t),this._setPageState(this.pageState)}},{key:"getState",value:function(e){return this._getPageState().getWidgetState(this.id,e)}},{key:"getParentIds",value:function(){return e.getParentIds(this.id,this._widgetItems)}},{key:"getParents",value:function(){var e=this;return this.getParentIds().map((function(t){return e._widgetItems[t]}))}},{key:"getParent",value:function(){return this._widgetItems[this.parentId||""]||null}},{key:"getChildrenIds",value:function(e,t){return[]}},{key:"getChildren",value:function(e,t){var n=this;return this.getChildrenIds(e,t).map((function(e){return n._widgetItems[e]}))}},{key:"addChild",value:function(e,t){e.parent=this.id}},{key:"removeChild",value:function(e){e.parent=void 0}}],[{key:"getParentIds",value:function(t,n){var r=n[t];return null!=r&&r.parentId?[r.parentId].concat(w(e.getParentIds(r.parentId,n)||[])):[]}}]),e}(),sn={props:{widget:Object,widgetControls:Object,widgetItems:Object,pageState:Object,setWidgetState:Function,getWidgetState:Function,view:String},inject:["widgetEffectControls","setPageState"],methods:{onWidgetSelect:function(){this.$props.pageState.interactiveState.selectedWidgetId=this.$props.widget.id,this.setPageState(this.$props.pageState)}}},dn=sn,un=function(e){e&&e("data-v-60f339f8_0",{source:".widget-component-wrapper[data-v-60f339f8]{position:relative}.widget-component-wrapper.selected[data-v-60f339f8]{background-color:#fff;border:1px solid #86d5fa;border-radius:8px;padding:0 10px;margin:-1px -11px -1px -11px}.widget-wrapper[data-v-60f339f8]{padding:0 10px}.widget-builder-control[data-v-60f339f8]{position:absolute;top:-10px;left:10px;opacity:0;transition:opacity .2s;z-index:10}.widget-builder-control.hovered[data-v-60f339f8]{opacity:1}",map:void 0,media:void 0})},ln=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"widget-wrapper",on:{click:function(t){return t.stopPropagation(),e.onWidgetSelect(t)}}},[e.widget.style?n("style",{tag:"component",attrs:{scoped:""}},[e._v("\n    "+e._s(e.widget.style)+"\n  ")]):e._e(),e._v(" "),"builder"===e.view&&e.widgetControls[e.widget.type].builderControl?n("div",{staticClass:"widget-builder-control",class:{hovered:e.pageState.interactiveState.hoveredWidgetId===e.widget.id}},[n(e.widgetControls[e.widget.type].builderControl,{tag:"component",attrs:{widget:e.widget,widgetControls:e.widgetControls,widgetItems:e.widgetItems,pageState:e.pageState,setWidgetState:function(t,n){return e.setWidgetState(t,n,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)},view:e.view}})],1):e._e(),e._v(" "),n("div",{ref:"widgetComponentWrapper",staticClass:"widget-component-wrapper",class:{selected:e.pageState.interactiveState.selectedWidgetId===e.widget.id,unselected:e.pageState.interactiveState.selectedWidgetId&&e.pageState.interactiveState.selectedWidgetId!==e.widget.id}},[e._l(e.widget.effects,(function(t){return n(e.widgetEffectControls[t.type].display,{key:t.type,tag:"component",attrs:{properties:t.properties,wrapperRef:e.$refs.widgetComponentWrapper}})})),e._v(" "),n(e.widgetControls[e.widget.type][e.view||"display"],{tag:"component",attrs:{widget:e.widget,widgetControls:e.widgetControls,widgetItems:e.widgetItems,pageState:e.pageState,setWidgetState:function(t,n){return e.setWidgetState(t,n,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)},view:e.view,wrapperRef:e.$refs.widgetComponentWrapper}})],2)],1)},staticRenderFns:[]},un,dn,"data-v-60f339f8",false,undefined,!1,je,void 0,void 0),cn=ln,pn={components:{WidgetView:cn},props:{widgetControls:Object,widgetItems:Object,excludeWidgetIds:et(String),onlyIncludeWidgetIds:et(String),forParent:String},inject:["widgetControls","getPageState","getView","setPageState","removeWidget"],data:function(){return{hoveredWidgetId:-1}},computed:{view:function(){return this.getView()},pageState:function(){return this.getPageState()},widgetItemsArr:function(){return Object.values(this.$props.widgetItems)},filteredWidgetItemsArr:function(){var e=this;return this.widgetItemsArr.filter((function(t){return(!e.forParent&&!t.parentId||t.parentId===e.forParent)&&(!e.$props.onlyIncludeWidgetIds||e.$props.onlyIncludeWidgetIds.includes(t.id))&&(!(e.excludeWidgetIds||[]).length||!e.excludeWidgetIds.includes(t.id))})).sort((function(e,t){return(e.order||0)-(t.order||0)}))}},methods:{onDnDPlaceholderMouseDown:function(e,t){this.pageState.interactiveState.draggingWidgetId=t,this.setPageState(this.pageState)},onDnDPlaceholderMouseUp:function(e,t){this.pageState.interactiveState.draggingWidgetId="",this.setPageState(this.pageState)},onMouseEnter:function(e,t){e.stopPropagation(),this.$data.hoveredWidgetId=t,this.pageState.interactiveState.hoveredWidgetId=t,this.setPageState(this.pageState)},onMouseLeave:function(e,t){this.$data.hoveredWidgetId===t&&(this.$data.hoveredWidgetId=-1,this.pageState.interactiveState.hoveredWidgetId="",this.setPageState(this.pageState))},setWidgetState:function(e,t,n){var r=this.pageState;if(void 0===t){if(!r.widgetState[n.id])return;delete r.widgetState[n.id][e]}else r.widgetState[n.id]||(r.widgetState[n.id]={}),r.widgetState[n.id][e]=t;this.setPageState(r)},getWidgetState:function(e,t){var n;return null===(n=this.pageState.widgetState[t.id])||void 0===n?void 0:n[e]}}},fn=pn,hn=function(e){e&&e("data-v-5d623ffd_0",{source:".widget-container[data-v-5d623ffd]{position:relative}.widget-container.notDragging[data-v-5d623ffd]{opacity:.4}.widget-container.dragging[data-v-5d623ffd]{opacity:1}.widget-form-control[data-v-5d623ffd]{position:absolute;top:-40px;left:0}.add-line[data-v-5d623ffd]{position:relative;padding:10px 0;margin:-10.5px 0;opacity:0;transition:opacity .2s;z-index:10}.add-line[data-v-5d623ffd]:hover{opacity:1}.add-line .line[data-v-5d623ffd]{width:100%;height:1px;background-color:#b5b5b5;cursor:pointer}.add-line .add-button[data-v-5d623ffd]{position:absolute;top:-2px;left:-10px;width:20px;height:20px;background-color:#fff;border:1px solid #b5b5b5;border-radius:4px;display:flex;justify-content:center;align-items:center;padding-top:2px;box-shadow:0 0 10px 10px #fff;cursor:pointer}.add-line .add-button[data-v-5d623ffd]:hover{background-color:#eaeaea}.widget-container .dnd-placeholder[data-v-5d623ffd]{width:20px;height:25px;padding-bottom:2px;background-color:#fafafa;border:1px dashed #dadada;cursor:grab;font-size:9pt;display:flex;justify-content:center;align-items:center;border-radius:4px}.widget-container .dnd-placeholder[data-v-5d623ffd]:hover{background-color:#eaeaea}.left-actions-wrapper[data-v-5d623ffd]{position:absolute;top:15px;left:-40px;padding:10px;opacity:0;transition:opacity .2s;width:25px;display:flex;flex-direction:column;align-items:center}.widget-container.hovering>.left-actions-wrapper[data-v-5d623ffd]{opacity:1}.delete-button[data-v-5d623ffd]{font-size:12px;margin:2px 0;padding:1px 0;cursor:pointer;color:red}",map:void 0,media:void 0})},gn=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.filteredWidgetItemsArr,(function(t,r){return n("div",{key:t.id,staticClass:"widget-container",class:{hovering:e.hoveredWidgetId===t.id,dragging:e.pageState.interactiveState.draggingWidgetId===t.id,notDragging:e.pageState.interactiveState.draggingWidgetId&&e.pageState.interactiveState.draggingWidgetId!==t.id},on:{mouseenter:function(n){return n.stopPropagation(),r=n,e.onMouseEnter(r,t.id);var r},mouseleave:function(n){return n.stopPropagation(),r=n,e.onMouseLeave(r,t.id);var r}}},[n("div",{staticClass:"add-line"},[n("div",{staticClass:"line",on:{click:function(n){return n.stopPropagation(),i=n,e.onAddClick(i,t,r);var i}}}),e._v(" "),n("a",{staticClass:"add-button",on:{click:function(n){return n.stopPropagation(),i=n,e.onAddClick(i,t,r);var i}}},[e._v("+")])]),e._v(" "),n("div",{staticClass:"left-actions-wrapper"},[n("a",{staticClass:"dnd-placeholder",on:{mousedown:function(n){return e.onDnDPlaceholderMouseDown(n,t.id)},mouseup:function(n){return e.onDnDPlaceholderMouseUp(n,t.id)}}},[e._v("\n        ↑↓\n      ")]),e._v(" "),n("a",{staticClass:"delete-button",on:{click:function(){return t.removeWidget()}}},[e._v("🗑")])]),e._v(" "),n("widget-view",{attrs:{widget:t,widgetControls:e.widgetControls,widgetItems:e.widgetItems,pageState:e.pageState,setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view}}),e._v(" "),r===e.filteredWidgetItemsArr.length-1?n("div",{staticClass:"add-line"},[n("div",{staticClass:"line",on:{click:function(n){return n.stopPropagation(),i=n,e.onAddClick(i,t,r);var i}}}),e._v(" "),n("a",{staticClass:"add-button",on:{click:function(n){return n.stopPropagation(),i=n,e.onAddClick(i,t,r);var i}}},[e._v("+")])]):e._e()],1)})),0)},staticRenderFns:[]},hn,fn,"data-v-5d623ffd",false,undefined,!1,je,void 0,void 0),vn=gn,yn={components:{WidgetsLayout:it,BuilderWidgetsLayout:vn},props:{widget:Object,widgetItems:Object,pageState:Object,setWidgetState:Function,wrapperRef:HTMLDivElement},data:function(){return{sortedPages:[]}},inject:["t"],computed:{currentPageIndex:function(){var e,t;return(null===(e=this.pageState.widgetState)||void 0===e||null===(t=e[this.$props.widget.id])||void 0===t?void 0:t.currentPageIndex)||0}},watch:{currentPageIndex:{handler:function(){var e=this.$props.widget.getState("viewedIndices");this.$props.widget.setState("viewedIndices",w(new Set([].concat(w(e||[]),[this.currentPageIndex]))))},immediate:!0},"widget.properties.pages":{handler:function(){this.$data.sortedPages=this.$props.widget.getSortedPages()},immediate:!0}}},bn=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.widget.properties.tabsVisible?n("div",{staticClass:"pages-menu-wrapper"},e._l(e.sortedPages,(function(t,r){return n("a",{key:r,staticClass:"pages-menu-item",class:{active:e.currentPageIndex===r,errors:e.widget.pageIndexHasErrors(r,{allChildPages:!0}),unopened:!(e.widget.getState("viewedIndices")||[]).includes(r)},on:{click:function(){return e.widget.onChangePageIndex(r)}}},[e._v("\n      "+e._s(e.t(t.labelKey,e.widget.id))+"\n    ")])})),0):e._e(),e._v(" "),e._l(e.sortedPages,(function(t,r){return n("div",{key:r,staticClass:"pages-content-item"},[e.currentPageIndex===r?n("div",[n("builder-widgets-layout",{attrs:{widgetItems:e.widgetItems,excludeWidgetIds:[e.widget.id],onlyIncludeWidgetIds:t.children,forParent:e.widget.id}})],1):e._e()])})),e._v(" "),e.widget.properties.navigationVisible?n("div",{staticClass:"back-forward-wrapper"},[n("div",[e.widget.hasPreviousButton()?n("button",{staticClass:"back-forward-button",on:{click:function(){return e.widget.toPreviousPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.previousButtonType(),e.widget.id))+"\n      ")]):e._e()]),e._v(" "),n("div",[e.widget.hasNextButton()?n("button",{staticClass:"back-forward-button",class:{errors:e.widget.pageIndexHasErrors(e.currentPageIndex)},on:{click:function(){return e.widget.toNextPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.nextButtonType(),e.widget.id))+"\n      ")]):e._e()])]):e._e()],2)},staticRenderFns:[]},(function(e){e&&e("data-v-d53c3f48_0",{source:".pages-menu-wrapper[data-v-d53c3f48]{display:flex;flex-direction:row;justify-content:center;margin:10px 0}.pages-menu-item[data-v-d53c3f48]{display:inline-block;padding:10px 20px;cursor:pointer;text-align:center}.pages-menu-item.unopened[data-v-d53c3f48]{opacity:.3;cursor:default}.pages-menu-item.active[data-v-d53c3f48]{border-bottom:3px solid #03a9f4}.pages-menu-item.errors[data-v-d53c3f48]{border-color:red}.back-forward-wrapper[data-v-d53c3f48]{display:flex;flex-direction:row;justify-content:space-between}.back-forward-button[data-v-d53c3f48]{padding:10px 20px;margin:10px;border:1px solid transparent;background-color:#03a9f4;color:#fff;cursor:pointer}.back-forward-button.errors[data-v-d53c3f48]{background-color:red;color:#fff;opacity:.2;cursor:default}",map:void 0,media:void 0})}),yn,"data-v-d53c3f48",false,undefined,!1,je,void 0,void 0),wn=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.widget.properties.tabsVisible?n("div",{staticClass:"pages-menu-wrapper"},e._l(e.sortedPages,(function(t,r){return n("a",{key:r,staticClass:"pages-menu-item",class:{active:e.currentPageIndex===r,errors:e.widget.pageIndexHasErrors(r,{allChildPages:!0}),unopened:!(e.widget.getState("viewedIndices")||[]).includes(r)},attrs:{disabled:!(e.widget.getState("viewedIndices")||[]).includes(r)},on:{click:function(){return(e.widget.getState("viewedIndices")||[]).includes(r)&&e.widget.onChangePageIndex(r)}}},[e._v("\n      "+e._s(e.t(t.labelKey,e.widget.id))+"\n    ")])})),0):e._e(),e._v(" "),e._l(e.sortedPages,(function(t,r){return n("div",{key:r,staticClass:"pages-content-item"},[e.currentPageIndex===r?n("div",[n("widgets-layout",{attrs:{widgetItems:e.widgetItems,excludeWidgetIds:[e.widget.id],onlyIncludeWidgetIds:t.children,widgetsOrder:t.children,forParent:e.widget.id}})],1):e._e()])})),e._v(" "),e.widget.properties.navigationVisible?n("div",{staticClass:"back-forward-wrapper"},[n("div",[e.widget.hasPreviousButton()?n("button",{staticClass:"back-forward-button",on:{click:function(){return e.widget.toPreviousPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.previousButtonType(),e.widget.id))+"\n      ")]):e._e()]),e._v(" "),n("div",[e.widget.hasNextButton()?n("button",{staticClass:"back-forward-button",class:{errors:e.widget.pageIndexHasErrors(e.currentPageIndex)},attrs:{disabled:e.widget.pageIndexHasErrors(e.currentPageIndex)},on:{click:function(){return e.widget.toNextPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.nextButtonType(),e.widget.id))+"\n      ")]):e._e()])]):e._e()],2)},staticRenderFns:[]},(function(e){e&&e("data-v-2ccb107e_0",{source:".pages-menu-wrapper[data-v-2ccb107e]{display:flex;flex-direction:row;justify-content:center;margin:10px 0}.pages-menu-item[data-v-2ccb107e]{display:inline-block;padding:10px 20px;cursor:pointer;text-align:center}.pages-menu-item.unopened[data-v-2ccb107e]{opacity:.3;cursor:default}.pages-menu-item.active[data-v-2ccb107e]{border-bottom:3px solid #03a9f4}.pages-menu-item.errors[data-v-2ccb107e]{border-color:red}.back-forward-wrapper[data-v-2ccb107e]{display:flex;flex-direction:row;justify-content:space-between}.back-forward-button[data-v-2ccb107e]{padding:10px 20px;margin:10px;border:1px solid transparent;background-color:#03a9f4;color:#fff;cursor:pointer}.back-forward-button.errors[data-v-2ccb107e]{background-color:red;color:#fff;opacity:.2;cursor:default}",map:void 0,media:void 0})}),{components:{WidgetsLayout:it},props:{widget:Object,widgetItems:Object,pageState:Object,setWidgetState:Function,wrapperRef:HTMLDivElement},data:function(){return{sortedPages:[]}},inject:["t"],computed:{currentPageIndex:function(){var e,t;return(null===(e=this.pageState.widgetState)||void 0===e||null===(t=e[this.$props.widget.id])||void 0===t?void 0:t.currentPageIndex)||0}},watch:{currentPageIndex:{handler:function(){var e=this.$props.widget.getState("viewedIndices");this.$props.widget.setState("viewedIndices",w(new Set([].concat(w(e||[]),[this.currentPageIndex]))))},immediate:!0},"widget.properties.pages":{handler:function(){this.$data.sortedPages=this.$props.widget.getSortedPages()},immediate:!0}}},"data-v-2ccb107e",false,undefined,!1,je,void 0,void 0),mn=function(e){c(r,e);var t,n=g(r);function r(e){return s(this,r),n.call(this,e)}return u(r,[{key:"getSortedPages",value:function(){return this.properties.pages}},{key:"isWidgetIdInWidgetIds",value:function(e,t){var n=this;return t.some((function(t){return t===e||n.isWidgetIdInWidgetIds(e,n._widgetItems[t].getChildrenIds())}))}},{key:"getChildIndexByWidgetId",value:function(e){var t=this;return this.getSortedPages().findIndex((function(n){return t.isWidgetIdInWidgetIds(e,n.children)}))}},{key:"getChildrenIds",value:function(e,t){var n=this;return this.getSortedPages().filter((function(e,r){var i;return null!=t&&null!==(i=t.inPageIndices)&&void 0!==i&&i.length?t.inPageIndices.includes(r):null!=t&&t.currentPageIndexOnly?r===n.currentPageIndex:e})).reduce((function(r,i){return[].concat(w(r),w(i.children),w(null!=e&&e.deep?i.children.reduce((function(r,i){return[].concat(w(r),w(n._widgetItems[i].getChildrenIds(e,t)))}),[]):[]))}),[])}},{key:"setChildErrors",value:function(e,t){y(p(r.prototype),"setChildErrors",this).call(this,e,t);var n,i=this.getState("pageIdxErrors")||{},o=this.getChildIndexByWidgetId(e);if(-1===o)throw new Error("child widget not in paging");t?(i[o]||(i[o]={}),i[o][e]=t):(null===(n=i[o])||void 0===n||delete n[e],Object.keys(i[o]).length||delete i[o]);this.setState("pageIdxErrors",Object.keys(i).length?i:void 0)}},{key:"addChild",value:function(e,t){y(p(r.prototype),"addChild",this).call(this,e,t),this._widget.properties.pages[(null==t?void 0:t.pageIdx)||0].children.splice((null==t?void 0:t.childIdx)||0,0,e.id)}},{key:"removeChild",value:function(e){y(p(r.prototype),"removeChild",this).call(this,e),this._widget.properties.pages.forEach((function(t){t.children=t.children.filter((function(t){return t!==e.id}))})),this._onUpdate(this)}},{key:"onChangePageIndex",value:function(e){var t=this.getSortedPages();e<0||e>t.length-1||this.setState("currentPageIndex",e)}},{key:"currentPageIndex",get:function(){return this.getState("currentPageIndex")||0}},{key:"getParentPagesWidgets",value:function(e){var t=this.getParents().filter((function(e){return"pages"===e.type}));return null!=e&&e.first?t[0]:t}},{key:"getChildrenPagesWidgets",value:function(e){var t=this.getChildren({deep:!0},{inPageIndices:null==e?void 0:e.inPageIndices}).filter((function(e){return"pages"===e.type}));return null!=e&&e.first?t[0]:t}},{key:"pageIndexHasErrors",value:function(e,t){var n=this.getState("pageIdxErrors")||{};if(!Object.keys(n).length)return!1;if(!Object.keys(n[e]||{}).length)return!1;var r=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null;return!(r&&(null==r||!r.properties.detachParentIntegration)&&"none"!==(null==r?void 0:r.nextButtonType()))||(null!=t&&t.allChildPages?r.hasChildErrors():r.currentPageIndexHasErrors())}},{key:"currentPageIndexHasErrors",value:function(){return this.pageIndexHasErrors(this.currentPageIndex)}},{key:"toNextPage",value:(t=a(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getChildren({deep:!0},{currentPageIndexOnly:!0}),e.next=3,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.runValidations());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:if(e.sent.some((function(e){return e}))){e.next=16;break}if("complete"!==(n=this.nextButtonType())){e.next=10;break}this.emitEvent("pages_complete"),e.next=16;break;case 10:if("none"!==n){e.next=14;break}return e.abrupt("return");case 14:!(r=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null)||null!=r&&r.properties.detachParentIntegration||"none"===(null==r?void 0:r.nextButtonType())?this.onChangePageIndex(this.currentPageIndex+1):r.toNextPage();case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toPreviousPage",value:function(){if("none"!==this.previousButtonType()){var e=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null;!e||null!=e&&e.properties.detachParentIntegration||"none"===(null==e?void 0:e.previousButtonType())?this.onChangePageIndex(this.currentPageIndex-1):e.toPreviousPage()}}},{key:"previousButtonType",value:function(){var e=this.currentPageIndex<=0,t=this.getChildrenPagesWidgets({first:!0});return this.properties.navigationIntegrateChildrenPages&&t&&!t.properties.detachParentIntegration&&e?t.previousButtonType():e?"none":"previous"}},{key:"nextButtonType",value:function(){var e=this.currentPageIndex>=this._widget.properties.pages.length-1,t=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0}):null;return this.properties.navigationIntegrateChildrenPages&&t&&"none"!==t.nextButtonType()&&!t.properties.detachParentIntegration&&e?t.nextButtonType():e?this.properties.hasCompleteButton?"complete":"none":"next"}},{key:"hasPreviousButton",value:function(){return!!this.properties.navigationVisible&&"none"!==this.previousButtonType()}},{key:"hasNextButton",value:function(){return!!this.properties.navigationVisible&&"none"!==this.nextButtonType()}}]),r}(an),_n={display:wn,builder:bn,readOnly:Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"paging-menu-wrapper"},e._l(e.sortedPages,(function(t,r){return n("a",{key:r,staticClass:"paging-menu-item",class:{active:e.currentPageIndex===r,errors:e.pageIndexHasErrors(r)},on:{click:function(){return e.widget.setState("currentPageIndex",r)}}},[e._v("\n      "+e._s(e.t(t.labelKey,e.widget.id))+"\n    ")])})),0),e._v(" "),e._l(e.sortedPages,(function(t,r){return n("div",{key:r,staticClass:"paging-content-item"},[e.currentPageIndex===r?n("div",[n("widgets-layout",{attrs:{widgets:e.widgets,widgetItems:e.widgetItems,excludeWidgetIds:[e.widget.id],onlyIncludeWidgetIds:t.children,forParent:e.widget.id}})],1):e._e()])}))],2)},staticRenderFns:[]},(function(e){e&&e("data-v-1b4c4d22_0",{source:".paging-menu-wrapper[data-v-1b4c4d22]{display:flex;flex-direction:row;justify-content:center;margin:10px 0}.paging-menu-item[data-v-1b4c4d22]{display:inline-block;padding:10px 20px;cursor:pointer;border:1px solid transparent}.paging-menu-item.active[data-v-1b4c4d22]{background-color:#e8e8e8}.paging-menu-item.errors[data-v-1b4c4d22]{border-color:red}",map:void 0,media:void 0})}),{components:{WidgetsLayout:it},props:{widget:Object,widgets:Object,widgetItems:Object,pageState:Object,setWidgetState:Function},data:function(){return{sortedPages:[]}},inject:["t"],computed:{currentPageIndex:function(){var e,t;return(null===(e=this.pageState.widgetState)||void 0===e||null===(t=e[this.$props.widget.id])||void 0===t?void 0:t.currentPageIndex)||0}},watch:{"widget.properties.pages":{handler:function(){this.$data.sortedPages=this.$props.widget.getSortedPages()},immediate:!0}},methods:{pageIndexHasErrors:function(e){var t=this.$props.widget.getState("pageIdxErrors")||{};return!!Object.keys(t).length&&Object.keys(t[e]||{}).length}}},"data-v-1b4c4d22",false,undefined,!1,je,void 0,void 0),widgetItem:mn},xn={props:{widget:Object,widgetControls:Object,widgetItems:Object,setWidgetState:Function,getWidgetState:Function,view:String},inject:["t","questionControls","widgetControls","getPageState","setPageState","getLocale","setMessage"],created:function(){var e,t,n,r,o,a=i({},null===(e=this.$props.widget)||void 0===e?void 0:e.getState());(null===(t=this.widget)||void 0===t||t.setState("type","question"),void 0===(null==a?void 0:a.touched))&&(null===(n=this.widget)||void 0===n||n.setState("touched",!1),null===(r=this.widget)||void 0===r||r.setState("pristine",!0),null===(o=this.widget)||void 0===o||o.setState("dirty",!1))},mounted:function(){var e=this;this.$nextTick((function(){e.$refs.labelInput&&(e.$refs.labelInput.style.height="",e.$refs.labelInput.style.height=e.$refs.labelInput.scrollHeight+"px")}))},unmounted:function(){},computed:{pageState:function(){return this.getPageState()}},methods:{updateText:function(e,t){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__".concat(e),value:t.replaceAll(/\n|\r/g,"")})},onChange:function(e,t){var n=this;this.widget.setState("response",e),t||(this.widget.setState("touched",!0),this.widget.setState("pristine",!1),this.widget.setState("dirty",!0),a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$props.widget.runValidations();case 2:return t=n.pageState.getReflexWidgetIdsByCode(n.$props.widget.code),e.next=5,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.$props.widgetItems[t].runReflexives());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})))())}}},Cn=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.widget.getState("reflexiveHide")?e._e():n("div",[n("div",{staticClass:"question-wrapper"},[e.widget.properties.hideLabel?e._e():n("label",{class:{errors:(e.getWidgetState("errors")||[]).length},attrs:{for:e.widget.code||e.widget.id}},[n("textarea",{ref:"labelInput",staticClass:"text-input",attrs:{oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},domProps:{value:e.t("__label",e.widget.id)},on:{input:function(t){return e.updateText("label",t.target.value)}}})]),e._v(" "),n("div",[n(e.questionControls[e.widget.properties.control].display,{tag:"component",attrs:{properties:e.widget.properties.controlProperties,widget:e.widget,onChange:e.onChange,value:e.widget.getState("response"),setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view,errors:e.getWidgetState("errors"),t:e.t}}),e._v(" "),e._l(e.getWidgetState("errors"),(function(t){return n("span",{key:t,staticClass:"error"},[e._v(e._s(e.t(t,e.widget.id)))])}))],2)])])},staticRenderFns:[]},(function(e){e&&e("data-v-2bd9fbd9_0",{source:".question-wrapper[data-v-2bd9fbd9]{width:100%;display:flex;flex-direction:row}.question-wrapper>label[data-v-2bd9fbd9]{flex:1;max-width:300px;border-right:1px solid #393939;padding:20px 0;margin-right:20px}.question-wrapper>label.errors[data-v-2bd9fbd9]{color:red}.question-wrapper>div[data-v-2bd9fbd9]{flex:2;padding:20px 0}.error[data-v-2bd9fbd9]{display:block;color:red;margin-top:10px}.text-input[data-v-2bd9fbd9]{font-size:inherit;font-weight:inherit;font-family:inherit;border:none;outline:0;width:100%;background-color:transparent;resize:none;min-height:10px;margin-bottom:-15px}",map:void 0,media:void 0})}),xn,"data-v-2bd9fbd9",false,undefined,!1,je,void 0,void 0),Sn={props:{widget:Object,widgetControls:Object,widgetItems:Object,setWidgetState:Function,getWidgetState:Function,view:String},inject:["t","questionControls","widgetControls","getPageState","setPageState"],created:function(){var e=i({},this.$props.widget.getState());this.widget.setState("type","question"),void 0===(null==e?void 0:e.touched)&&(this.widget.setState("touched",!1),this.widget.setState("pristine",!0),this.widget.setState("dirty",!1))},unmounted:function(){},computed:{pageState:function(){return this.getPageState()}},methods:{onChange:function(e,t){var n=this;this.widget.setState("response",e),t||(this.widget.setState("touched",!0),this.widget.setState("pristine",!1),this.widget.setState("dirty",!0),a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$props.widget.runValidations();case 2:return t=n.pageState.getReflexWidgetIdsByCode(n.$props.widget.code),e.next=5,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.$props.widgetItems[t].runReflexives());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})))())}}},On=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.widget.getState("reflexiveHide")?e._e():n("div",[n("div",{staticClass:"question-wrapper"},[e.widget.properties.hideLabel?e._e():n("label",{class:{errors:(e.getWidgetState("errors")||[]).length},attrs:{for:e.widget.code||e.widget.id}},[e._v(e._s(e.t("__label",e.widget.id)))]),e._v(" "),n("div",[n(e.questionControls[e.widget.properties.control].display,{tag:"component",attrs:{properties:e.widget.properties.controlProperties,widget:e.widget,onChange:e.onChange,value:e.widget.getState("response"),setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view,errors:e.getWidgetState("errors"),t:e.t}}),e._v(" "),e._l(e.getWidgetState("errors"),(function(t){return n("span",{key:t,staticClass:"error"},[e._v(e._s(e.t(t,e.widget.id)))])}))],2)])])},staticRenderFns:[]},(function(e){e&&e("data-v-3201888e_0",{source:".question-wrapper[data-v-3201888e]{width:100%;display:flex;flex-direction:row}.question-wrapper>label[data-v-3201888e]{flex:1;max-width:300px;border-right:1px solid #393939;padding:20px 0;margin-right:20px}.question-wrapper>label.errors[data-v-3201888e]{color:red}.question-wrapper>div[data-v-3201888e]{flex:2;padding:20px 0}.error[data-v-3201888e]{display:block;color:red}@media only screen and (max-width:600px){.question-wrapper[data-v-3201888e]{flex-direction:column}.question-wrapper>label[data-v-3201888e]{border-right:none;padding:10px 0 5px 0}.question-wrapper>label.errors[data-v-3201888e]{color:#000}.question-wrapper>div[data-v-3201888e]{padding:5px 0 10px 0}}",map:void 0,media:void 0})}),Sn,"data-v-3201888e",false,undefined,!1,je,void 0,void 0),jn=function(e){c(r,e);var t,n=g(r);function r(e){return s(this,r),n.call(this,e)}return u(r,[{key:"runValidations",value:(t=a(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(p(r.prototype),"runValidations",this).call(this);case 2:return t=e.sent,this.setState("valid",!t),this.setState("hasErrors",!!t),(this.getParentIds()||[]).forEach((function(e){var r=n._widgetItems[e].getState(),i=(null==r?void 0:r.childErrors)||{};(t||i[n.id])&&(t?i[n.id]=t:delete i[n.id],n._widgetItems[e].setChildErrors(n.id,t))})),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(an),kn={display:On,builder:Cn,readOnly:Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.getWidgetState("reflexiveHide")?e._e():n("div",[n("div",{staticClass:"question-wrapper"},[e.widget.properties.hideLabel?e._e():n("label",[e._v(e._s(e.t("__label",e.widget.id)))]),e._v(" "),n("div",[n(e.questionControls[e.widget.properties.control].readOnly,{tag:"component",attrs:{properties:e.widget.properties.controlProperties,widget:e.widget,onChange:e.onChange,value:e.getWidgetState("response"),setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view,t:e.t}})],1)])])},staticRenderFns:[]},(function(e){e&&e("data-v-4793e8eb_0",{source:".question-wrapper[data-v-4793e8eb]{width:100%;display:flex;flex-direction:row;padding:10px 10px}.question-wrapper>label[data-v-4793e8eb]{flex:1;max-width:300px;border-right:1px solid #393939;padding:10px 0}.question-wrapper>div[data-v-4793e8eb]{flex:2;padding:10px 20px}",map:void 0,media:void 0})}),{props:{widget:Object,widgetControls:Object,widgetItems:Object,setWidgetState:Function,getWidgetState:Function,view:String},inject:["t","questionControls","widgetControls","getPageState","setPageState"],created:function(){},unmounted:function(){},computed:{pageState:function(){return this.getPageState()}},methods:{onChange:function(e){this.setWidgetState("response",e)}}},"data-v-4793e8eb",false,undefined,!1,je,void 0,void 0),widgetItem:jn},Pn={components:{BuilderWidgetsLayout:vn,WidgetsLayout:it},props:{widget:an,widgetItems:Object,widgetControls:Object},inject:["t","getLocale","setMessage"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)},childErrors:function(){var e;return null===(e=this.$props.widget.getState())||void 0===e?void 0:e.childErrors},hasChildErrors:function(){return this.$props.widget.hasChildErrors()}},methods:{updateText:function(e,t){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__".concat(e),value:t.replaceAll(/\n|\r/g,"")})},isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},In=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section-wrapper",class:{errors:e.hasChildErrors}},[n("label",[n("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:e.label},on:{input:function(t){return e.updateText("label",t.target.value)}}})]),e._v(" "),n("builder-widgets-layout",{attrs:{widgetControls:e.widgetControls,widgetItems:e.widgetItems,forParent:e.widget.id}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-37850118_0",{source:".section-wrapper[data-v-37850118]{position:relative;border:1px solid #a9a9a9;min-height:30px;padding:10px;margin:10px 0;border-radius:8px}.section-wrapper>label[data-v-37850118]{position:absolute;top:0;left:10px;transform:translateY(-50%);background-color:#fff;padding:1px 10px;z-index:10}.section-wrapper.errors[data-v-37850118]{border-color:red}.text-input[data-v-37850118]{font-size:inherit;font-weight:inherit;font-family:inherit;border:none;outline:0;width:100%;background-color:transparent;resize:none;min-height:10px;margin-bottom:-15px}",map:void 0,media:void 0})}),Pn,"data-v-37850118",false,undefined,!1,je,void 0,void 0),$n=Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("section builder form")])},staticRenderFns:[]},undefined,{props:{widget:Object},inject:["updateWidget"]},undefined,false,undefined,!1,void 0,void 0,void 0),En=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section-wrapper",class:{errors:e.hasChildErrors}},[e.label?n("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),n("widgets-layout",{attrs:{widgetControls:e.widgetControls,widgetItems:e.widgetItems,forParent:e.widget.id}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-732942fe_0",{source:".section-wrapper[data-v-732942fe]{position:relative;border:1px solid #a9a9a9;min-height:30px;padding:10px;margin:10px 0;border-radius:8px}.section-wrapper>label[data-v-732942fe]{position:absolute;top:0;left:10px;transform:translateY(-50%);background-color:#fff;padding:10px}.section-wrapper.errors[data-v-732942fe]{border-color:red}@media only screen and (max-width:600px){.section-wrapper label[data-v-732942fe]{font-size:10pt}}",map:void 0,media:void 0})}),{components:{WidgetsLayout:it},props:{widget:an,widgetItems:Object,widgetControls:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)},childErrors:function(){var e;return null===(e=this.$props.widget.getState())||void 0===e?void 0:e.childErrors},hasChildErrors:function(){return this.$props.widget.hasChildErrors()}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-732942fe",false,undefined,!1,je,void 0,void 0),Tn=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section-wrapper"},[e.label?n("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),n("widgets-layout",{attrs:{widgetControls:e.widgetControls,widgetItems:e.widgetItems,forParent:e.widget.id}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-2ff96dbf_0",{source:".section-wrapper[data-v-2ff96dbf]{position:relative;border:1px solid #a9a9a9;min-height:30px;padding:10px;margin:10px;border-radius:8px}.section-wrapper>label[data-v-2ff96dbf]{position:absolute;top:0;left:10px;transform:translateY(-50%);background-color:#fff;padding:10px}",map:void 0,media:void 0})}),{components:{WidgetsLayout:it},props:{widget:Object,widgetItems:Object,widgetControls:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-2ff96dbf",false,undefined,!1,je,void 0,void 0),Rn=function(e){c(n,e);var t=g(n);function n(e){return s(this,n),t.call(this,e)}return u(n,[{key:"getChildrenIds",value:function(){return this.properties.children}},{key:"addChild",value:function(e,t){y(p(n.prototype),"addChild",this).call(this,e,t),this._widget.properties.children.splice((null==t?void 0:t.idx)||0,0,e.id)}},{key:"removeChild",value:function(e){y(p(n.prototype),"removeChild",this).call(this,e);var t=this._widget.properties.children.findIndex((function(t){return t===e.id}));t>-1&&this._widget.properties.children.splice(t,1)}}]),n}(an),Wn={display:En,builder:In,builderForm:$n,readOnly:Tn,widgetItem:Rn},Ln={props:{widget:Object},inject:["t","getLocale","setMessage"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)}},methods:{updateText:function(e,t){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__".concat(e),value:t.replaceAll(/\n|\r/g,"")})},isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},Mn=Se({render:function(){var e,t,n,r=this,i=r.$createElement,o=r._self._c||i;return o("div",{staticClass:"line-wrapper",class:{vertical:"vertical"===r.widget.properties.dir}},[r.isShowLabel("start")?o("label",{class:(e={},e[r.widget.properties.labelPosition||"start"]=!0,e)},[o("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:r.label},on:{input:function(e){return r.updateText("label",e.target.value)}}})]):r._e(),r._v(" "),o("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("center")?o("label",{class:(t={},t[r.widget.properties.labelPosition||"start"]=!0,t)},[o("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:r.label},on:{input:function(e){return r.updateText("label",e.target.value)}}})]):r._e(),r._v(" "),o("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("end")?o("label",{class:(n={},n[r.widget.properties.labelPosition||"start"]=!0,n)},[o("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:r.label},on:{input:function(e){return r.updateText("label",e.target.value)}}})]):r._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-15b046be_0",{source:".line-wrapper[data-v-15b046be]{display:flex;flex-direction:row;align-items:center;padding:10px 0}.line-wrapper.vertical[data-v-15b046be]{flex-direction:column}.line-wrapper .line[data-v-15b046be]{flex:1;background-color:#a0a0a0;height:1px}.line-wrapper.vertical .line[data-v-15b046be]{width:1px}.line-wrapper label[data-v-15b046be]{padding:10px;background-color:rgba(255,255,255,.5);border-radius:10px}.line-wrapper label.start[data-v-15b046be]{padding-left:0}.line-wrapper label.end[data-v-15b046be]{padding-right:0}.text-input[data-v-15b046be]{font-size:inherit;font-weight:inherit;font-family:inherit;border:none;outline:0;width:100%;background-color:transparent;resize:none;min-height:10px;margin-bottom:-15px}.start .text-input[data-v-15b046be]{text-align:left}.center .text-input[data-v-15b046be]{text-align:center}.end .text-input[data-v-15b046be]{text-align:right}.line-wrapper.vertical .text-input[data-v-15b046be]{text-align:center}",map:void 0,media:void 0})}),Ln,"data-v-15b046be",false,undefined,!1,je,void 0,void 0),An=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"fieldItem"},[n("label",{staticClass:"label"},[e._v("Label Position")]),e._v(" "),n("div",{staticClass:"button-group"},[n("button",{staticClass:"button-item",class:{active:"start"===e.widget.properties.labelPosition},on:{click:function(){return e.setLabelPosition("start")}}},[e._v("\n        start\n      ")]),e._v(" "),n("button",{staticClass:"button-item",class:{active:"center"===e.widget.properties.labelPosition},on:{click:function(){return e.setLabelPosition("center")}}},[e._v("\n        center\n      ")]),e._v(" "),n("button",{staticClass:"button-item",class:{active:"end"===e.widget.properties.labelPosition},on:{click:function(){return e.setLabelPosition("end")}}},[e._v("\n        end\n      ")])])])])},staticRenderFns:[]},(function(e){e&&e("data-v-5fdb34e2_0",{source:".fieldItem[data-v-5fdb34e2]{padding:10px}.fieldItem>.label[data-v-5fdb34e2]{display:block;padding:10px 0}.button-group[data-v-5fdb34e2]{position:relative;display:flex;flex-direction:row;border-radius:4px;overflow:hidden;width:100%;max-width:300px}.button-item[data-v-5fdb34e2]{padding:5px 10px;border:none;flex:1;cursor:pointer}.button-item.active[data-v-5fdb34e2]{background-color:#03a9f4;color:#fff}",map:void 0,media:void 0})}),{props:{widget:{type:an,required:!0}},inject:["updateWidget"],methods:{setLabelPosition:function(e){this.$props.widget.properties.labelPosition=e,this.updateWidget(this.$props.widget)}}},"data-v-5fdb34e2",false,undefined,!1,je,void 0,void 0),Fn={display:Se({render:function(){var e,t,n,r=this,i=r.$createElement,o=r._self._c||i;return o("div",{staticClass:"line-wrapper",class:{vertical:"vertical"===r.widget.properties.dir}},[r.isShowLabel("start")?o("label",{class:(e={},e[r.widget.properties.labelPosition||"start"]=!0,e)},[r._v(r._s(r.label))]):r._e(),r._v(" "),o("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("center")?o("label",{class:(t={},t[r.widget.properties.labelPosition||"start"]=!0,t)},[r._v(r._s(r.label))]):r._e(),r._v(" "),o("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("end")?o("label",{class:(n={},n[r.widget.properties.labelPosition||"start"]=!0,n)},[r._v(r._s(r.label))]):r._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-7103effe_0",{source:".line-wrapper[data-v-7103effe]{display:flex;flex-direction:row;align-items:center;padding:10px 0}.line-wrapper.vertical[data-v-7103effe]{flex-direction:column}.line-wrapper .line[data-v-7103effe]{flex:1;background-color:#a0a0a0;height:1px}.line-wrapper.vertical .line[data-v-7103effe]{width:1px}.line-wrapper label[data-v-7103effe]{padding:10px;background-color:rgba(255,255,255,.5);border-radius:10px}.line-wrapper label.start[data-v-7103effe]{padding-left:0}.line-wrapper label.end[data-v-7103effe]{padding-right:0}@media only screen and (max-width:600px){.line-wrapper label[data-v-7103effe]{font-size:10pt}}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-7103effe",false,undefined,!1,je,void 0,void 0),builder:Mn,builderForm:An,readOnly:Se({render:function(){var e,t,n,r=this,i=r.$createElement,o=r._self._c||i;return o("div",{staticClass:"line-wrapper",class:{vertical:"vertical"===r.widget.properties.dir}},[r.isShowLabel("start")?o("label",{class:(e={},e[r.widget.properties.labelPosition||"start"]=!0,e)},[r._v(r._s(r.label))]):r._e(),r._v(" "),o("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("center")?o("label",{class:(t={},t[r.widget.properties.labelPosition||"start"]=!0,t)},[r._v(r._s(r.label))]):r._e(),r._v(" "),o("div",{staticClass:"line"}),r._v(" "),r.isShowLabel("end")?o("label",{class:(n={},n[r.widget.properties.labelPosition||"start"]=!0,n)},[r._v(r._s(r.label))]):r._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-39a1748d_0",{source:".line-wrapper[data-v-39a1748d]{display:flex;flex-direction:row;align-items:center;padding:10px}.line-wrapper.vertical[data-v-39a1748d]{flex-direction:column}.line-wrapper .line[data-v-39a1748d]{flex:1;background-color:#a0a0a0;height:1px}.line-wrapper.vertical .line[data-v-39a1748d]{width:1px}.line-wrapper label[data-v-39a1748d]{padding:10px;background-color:rgba(255,255,255,.5);border-radius:10px}.line-wrapper label.start[data-v-39a1748d]{padding-left:0}.line-wrapper label.end[data-v-39a1748d]{padding-right:0}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-39a1748d",false,undefined,!1,je,void 0,void 0)},Dn=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.widget.properties.tagType,{tag:"component",staticClass:"text"},[n("input",{staticClass:"text-input",attrs:{type:"text"},domProps:{value:e.t("__label",e.widget.id)},on:{input:e.onTextChange}})])},staticRenderFns:[]},(function(e){e&&e("data-v-4c1be7c6_0",{source:".text-input[data-v-4c1be7c6]{font-size:inherit;font-family:inherit;font-weight:inherit;outline:0;border:none;width:100%;background-color:transparent}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t","getLocale","setMessage"],methods:{onTextChange:function(e){this.setMessage({id:this.$props.widget.id,locale:this.getLocale(),key:"__label",value:e.target.value})}}},"data-v-4c1be7c6",false,undefined,!1,je,void 0,void 0),Nn=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-wrapper"},[n("a",{staticClass:"tag-selection",class:{selected:"h1"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h1")}}},[e._v("H1")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h2"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h2")}}},[e._v("H2")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h3"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h3")}}},[e._v("H3")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h4"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h4")}}},[e._v("H4")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h5"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h5")}}},[e._v("H5")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"h6"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("h6")}}},[e._v("H6")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"p"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("p")}}},[e._v("Paragraph")]),e._v(" "),n("a",{staticClass:"tag-selection",class:{selected:"small"===e.widget.properties.tagType},on:{click:function(t){return e.setTagType("small")}}},[e._v("Small")])])},staticRenderFns:[]},(function(e){e&&e("data-v-79d8d6f2_0",{source:".control-wrapper[data-v-79d8d6f2]{display:flex;flex-direction:row;border-radius:8px;border:1px solid #e8e8e8;background-color:#fff;overflow:hidden}.tag-selection[data-v-79d8d6f2]{height:30px;min-width:40px;padding:0 5px;display:flex;align-items:center;justify-content:center;cursor:pointer}.tag-selection[data-v-79d8d6f2]:hover{background-color:#e8e8e8}.tag-selection.selected[data-v-79d8d6f2]{background-color:#03a9f4;color:#fff}",map:void 0,media:void 0})}),{props:{widget:Object,widgets:Object,widgetItems:Object,pageState:Object,setWidgetState:Function},inject:["updateWidget"],methods:{setTagType:function(e){this.widget.properties.tagType=e,this.updateWidget(this.widget)}}},"data-v-79d8d6f2",false,undefined,!1,je,void 0,void 0),Bn={alert:$e,header:Re,html:Le,pages:_n,question:kn,section:Wn,separator:Fn,text:{display:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"text"},[e._v(e._s(e.t("__label",e.widget.id)))])},staticRenderFns:[]},undefined,{props:{widget:Object},inject:["t"]},"data-v-333ed5e8",false,undefined,!1,void 0,void 0,void 0),builder:Dn,builderControl:Nn,readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"text"},[e._v(e._s(e.t("__label",e.widget.id)))])},staticRenderFns:[]},(function(e){e&&e("data-v-1687fd21_0",{source:".text[data-v-1687fd21]{padding:0 10px}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"]},"data-v-1687fd21",false,undefined,!1,je,void 0,void 0)}},qn=function(){function e(t){var n=t.display;s(this,e),this._display=n}return u(e,[{key:"display",get:function(){return this._display}}]),e}(),Vn=new qn({display:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("a",{staticClass:"anchor",style:{top:(e.properties.top||0)+"px"},attrs:{id:this.$props.properties.id}})},staticRenderFns:[]},(function(e){e&&e("data-v-4044acf0_0",{source:"a.anchor[data-v-4044acf0]{position:absolute;top:0;left:0}",map:void 0,media:void 0})}),{props:{wrapperRef:HTMLDivElement,properties:Object}},"data-v-4044acf0",false,undefined,!1,je,void 0,void 0)});
/*! @license is-dom-node v1.0.4

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/
function Hn(e){return"object"==typeof window.Node?e instanceof window.Node:null!==e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}
/*! @license is-dom-node-list v1.2.1

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/
/*! @license Tealight v0.3.6

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/
function Un(e,t){if(void 0===t&&(t=document),e instanceof Array)return e.filter(Hn);if(Hn(e))return[e];if(function(e){var t=Object.prototype.toString.call(e);return"object"==typeof window.NodeList?e instanceof window.NodeList:null!==e&&"object"==typeof e&&"number"==typeof e.length&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(t)&&(0===e.length||Hn(e[0]))}(e))return Array.prototype.slice.call(e);if("string"==typeof e)try{var n=t.querySelectorAll(e);return Array.prototype.slice.call(n)}catch(e){return[]}return[]}
/*! @license Rematrix v0.3.0

	Copyright 2018 Julian Lloyd.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	THE SOFTWARE.
*/function zn(e){if(e.constructor!==Array)throw new TypeError("Expected array.");if(16===e.length)return e;if(6===e.length){var t=Yn();return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}throw new RangeError("Expected array with either 6 or 16 values.")}function Yn(){for(var e=[],t=0;t<16;t++)t%5==0?e.push(1):e.push(0);return e}function Jn(e,t){for(var n=zn(e),r=zn(t),i=[],o=0;o<4;o++)for(var a=[n[o],n[o+4],n[o+8],n[o+12]],s=0;s<4;s++){var d=4*s,u=[r[d],r[d+1],r[d+2],r[d+3]],l=a[0]*u[0]+a[1]*u[1]+a[2]*u[2]+a[3]*u[3];i[o+d]=l}return i}function Kn(e){if("string"==typeof e){var t=e.match(/matrix(3d)?\(([^)]+)\)/);if(t)return zn(t[2].split(", ").map(parseFloat))}return Yn()}function Gn(e,t){var n=Yn();return n[0]=e,n[5]="number"==typeof t?t:e,n}
/*! @license miniraf v1.0.0

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/
var Qn,Xn=(Qn=Date.now(),function(e){var t=Date.now();t-Qn>16?(Qn=t,e(t)):setTimeout((function(){return Xn(e)}),0)}),Zn=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Xn,er={delay:0,distance:"0",duration:600,easing:"cubic-bezier(0.5, 0, 0, 1)",interval:0,opacity:0,origin:"bottom",rotate:{x:0,y:0,z:0},scale:1,cleanup:!1,container:document.documentElement,desktop:!0,mobile:!0,reset:!1,useDelay:"always",viewFactor:0,viewOffset:{top:0,right:0,bottom:0,left:0},afterReset:function(){},afterReveal:function(){},beforeReset:function(){},beforeReveal:function(){}};var tr={success:function(){document.documentElement.classList.add("sr"),document.body?document.body.style.height="100%":document.addEventListener("DOMContentLoaded",(function(){document.body.style.height="100%"}))},failure:function(){return document.documentElement.classList.remove("sr"),{clean:function(){},destroy:function(){},reveal:function(){},sync:function(){},get noop(){return!0}}}};function nr(e){return null!==e&&e instanceof Object&&(e.constructor===Object||"[object Object]"===Object.prototype.toString.call(e))}function rr(e,t){if(nr(e))return Object.keys(e).forEach((function(n){return t(e[n],n,e)}));if(e instanceof Array)return e.forEach((function(n,r){return t(n,r,e)}));throw new TypeError("Expected either an array or object literal.")}function ir(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(this.constructor.debug&&console){var r="%cScrollReveal: "+e;t.forEach((function(e){return r+="\n — "+e})),console.log(r,"color: #ea654b;")}}function or(){var e=this,t={active:[],stale:[]},n={active:[],stale:[]},r={active:[],stale:[]};try{rr(Un("[data-sr-id]"),(function(e){var n=parseInt(e.getAttribute("data-sr-id"));t.active.push(n)}))}catch(e){throw e}rr(this.store.elements,(function(e){-1===t.active.indexOf(e.id)&&t.stale.push(e.id)})),rr(t.stale,(function(t){return delete e.store.elements[t]})),rr(this.store.elements,(function(e){-1===r.active.indexOf(e.containerId)&&r.active.push(e.containerId),e.hasOwnProperty("sequence")&&-1===n.active.indexOf(e.sequence.id)&&n.active.push(e.sequence.id)})),rr(this.store.containers,(function(e){-1===r.active.indexOf(e.id)&&r.stale.push(e.id)})),rr(r.stale,(function(t){var n=e.store.containers[t].node;n.removeEventListener("scroll",e.delegate),n.removeEventListener("resize",e.delegate),delete e.store.containers[t]})),rr(this.store.sequences,(function(e){-1===n.active.indexOf(e.id)&&n.stale.push(e.id)})),rr(n.stale,(function(t){return delete e.store.sequences[t]}))}var ar=function(){var e={},t=document.documentElement.style;function n(n,r){if(void 0===r&&(r=t),n&&"string"==typeof n){if(e[n])return e[n];if("string"==typeof r[n])return e[n]=n;if("string"==typeof r["-webkit-"+n])return e[n]="-webkit-"+n;throw new RangeError('Unable to find "'+n+'" style property.')}throw new TypeError("Expected a string.")}return n.clearCache=function(){return e={}},n}();function sr(e){var t=window.getComputedStyle(e.node),n=t.position,r=e.config,i={},o=(e.node.getAttribute("style")||"").match(/[\w-]+\s*:\s*[^;]+\s*/gi)||[];i.computed=o?o.map((function(e){return e.trim()})).join("; ")+";":"",i.generated=o.some((function(e){return e.match(/visibility\s?:\s?visible/i)}))?i.computed:o.concat(["visibility: visible"]).map((function(e){return e.trim()})).join("; ")+";";var a,s,d,u=parseFloat(t.opacity),l=isNaN(parseFloat(r.opacity))?parseFloat(t.opacity):parseFloat(r.opacity),c={computed:u!==l?"opacity: "+u+";":"",generated:u!==l?"opacity: "+l+";":""},p=[];if(parseFloat(r.distance)){var f="top"===r.origin||"bottom"===r.origin?"Y":"X",h=r.distance;"top"!==r.origin&&"left"!==r.origin||(h=/^-/.test(h)?h.substr(1):"-"+h);var g=h.match(/(^-?\d+\.?\d?)|(em$|px$|%$)/g),v=g[0];switch(g[1]){case"em":h=parseInt(t.fontSize)*v;break;case"px":h=v;break;case"%":h="Y"===f?e.node.getBoundingClientRect().height*v/100:e.node.getBoundingClientRect().width*v/100;break;default:throw new RangeError("Unrecognized or missing distance unit.")}"Y"===f?p.push(function(e){var t=Yn();return t[13]=e,t}(h)):p.push(function(e){var t=Yn();return t[12]=e,t}(h))}r.rotate.x&&p.push((a=r.rotate.x,s=Math.PI/180*a,(d=Yn())[5]=d[10]=Math.cos(s),d[6]=d[9]=Math.sin(s),d[9]*=-1,d)),r.rotate.y&&p.push(function(e){var t=Math.PI/180*e,n=Yn();return n[0]=n[10]=Math.cos(t),n[2]=n[8]=Math.sin(t),n[2]*=-1,n}(r.rotate.y)),r.rotate.z&&p.push(function(e){var t=Math.PI/180*e,n=Yn();return n[0]=n[5]=Math.cos(t),n[1]=n[4]=Math.sin(t),n[4]*=-1,n}(r.rotate.z)),1!==r.scale&&(0===r.scale?p.push(Gn(2e-4)):p.push(Gn(r.scale)));var y={};if(p.length){y.property=ar("transform"),y.computed={raw:t[y.property],matrix:Kn(t[y.property])},p.unshift(y.computed.matrix);var b=p.reduce(Jn);y.generated={initial:y.property+": matrix3d("+b.join(", ")+");",final:y.property+": matrix3d("+y.computed.matrix.join(", ")+");"}}else y.generated={initial:"",final:""};var w={};if(c.generated||y.generated.initial){w.property=ar("transition"),w.computed=t[w.property],w.fragments=[];var m=r.delay,_=r.duration,x=r.easing;c.generated&&w.fragments.push({delayed:"opacity "+_/1e3+"s "+x+" "+m/1e3+"s",instant:"opacity "+_/1e3+"s "+x+" 0s"}),y.generated.initial&&w.fragments.push({delayed:y.property+" "+_/1e3+"s "+x+" "+m/1e3+"s",instant:y.property+" "+_/1e3+"s "+x+" 0s"}),w.computed&&!w.computed.match(/all 0s|none 0s/)&&w.fragments.unshift({delayed:w.computed,instant:w.computed});var C=w.fragments.reduce((function(e,t,n){return e.delayed+=0===n?t.delayed:", "+t.delayed,e.instant+=0===n?t.instant:", "+t.instant,e}),{delayed:"",instant:""});w.generated={delayed:w.property+": "+C.delayed+";",instant:w.property+": "+C.instant+";"}}else w.generated={delayed:"",instant:""};return{inline:i,opacity:c,position:n,transform:y,transition:w}}function dr(e,t){t.split(";").forEach((function(t){var n=t.split(":"),r=n[0],i=n.slice(1);r&&i&&(e.style[r.trim()]=i.join(":"))}))}function ur(e){var t,n=this;try{rr(Un(e),(function(e){var r=e.getAttribute("data-sr-id");if(null!==r){t=!0;var i=n.store.elements[r];i.callbackTimer&&window.clearTimeout(i.callbackTimer.clock),dr(i.node,i.styles.inline.generated),e.removeAttribute("data-sr-id"),delete n.store.elements[r]}}))}catch(e){return ir.call(this,"Clean failed.",e.message)}if(t)try{or.call(this)}catch(e){return ir.call(this,"Clean failed.",e.message)}}function lr(){var e=this;rr(this.store.elements,(function(e){dr(e.node,e.styles.inline.generated),e.node.removeAttribute("data-sr-id")})),rr(this.store.containers,(function(t){var n=t.node===document.documentElement?window:t.node;n.removeEventListener("scroll",e.delegate),n.removeEventListener("resize",e.delegate)})),this.store={containers:{},elements:{},history:[],sequences:{}}}function cr(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(nr(e))return rr(t,(function(t){rr(t,(function(t,n){nr(t)?(e[n]&&nr(e[n])||(e[n]={}),cr(e[n],t)):e[n]=t}))})),e;throw new TypeError("Target must be an object literal.")}function pr(e){return void 0===e&&(e=navigator.userAgent),/Android|iPhone|iPad|iPod/i.test(e)}var fr,hr=(fr=0,function(){return fr++});function gr(){var e=this;or.call(this),rr(this.store.elements,(function(e){var t=[e.styles.inline.generated];e.visible?(t.push(e.styles.opacity.computed),t.push(e.styles.transform.generated.final),e.revealed=!0):(t.push(e.styles.opacity.generated),t.push(e.styles.transform.generated.initial),e.revealed=!1),dr(e.node,t.filter((function(e){return""!==e})).join(" "))})),rr(this.store.containers,(function(t){var n=t.node===document.documentElement?window:t.node;n.addEventListener("scroll",e.delegate),n.addEventListener("resize",e.delegate)})),this.delegate(),this.initTimeout=null}function vr(e,t){void 0===t&&(t={});var n=t.pristine||this.pristine,r="always"===e.config.useDelay||"onload"===e.config.useDelay&&n||"once"===e.config.useDelay&&!e.seen,i=e.visible&&!e.revealed,o=!e.visible&&e.revealed&&e.config.reset;return t.reveal||i?yr.call(this,e,r):t.reset||o?br.call(this,e):void 0}function yr(e,t){var n=[e.styles.inline.generated,e.styles.opacity.computed,e.styles.transform.generated.final];t?n.push(e.styles.transition.generated.delayed):n.push(e.styles.transition.generated.instant),e.revealed=e.seen=!0,dr(e.node,n.filter((function(e){return""!==e})).join(" ")),wr.call(this,e,t)}function br(e){var t=[e.styles.inline.generated,e.styles.opacity.generated,e.styles.transform.generated.initial,e.styles.transition.generated.instant];e.revealed=!1,dr(e.node,t.filter((function(e){return""!==e})).join(" ")),wr.call(this,e)}function wr(e,t){var n=this,r=t?e.config.duration+e.config.delay:e.config.duration,i=e.revealed?e.config.beforeReveal:e.config.beforeReset,o=e.revealed?e.config.afterReveal:e.config.afterReset,a=0;e.callbackTimer&&(a=Date.now()-e.callbackTimer.start,window.clearTimeout(e.callbackTimer.clock)),i(e.node),e.callbackTimer={start:Date.now(),clock:window.setTimeout((function(){o(e.node),e.callbackTimer=null,e.revealed&&!e.config.reset&&e.config.cleanup&&ur.call(n,e.node)}),r-a)}}function mr(e,t){if(void 0===t&&(t=this.pristine),!e.visible&&e.revealed&&e.config.reset)return vr.call(this,e,{reset:!0});var n=this.store.sequences[e.sequence.id],r=e.sequence.index;if(n){var i=new xr(n,"visible",this.store),o=new xr(n,"revealed",this.store);if(n.models={visible:i,revealed:o},!o.body.length){var a=n.members[i.body[0]],s=this.store.elements[a];if(s)return Cr.call(this,n,i.body[0],-1,t),Cr.call(this,n,i.body[0],1,t),vr.call(this,s,{reveal:!0,pristine:t})}if(!n.blocked.head&&r===[].concat(o.head).pop()&&r>=[].concat(i.body).shift())return Cr.call(this,n,r,-1,t),vr.call(this,e,{reveal:!0,pristine:t});if(!n.blocked.foot&&r===[].concat(o.foot).shift()&&r<=[].concat(i.body).pop())return Cr.call(this,n,r,1,t),vr.call(this,e,{reveal:!0,pristine:t})}}function _r(e){var t=Math.abs(e);if(isNaN(t))throw new RangeError("Invalid sequence interval.");this.id=hr(),this.interval=Math.max(t,16),this.members=[],this.models={},this.blocked={head:!1,foot:!1}}function xr(e,t,n){var r=this;this.head=[],this.body=[],this.foot=[],rr(e.members,(function(e,i){var o=n.elements[e];o&&o[t]&&r.body.push(i)})),this.body.length&&rr(e.members,(function(e,i){var o=n.elements[e];o&&!o[t]&&(i<r.body[0]?r.head.push(i):r.foot.push(i))}))}function Cr(e,t,n,r){var i=this,o=["head",null,"foot"][1+n],a=e.members[t+n],s=this.store.elements[a];e.blocked[o]=!0,setTimeout((function(){e.blocked[o]=!1,s&&mr.call(i,s,r)}),e.interval)}function Sr(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=!1);var i,o=[],a=t.interval||er.interval;try{a&&(i=new _r(a));var s=Un(e);if(!s.length)throw new Error("Invalid reveal target.");var d=s.reduce((function(e,n){var a={},s=n.getAttribute("data-sr-id");s?(cr(a,r.store.elements[s]),dr(a.node,a.styles.inline.computed)):(a.id=hr(),a.node=n,a.seen=!1,a.revealed=!1,a.visible=!1);var d=cr({},a.config||r.defaults,t);if(!d.mobile&&pr()||!d.desktop&&!pr())return s&&ur.call(r,a),e;var u,l=Un(d.container)[0];if(!l)throw new Error("Invalid container.");return l.contains(n)?(u=function(e){var t=[],n=arguments.length-1;for(;n-- >0;)t[n]=arguments[n+1];var r=null;return rr(t,(function(t){rr(t,(function(t){null===r&&t.node===e&&(r=t.id)}))})),r}(l,o,r.store.containers),null===u&&(u=hr(),o.push({id:u,node:l})),a.config=d,a.containerId=u,a.styles=sr(a),i&&(a.sequence={id:i.id,index:i.members.length},i.members.push(a.id)),e.push(a),e):e}),[]);rr(d,(function(e){r.store.elements[e.id]=e,e.node.setAttribute("data-sr-id",e.id)}))}catch(e){return ir.call(this,"Reveal failed.",e.message)}rr(o,(function(e){r.store.containers[e.id]={id:e.id,node:e.node}})),i&&(this.store.sequences[i.id]=i),!0!==n&&(this.store.history.push({target:e,options:t}),this.initTimeout&&window.clearTimeout(this.initTimeout),this.initTimeout=window.setTimeout(gr.bind(this),0))}function Or(){var e=this;rr(this.store.history,(function(t){Sr.call(e,t.target,t.options,!0)})),gr.call(this)}var jr=Math.sign||function(e){return(e>0)-(e<0)||+e};function kr(e,t){var n=t?e.node.clientHeight:e.node.offsetHeight,r=t?e.node.clientWidth:e.node.offsetWidth,i=0,o=0,a=e.node;do{isNaN(a.offsetTop)||(i+=a.offsetTop),isNaN(a.offsetLeft)||(o+=a.offsetLeft),a=a.offsetParent}while(a);return{bounds:{top:i,right:o+r,bottom:i+n,left:o},height:n,width:r}}function Pr(e){var t,n;return e.node===document.documentElement?(t=window.pageYOffset,n=window.pageXOffset):(t=e.node.scrollTop,n=e.node.scrollLeft),{top:t,left:n}}function Ir(e){void 0===e&&(e={});var t=this.store.containers[e.containerId];if(t){var n=Math.max(0,Math.min(1,e.config.viewFactor)),r=e.config.viewOffset,i=e.geometry.bounds.top+e.geometry.height*n,o=e.geometry.bounds.right-e.geometry.width*n,a=e.geometry.bounds.bottom-e.geometry.height*n,s=e.geometry.bounds.left+e.geometry.width*n,d=t.geometry.bounds.top+t.scroll.top+r.top,u=t.geometry.bounds.right+t.scroll.left-r.right,l=t.geometry.bounds.bottom+t.scroll.top-r.bottom,c=t.geometry.bounds.left+t.scroll.left+r.left;return i<l&&o>c&&a>d&&s<u||"fixed"===e.styles.position}}function $r(e,t){var n=this;void 0===e&&(e={type:"init"}),void 0===t&&(t=this.store.elements),Zn((function(){var r="init"===e.type||"resize"===e.type;rr(n.store.containers,(function(e){r&&(e.geometry=kr.call(n,e,!0));var t=Pr.call(n,e);e.scroll&&(e.direction={x:jr(t.left-e.scroll.left),y:jr(t.top-e.scroll.top)}),e.scroll=t})),rr(t,(function(e){(r||void 0===e.geometry)&&(e.geometry=kr.call(n,e)),e.visible=Ir.call(n,e)})),rr(t,(function(e){e.sequence?mr.call(n,e):vr.call(n,e)})),n.pristine=!1}))}var Er,Tr,Rr,Wr,Lr,Mr,Ar,Fr;function Dr(e){var t;if(void 0===e&&(e={}),void 0===this||Object.getPrototypeOf(this)!==Dr.prototype)return new Dr(e);if(!Dr.isSupported())return ir.call(this,"Instantiation failed.","This browser is not supported."),tr.failure();try{t=cr({},Mr||er,e)}catch(e){return ir.call(this,"Invalid configuration.",e.message),tr.failure()}try{if(!Un(t.container)[0])throw new Error("Invalid container.")}catch(e){return ir.call(this,e.message),tr.failure()}return!(Mr=t).mobile&&pr()||!Mr.desktop&&!pr()?(ir.call(this,"This device is disabled.","desktop: "+Mr.desktop,"mobile: "+Mr.mobile),tr.failure()):(tr.success(),this.store={containers:{},elements:{},history:[],sequences:{}},this.pristine=!0,Er=Er||$r.bind(this),Tr=Tr||lr.bind(this),Rr=Rr||Sr.bind(this),Wr=Wr||ur.bind(this),Lr=Lr||Or.bind(this),Object.defineProperty(this,"delegate",{get:function(){return Er}}),Object.defineProperty(this,"destroy",{get:function(){return Tr}}),Object.defineProperty(this,"reveal",{get:function(){return Rr}}),Object.defineProperty(this,"clean",{get:function(){return Wr}}),Object.defineProperty(this,"sync",{get:function(){return Lr}}),Object.defineProperty(this,"defaults",{get:function(){return Mr}}),Object.defineProperty(this,"version",{get:function(){return"4.0.9"}}),Object.defineProperty(this,"noop",{get:function(){return!1}}),Fr||(Fr=this))}Dr.isSupported=function(){return function(){var e=document.documentElement.style;return"transform"in e||"WebkitTransform"in e}()&&function(){var e=document.documentElement.style;return"transition"in e||"WebkitTransition"in e}()},Object.defineProperty(Dr,"debug",{get:function(){return Ar||!1},set:function(e){return Ar="boolean"==typeof e?e:Ar}}),Dr();var Nr={props:{wrapperRef:HTMLDivElement,properties:Object},data:function(){return{initialized:!1}},unmounted:function(){this.$props.wrapperRef&&Dr().clean(this.$props.wrapperRef)},watch:{wrapperRef:{handler:function(){!this.$data.initialized&&this.$props.wrapperRef&&(this.$data.initialized=!0,Dr(this.$props.properties).reveal(this.$props.wrapperRef))},immediate:!0}}},Br=Nr,qr=Se({render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},undefined,Br,undefined,false,undefined,!1,void 0,void 0,void 0),Vr=qr,Hr=new qn({display:Vr}),Ur={anchor:Vn,reveal:Hr},zr=u((function e(t){var n=t.builder,r=t.display,i=t.readOnly;s(this,e),this.builder=n,this.display=r,this.readOnly=i,this.tags=[]})),Yr={props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],data:function(){return{options:[]}},watch:l({},"properties.options",{handler:function(){var e=this;this.$data.options=this.$props.properties.options.map((function(t){return{value:t.value,label:e.t(t.labelKey,e.$props.widget.id)}}))},immediate:!0}),computed:{selectedValue:function(){var e=this;return this.$data.options.find((function(t){return t.value===e.$props.value}))}},methods:{onSelectChange:function(e){this.$props.onChange(e)}}},Jr=Yr,Kr=function(e){e&&e("data-v-531591b8_0",{source:".button-group-wrapper[data-v-531591b8]{display:inline-flex;flex-direction:row;border:1px solid #000;border-radius:8px;overflow:hidden}button[data-v-531591b8]{border:1px solid transparent;cursor:pointer;background-color:#fff}button[data-v-531591b8]:not(.isLast){border-right-color:#000}button.selected[data-v-531591b8]{background-color:#03a9f4;color:#fff}",map:void 0,media:void 0})},Gr=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"button-group-wrapper"},e._l(e.options,(function(t,r){return n("button",{key:t.value,class:{isLast:r===e.options.length-1,selected:e.value===t.value},on:{click:function(){return e.onSelectChange(t.value)}}},[e._v("\n    "+e._s(t.label)+"\n  ")])})),0)},staticRenderFns:[]},Kr,Jr,"data-v-531591b8",false,undefined,!1,je,void 0,void 0),Qr=Gr,Xr={props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],data:function(){return{translatedLabel:""}},methods:{getLabelByValue:function(e){var t;return this.t((null===(t=this.$props.properties.options.find((function(t){return t.value===e})))||void 0===t?void 0:t.labelKey)||"",this.$props.widget.id)}},watch:{value:{handler:function(e){this.$data.translatedLabel=this.getLabelByValue(e)},immediate:!0}}},Zr=Xr,ei=new zr({display:Qr,readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.translatedLabel)+"\n")])},staticRenderFns:[]},undefined,Zr,undefined,false,undefined,!1,void 0,void 0,void 0)}),ti=new zr({builder:Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[n("input",{attrs:{type:"checkbox",name:e.widget.id},domProps:{checked:e.value},on:{click:e.onToggle}}),e._v("\n    "+e._s(e.t("__checkboxLabel",e.widget.id))+"\n  ")])])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:Boolean},inject:["t"],methods:{onToggle:function(e){var t,n;null===(t=(n=this.$props).onChange)||void 0===t||t.call(n,e.target.checked)}}},undefined,false,undefined,!1,void 0,void 0,void 0),display:Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[n("input",{attrs:{type:"checkbox",name:e.widget.id},domProps:{checked:e.value},on:{click:e.onToggle}}),e._v("\n    "+e._s(e.t("__checkboxLabel",e.widget.id))+"\n  ")])])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:Boolean},inject:["t"],methods:{onToggle:function(e){var t,n;null===(t=(n=this.$props).onChange)||void 0===t||t.call(n,e.target.checked)}}},undefined,false,undefined,!1,void 0,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(!!e.value)+"\n")])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:Boolean},inject:["t"]},undefined,false,undefined,!1,void 0,void 0,void 0)}),ni=ot((function(e,t){e.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",d="week",u="month",l="quarter",c="year",p="date",f="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},b={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),o=n-i<0,a=t.clone().add(r+(o?-1:1),u);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:c,w:d,d:s,D:p,h:a,m:o,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",m={};m[w]=v;var _=function(e){return e instanceof O},x=function e(t,n,r){var i;if(!t)return w;if("string"==typeof t){var o=t.toLowerCase();m[o]&&(i=o),n&&(m[o]=n,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var s=t.name;m[s]=t,i=s}return!r&&i&&(w=i),i||!r&&w},C=function(e,t){if(_(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new O(n)},S=b;S.l=x,S.i=_,S.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function v(e){this.$L=x(e.locale,null,!0),this.parse(e)}var y=v.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return S},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(e,t){var n=C(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return C(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<C(e)},y.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!S.u(t)||t,l=S.p(e),f=function(e,t){var i=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},h=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,v=this.$M,y=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case c:return r?f(1,0):f(31,11);case u:return r?f(1,v):f(0,v+1);case d:var w=this.$locale().weekStart||0,m=(g<w?g+7:g)-w;return f(r?y-m:y+(6-m),v);case s:case p:return h(b+"Hours",0);case a:return h(b+"Minutes",1);case o:return h(b+"Seconds",2);case i:return h(b+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,d=S.p(e),l="set"+(this.$u?"UTC":""),f=(n={},n[s]=l+"Date",n[p]=l+"Date",n[u]=l+"Month",n[c]=l+"FullYear",n[a]=l+"Hours",n[o]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[d],h=d===s?this.$D+(t-this.$W):t;if(d===u||d===c){var g=this.clone().set(p,1);g.$d[f](h),g.init(),this.$d=g.set(p,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[S.p(e)]()},y.add=function(r,l){var p,f=this;r=Number(r);var h=S.p(l),g=function(e){var t=C(f);return S.w(t.date(t.date()+Math.round(e*r)),f)};if(h===u)return this.set(u,this.$M+r);if(h===c)return this.set(c,this.$y+r);if(h===s)return g(1);if(h===d)return g(7);var v=(p={},p[o]=t,p[a]=n,p[i]=e,p)[h]||1,y=this.$d.getTime()+r*v;return S.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),o=this.$H,a=this.$m,s=this.$M,d=n.weekdays,u=n.months,l=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},c=function(e){return S.s(o%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:S.s(s+1,2,"0"),MMM:l(n.monthsShort,s,u,3),MMMM:l(u,s),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,d,2),ddd:l(n.weekdaysShort,this.$W,d,3),dddd:d[this.$W],H:String(o),HH:S.s(o,2,"0"),h:c(1),hh:c(2),a:p(o,a,!0),A:p(o,a,!1),m:String(a),mm:S.s(a,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:i};return r.replace(g,(function(e,t){return t||h[e]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,p,f){var h,g=S.p(p),v=C(r),y=(v.utcOffset()-this.utcOffset())*t,b=this-v,w=S.m(this,v);return w=(h={},h[c]=w/12,h[u]=w,h[l]=w/3,h[d]=(b-y)/6048e5,h[s]=(b-y)/864e5,h[a]=b/n,h[o]=b/t,h[i]=b/e,h)[g]||b,f?w:S.a(w)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return m[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=x(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return S.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),j=O.prototype;return C.prototype=j,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",u],["$y",c],["$D",p]].forEach((function(e){j[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,O,C),e.$i=!0),C},C.locale=x,C.isDayjs=_,C.unix=function(e){return C(1e3*e)},C.en=m[w],C.Ls=m,C.p={},C}()})),ri=function(e){if(e)return e.toLocaleString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit"})},ii=function(e){if(e){if(e instanceof Date)return e;var t=Date.parse(e);return isNaN(t)?/^Date.now(\(\))*$/.test(e)||/^new Date(\(\))*$/.test(e)?new Date:/(^dayjs|^[\w]+\([^\)]*\))/.test(e)?e.split(".").reduce((function(e,t){var n,r=t.match(/([\w]+)\(([^\)]*)\)/);return r?"dayjs"===r[1]?r[2]?ni(r[2]):e:(n=e)[r[1]].apply(n,w(r[2].split(/\s*,\s*/).map((function(e){var t=parseFloat(e);return isNaN(t)?e.replaceAll(/[\'\"]+/g,""):t})))):e}),ni()).toDate():void 0:new Date(t)}},oi=new zr({display:Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{attrs:{type:"date",min:e.minDate,max:e.maxDate},domProps:{value:e.value||e.defaultDate},on:{change:e.onDateChange}})])},staticRenderFns:[]},(function(e){e&&e("data-v-5a5d677c_0",{source:".radio-item[data-v-5a5d677c]{margin-right:10px}",map:void 0,media:void 0})}),{props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],created:function(){this.$props.value||this.$props.onChange(this.$data.defaultDate)},data:function(){return{defaultDate:ri(ii(this.$props.properties.defaultDate)),minDate:ri(ii(this.$props.properties.minDate)),maxDate:ri(ii(this.$props.properties.maxDate))}},methods:{onDateChange:function(e){this.$props.onChange(e.target.value)}}},"data-v-5a5d677c",false,undefined,!1,je,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.value)+"\n")])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],computed:{label:function(){var e=this,t=this.$props.widget.properties.controlProperties.options.find((function(t){return t.value===e.$props.value}));return null!=t&&t.labelKey?this.t(t.labelKey,this.$props.widget.id):""}}},undefined,false,undefined,!1,void 0,void 0,void 0)}),ai=new zr({display:Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("select",{domProps:{value:e.value||""},on:{change:e.onSelectChange}},[n("option",{attrs:{value:"",disabled:""}},[e._v(e._s(e.t("__placeholder",e.widget.id)))]),e._v(" "),e._l(e.options,(function(t){return n("option",{key:t.value,domProps:{value:t.value,selected:e.value===t.value}},[e._v("\n      "+e._s(t.label)+"\n    ")])}))],2)])},staticRenderFns:[]},(function(e){e&&e("data-v-2bf2f5b8_0",{source:".radio-item[data-v-2bf2f5b8]{margin-right:10px}",map:void 0,media:void 0})}),{props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],data:function(){return{options:[]}},watch:l({},"properties.options",{handler:function(){var e=this;this.$data.options=this.$props.properties.options.map((function(t){return{value:t.value,label:e.t(t.labelKey,e.$props.widget.id)}}))},immediate:!0}),computed:{selectedValue:function(){var e=this;return this.$data.options.find((function(t){return t.value===e.$props.value}))}},methods:{onSelectChange:function(e){this.$props.onChange(e.target.value)}}},"data-v-2bf2f5b8",false,undefined,!1,je,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.translatedLabel)+"\n")])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],data:function(){return{translatedLabel:""}},methods:{getLabelByValue:function(e){var t;return this.t((null===(t=this.$props.properties.options.find((function(t){return t.value===e})))||void 0===t?void 0:t.labelKey)||"",this.$props.widget.id)}},watch:{value:{handler:function(e){this.$data.translatedLabel=this.getLabelByValue(e)},immediate:!0}}},undefined,false,undefined,!1,void 0,void 0,void 0)}),si=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:function(){return e.changeValue(e.numValue-e.step)}}},[e._v("-")]),e._v(" "),n("input",{attrs:{type:"number",step:e.step},domProps:{value:e.numValue},on:{keyup:function(t){return e.changeValue(t.target.value)}}}),e._v(" "),n("button",{on:{click:function(){return e.changeValue(e.numValue+e.step)}}},[e._v("+")])])},staticRenderFns:[]},(function(e){e&&e("data-v-5d4490d4_0",{source:"input[data-v-5d4490d4]::-webkit-inner-spin-button,input[data-v-5d4490d4]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}",map:void 0,media:void 0})}),{props:{properties:Object,value:Number,onChange:Function},created:function(){var e;void 0===this.$props.value&&void 0!==(null===(e=this.$props.properties)||void 0===e?void 0:e.default)&&this.changeValue(this.$props.properties.default,!0)},computed:{step:function(){return this.$props.properties.step||1},numValue:function(){var e,t;return void 0!==this.$props.value?this.$props.value:void 0!==(null===(e=this.$props.properties)||void 0===e?void 0:e.default)?this.$props.properties.default:void 0!==(null===(t=this.$props.properties)||void 0===t?void 0:t.min)?this.$props.properties.min:0}},methods:{changeValue:function(e,t){var n,r,i,o,a,s;if(!/^[^0-9]+$/.test(e.toString())){var d=parseInt(e.toString(),10);void 0!==(null===(n=this.$props.properties)||void 0===n?void 0:n.min)&&d<(null===(r=this.$props.properties)||void 0===r?void 0:r.min)&&(d=this.$props.properties.min),void 0!==(null===(i=this.$props.properties)||void 0===i?void 0:i.max)&&d>(null===(o=this.$props.properties)||void 0===o?void 0:o.max)&&(d=this.$props.properties.max),null===(a=(s=this.$props).onChange)||void 0===a||a.call(s,d,t)}}}},"data-v-5d4490d4",false,undefined,!1,je,void 0,void 0),di=new zr({builder:si,display:si,readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.value||e.widget.properties.controlProperties.default)+"\n")])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:Number},inject:["t"]},undefined,false,undefined,!1,void 0,void 0,void 0)}),ui=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.properties.options,(function(t){return n("label",{key:t.value,staticClass:"radio-item"},[n("input",{attrs:{type:"radio",name:e.widget.id},domProps:{checked:e.value===t.value,value:t.value},on:{change:e.onSelect}}),e._v("\n    "+e._s(e.t(t.labelKey,e.widget.id))+"\n  ")])})),0)},staticRenderFns:[]},(function(e){e&&e("data-v-4b1138df_0",{source:".radio-item[data-v-4b1138df]{margin-right:10px}",map:void 0,media:void 0})}),{props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],methods:{onSelect:function(e){this.$props.onChange(e.target.value)}}},"data-v-4b1138df",false,undefined,!1,je,void 0,void 0),li={buttonGroup:ei,checkbox:ti,datePicker:oi,dropdown:ai,numberPicker:di,radio:new zr({builder:ui,display:ui,readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.label)+"\n")])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],computed:{label:function(){var e=this,t=this.$props.widget.properties.controlProperties.options.find((function(t){return t.value===e.$props.value}));return null!=t&&t.labelKey?this.t(t.labelKey,this.$props.widget.id):""}}},undefined,false,undefined,!1,void 0,void 0,void 0)}),text:new zr({display:Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.properties.multiline?e._e():n("input",{attrs:{type:"text"},domProps:{value:e.value},on:{input:e.onTextChange}}),e._v(" "),e.properties.multiline?n("textarea",{domProps:{value:e.value},on:{input:e.onTextChange}}):e._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-abfcf24a_0",{source:"input[data-v-abfcf24a]::-webkit-inner-spin-button,input[data-v-abfcf24a]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}",map:void 0,media:void 0})}),{props:{properties:Object,value:String,onChange:Function},methods:{onTextChange:function(e){this.$props.onChange(e.target.value)}}},"data-v-abfcf24a",false,undefined,!1,je,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.value||e.widget.properties.controlProperties.default)+"\n")])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:Number},inject:["t"]},undefined,false,undefined,!1,void 0,void 0,void 0)})},ci=function(){function e(t){var n=t.widgetState,r=t.interactiveState,i=t.widgetCodeToIdMap,o=t.reflexCodeToIdsMap,a=t.widgetIdToCodeMap;s(this,e),this._widgetState=n||{},this._interactiveState=r||{},this._widgetCodeToIdMap=i||{},this._reflexCodeToIdsMap=o||{},this._widgetIdToCodeMap=a||{}}return u(e,[{key:"interactiveState",get:function(){return this._interactiveState}},{key:"widgetState",get:function(){return this._widgetState}},{key:"widgetCodeToIdMap",get:function(){return this._widgetCodeToIdMap}},{key:"reflexCodeToIdsMap",get:function(){return this._reflexCodeToIdsMap}},{key:"widgetIdToCodeMap",get:function(){return this._widgetIdToCodeMap}},{key:"getWidgetIdByCode",value:function(e){return this._widgetCodeToIdMap[e]}},{key:"getWidgetCodeById",value:function(e){return this._widgetIdToCodeMap[e]}},{key:"onUpdate",value:function(){}},{key:"getWidgetState",value:function(e,t){var n;return t?null===(n=this._widgetState[e])||void 0===n?void 0:n[t]:this._widgetState[e]}},{key:"setWidgetState",value:function(e,t,n){var r;(this._widgetState[e]||(this._widgetState[e]={}),void 0===n)?null===(r=this._widgetState[e])||void 0===r||delete r[t]:this._widgetState[e][t]=n}},{key:"clearWidgetState",value:function(e,t){this.setWidgetState(e,t)}},{key:"registerWidgetCode",value:function(e,t){this._widgetCodeToIdMap[e]=t,this._widgetIdToCodeMap[t]=e,this.setWidgetState(t,"code",e)}},{key:"unregisterWidgetCode",value:function(e){delete this._widgetCodeToIdMap[e]}},{key:"getReflexWidgetIdsByCode",value:function(e){return this._reflexCodeToIdsMap[e]||[]}},{key:"registerReflexWatch",value:function(e,t){var n=this;t.forEach((function(t){n._reflexCodeToIdsMap[t]=w(new Set([].concat(w(n._reflexCodeToIdsMap[t]||[]),[e])))}))}},{key:"unregisterReflexWatch",value:function(e,t){var n=this;t.forEach((function(t){n._reflexCodeToIdsMap[t]=n._reflexCodeToIdsMap[t].filter((function(t){return t!==e}))}))}}],[{key:"from",value:function(t){return new e(t instanceof e?{widgetState:t.widgetState,interactiveState:t.interactiveState,widgetCodeToIdMap:t.widgetCodeToIdMap,reflexCodeToIdsMap:t.reflexCodeToIdsMap,widgetIdToCodeMap:t.widgetIdToCodeMap}:{widgetState:t._widgetState,interactiveState:t._interactiveState,widgetCodeToIdMap:t._widgetCodeToIdMap,reflexCodeToIdsMap:t._reflexCodeToIdsMap,widgetIdToCodeMap:t._widgetIdToCodeMap})}}]),e}(),pi={},fi=function(e){pi[e]||(pi[e]={cached:[],result:null});for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?((n.length!==pi[e].cached.length||n.some((function(t,n){return t!==pi[e].cached[n]})))&&(pi[e].cached=n,Array.isArray(n[0])?pi[e].result=n.reduce((function(e,t){return[].concat(w(e),w(t))}),[]):pi[e].result=n.reduce((function(e,t){return i(i({},e),t)}),{})),pi[e].result):null},hi={components:{WidgetsLayout:it},props:{languages:Object,page:Object,onPageChange:Function,state:tt(ci).isRequired,onStateChange:Function,widgetControls:Object,questionControls:Object,plugins:et(nt({widgetControls:Object,widgetEffectControls:Object,questionControls:Object})),view:String,configs:nt({widgets:nt({disableInternalControls:Xe(),blacklist:et(Ze()),whitelist:et(Ze()),filters:Object}),questionControls:nt({disableInternalControls:Xe(),blacklist:et(Ze()),whitelist:et(Ze()),filters:Object})})},data:function(){return{widgetItems:{}}},computed:{widgetItemsArr:function(){return this.$props.page.widgets},combWidgetControls:function(){var e,t;return fi.apply(void 0,["widgetControls",null!==(e=this.$props.configs)&&void 0!==e&&e.widgets.disableInternalControls?{}:Bn].concat(w(null===(t=this.$props.plugins||[])||void 0===t?void 0:t.map((function(e){return e.widgetControls}))),[this.$props.widgetControls]))},combWidgetEffectControls:function(){var e,t;return fi.apply(void 0,["widgetEffectControls",null!==(e=this.$props.configs)&&void 0!==e&&e.widgetEffectControls.disableInternalControls?{}:Ur].concat(w(null===(t=this.$props.plugins||[])||void 0===t?void 0:t.map((function(e){return e.widgetEffectControls}))),[this.$props.widgetEffectControls]))},combQuestionControls:function(){var e,t;return fi.apply(void 0,["questionControls",null!==(e=this.$props.configs)&&void 0!==e&&e.questionControls.disableInternalControls?{}:li].concat(w(null===(t=this.$props.plugins||[])||void 0===t?void 0:t.map((function(e){return e.questionControls}))),[this.$props.questionControls]))},pageState:function(){return this.$props.state}},watch:{"page.widgets":{handler:function(e){var t=this;this.$data.widgetItems=e.reduce((function(e,n){var r,o=(null===(r=t.combWidgetControls[n.type])||void 0===r?void 0:r.widgetItem)||an;return e[n.id]=new o({widget:n,emitEvent:t.emitEvent,getState:function(){return t.$props.state},setState:function(e){t.$emit("onStateChange",e)},onUpdate:function(e){var n,r;null===(n=(r=t.$props).onPageChange)||void 0===n||n.call(r,i(i({},t.$props.page),{},{widgets:Object.values(i(i({},t.$data.widgetItems),{},l({},e.id,e)))}))}}),e}),{}),Object.values(this.$data.widgetItems).forEach((function(e){e.setWidgetItems(t.$data.widgetItems)}))},immediate:!0,deep:!0}},methods:{t:function(e,t){var n,r=this.languages;return t&&(r=t.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),r)),null===(n=r)||void 0===n?void 0:n[e]},emitEvent:function(e,t,n){this.$emit("event",{name:e,value:t,widget:n,pageState:this.pageState,widgetItems:this.$data.widgetItems})}},provide:function(){var e=this;return{getView:function(){return e.$props.view},t:this.t,languages:this.$props.languages,getPageState:function(){return e.$props.state},setPageState:function(t){e.$emit("onStateChange",t)},emitEvent:this.emitEvent,widgetEffectControls:this.combWidgetEffectControls,widgetControls:this.combWidgetControls,questionControls:this.combQuestionControls}}},gi=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-wrapper"},[n("widgets-layout",{attrs:{widgetControls:e.combWidgetControls,widgetItems:e.widgetItems}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-de0680da_0",{source:".main-wrapper[data-v-de0680da]{font-family:Arial,Helvetica,sans-serif}",map:void 0,media:void 0})}),hi,"data-v-de0680da",false,undefined,!1,je,void 0,void 0),vi=Se({render:function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"pane-wrapper",class:{isOpen:t.isOpen}},["left"===t.position?r("div",{staticClass:"pane-content-wrapper left",style:{width:t.paneWidth+"px"}},[t._t("pane-content")],2):t._e(),t._v(" "),r("div",{staticClass:"pane-outside-wrapper",style:(e={},e["left"===t.position?"marginLeft":"marginRight"]=t.paneWidth+"px",e)},[t._t("default")],2),t._v(" "),"right"===t.position?r("div",{staticClass:"pane-content-wrapper right",style:{width:t.paneWidth+"px"}},[t._t("pane-content")],2):t._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-67a6231c_0",{source:".pane-wrapper[data-v-67a6231c]{display:flex;flex-direction:row;align-items:stretch;min-height:100vh;position:relative}.pane-outside-wrapper[data-v-67a6231c]{flex:1;position:relative}.pane-content-wrapper[data-v-67a6231c]{position:absolute;top:0;height:100%;z-index:10;background-color:#fff;box-shadow:0 0 10px #c9c9c9}.pane-content-wrapper.left[data-v-67a6231c]{left:0}.pane-content-wrapper.right[data-v-67a6231c]{right:0}",map:void 0,media:void 0})}),{props:{position:{type:String,default:"left"},isOpen:{type:Boolean,default:!0},paneWidth:{type:Number,default:300}}},"data-v-67a6231c",false,undefined,!1,je,void 0,void 0),yi={components:{BuilderWidgetsLayout:vn,BuilderRightPane:Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pane",{attrs:{position:"right",isOpen:!0},scopedSlots:e._u([{key:"pane-content",fn:function(){return[e._v("\n    RIGHT: widget detail - layout, widget form, widget effects, styling,\n    etc...\n    "),e.selectedWidgetItem?n("p",[e._v("type: "+e._s(e.selectedWidgetItem.type))]):e._e(),e._v(" "),e.selectedWidgetItem&&e.widgetControls[e.selectedWidgetItem.type]?n(e.widgetControls[e.selectedWidgetItem.type].builderForm,{tag:"component",attrs:{widget:e.selectedWidgetItem}}):e._e(),e._v(" "),e.selectedWidgetItem?n("div",{staticClass:"effects-wrapper"},e._l(e.selectedWidgetItem.effects,(function(e){return n("div",{key:e.type})})),0):e._e()]},proxy:!0}])},[e._v(" "),[e._t("default")]],2)},staticRenderFns:[]},undefined,{components:{Pane:vi},props:{widgetItems:Object},inject:["widgetControls","getPageState"],computed:{selectedWidgetItem:function(){var e,t=this.getPageState();return t.interactiveState.selectedWidgetId?null===(e=this.$props.widgetItems)||void 0===e?void 0:e[t.interactiveState.selectedWidgetId]:null}}},"data-v-0b77ffb1",false,undefined,!1,void 0,void 0,void 0),BuilderLeftPane:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("pane",{attrs:{position:"left",isOpen:!0},scopedSlots:e._u([{key:"pane-content",fn:function(){return[e._v("\n    LEFT: locale setting, add widget list, current layout, etc...\n  ")]},proxy:!0}])},[e._v(" "),[e._t("default")]],2)},staticRenderFns:[]},undefined,{components:{Pane:vi}},"data-v-19f1004c",false,undefined,!1,void 0,void 0,void 0)},props:{languages:Object,locale:String,page:Object,onPageChange:Function,state:tt(ci).isRequired,onStateChange:Function,widgetControls:Object,questionControls:Object,plugins:et(nt({widgetControls:Object,widgetEffectControls:Object,questionControls:Object})),view:String,configs:nt({widgets:nt({disableInternalControls:Xe(),blacklist:et(Ze()),whitelist:et(Ze()),filters:Object}),questionControls:nt({disableInternalControls:Xe(),blacklist:et(Ze()),whitelist:et(Ze()),filters:Object})})},data:function(){return{widgetItems:{}}},computed:{widgetItemsArr:function(){return this.$props.page.widgets},combWidgetControls:function(){var e,t;return fi.apply(void 0,["widgetControls",null!==(e=this.$props.configs)&&void 0!==e&&e.widgets.disableInternalControls?{}:Bn].concat(w(null===(t=this.$props.plugins||[])||void 0===t?void 0:t.map((function(e){return e.widgetControls}))),[this.$props.widgetControls]))},combWidgetEffectControls:function(){var e,t;return fi.apply(void 0,["widgetEffectControls",null!==(e=this.$props.configs)&&void 0!==e&&e.widgetEffectControls.disableInternalControls?{}:Ur].concat(w(null===(t=this.$props.plugins||[])||void 0===t?void 0:t.map((function(e){return e.widgetEffectControls}))),[this.$props.widgetEffectControls]))},combQuestionControls:function(){var e,t;return fi.apply(void 0,["questionControls",null!==(e=this.$props.configs)&&void 0!==e&&e.questionControls.disableInternalControls?{}:li].concat(w(null===(t=this.$props.plugins||[])||void 0===t?void 0:t.map((function(e){return e.questionControls}))),[this.$props.questionControls]))},pageState:function(){return this.$props.state}},watch:{"page.widgets":{handler:function(e){var t=this;this.$data.widgetItems=e.reduce((function(e,n){var r,o=(null===(r=t.combWidgetControls[n.type])||void 0===r?void 0:r.widgetItem)||an;return e[n.id]=new o({widget:n,removeWidget:t.removeWidget,getState:function(){return t.$props.state},setState:function(e){t.$emit("onStateChange",e)},onUpdate:function(e){var n,r;null===(n=(r=t.$props).onPageChange)||void 0===n||n.call(r,i(i({},t.$props.page),{},{widgets:Object.values(i(i({},t.$data.widgetItems),{},l({},e.id,e)))}))}}),e}),{}),Object.values(this.$data.widgetItems).forEach((function(e){e.setWidgetItems(t.$data.widgetItems)}))},immediate:!0,deep:!0}},methods:{t:function(e,t){var n,r,i=this.languages;return t&&(i=t.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),i)),null===(n=i)||void 0===n||null===(r=n[this.$props.locale])||void 0===r?void 0:r.message[e]},setMessage:function(e){var t=e.id,n=e.locale,r=e.key,o=e.value,a=e.type,s=void 0===a?"pageItem":a,d=i({},this.$props.languages);d[t]||(d[t]={}),d[t][n]||(d[t][n]={id:"",refId:t,type:s,version:1,locale:n,message:{}}),d[t][n].message[r]=o,this.$emit("onLanguageChange",d)},updatePage:function(e){this.$emit("onPageChange",e)},updateWidget:function(e){this.$data.widgetItems[e.id]=e,this.updatePage(i(i({},this.$props.page),{},{widgets:Object.values(this.$data.widgetItems).map((function(e){return e.widget}))}))},removeWidget:function(e){var t=this;this.updatePage(i(i({},this.$props.page),{},{widgets:Object.keys(this.$data.widgetItems).reduce((function(n,r){return r===e?n:[].concat(w(n),[t.$data.widgetItems[r].widget])}),[])}));var n=i({},this.$props.languages);delete n[e],this.$emit("onLanguageChange",n)}},provide:function(){var e=this;return{getView:function(){return e.$props.view},t:this.t,getLocale:function(){return e.$props.locale},languages:this.$props.languages,setMessage:this.setMessage,updateWidget:this.updateWidget,removeWidget:this.removeWidget,getPageState:function(){return e.$props.state},setPageState:function(t){e.$emit("onStateChange",t)},widgetEffectControls:this.combWidgetEffectControls,widgetControls:this.combWidgetControls,questionControls:this.combQuestionControls}}},bi=Se({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-wrapper"},[n("builder-left-pane",{attrs:{widgetItems:e.widgetItems}},[n("builder-right-pane",{attrs:{widgetItems:e.widgetItems}},[n("div",{staticClass:"widgets-layout-wrapper"},[n("div",{staticClass:"widgets-layout-inner-wrapper"},[n("builder-widgets-layout",{attrs:{widgetControls:e.combWidgetControls,widgetItems:e.widgetItems}})],1)])])],1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-6c1b4c77_0",{source:".main-wrapper[data-v-6c1b4c77]{font-family:Arial,Helvetica,sans-serif}.widgets-layout-wrapper[data-v-6c1b4c77]{padding:30px;background-color:#eaedf5;height:100%;box-sizing:border-box}.widgets-layout-inner-wrapper[data-v-6c1b4c77]{background-color:#fff;position:relative;border-radius:4px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}",map:void 0,media:void 0})}),yi,"data-v-6c1b4c77",false,undefined,!1,je,void 0,void 0),wi=Object.freeze({__proto__:null,VuePage:gi,WidgetsLayout:it,WidgetView:rt,VuePageBuilder:bi,PageState:ci,WidgetEffectControl:qn,widgets:Bn,QuestionControl:zr,formatDateString:ri,getDateByPropertyValue:ii,questionControls:li}),mi=function(e){Object.entries(wi).forEach((function(t){var n=b(t,2),r=n[0],i=n[1];e.component(r,i)}))},_i=Object.freeze({__proto__:null,default:mi,VuePage:gi,WidgetsLayout:it,WidgetView:rt,VuePageBuilder:bi,PageState:ci,WidgetEffectControl:qn,widgets:Bn,QuestionControl:zr,formatDateString:ri,getDateByPropertyValue:ii,questionControls:li});return Object.entries(_i).forEach((function(e){var t=b(e,2),n=t[0],r=t[1];"default"!==n&&(mi[n]=r)})),mi}(vm);