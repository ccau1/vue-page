var VuePage=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,u,"next",e)}function u(e){o(a,n,i,s,u,"throw",e)}s(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=g(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},y.apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */()}function m(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x,O=function(e,t){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},O(e,t)};function j(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var S=[],k=function(){function e(e){this.active=!0,this.effects=[],this.cleanups=[],this.vm=e}return e.prototype.run=function(e){if(this.active)try{return this.on(),e()}finally{this.off()}},e.prototype.on=function(){this.active&&(S.push(this),x=this)},e.prototype.off=function(){this.active&&(S.pop(),x=S[S.length-1])},e.prototype.stop=function(){this.active&&(this.vm.$destroy(),this.effects.forEach((function(e){return e.stop()})),this.cleanups.forEach((function(e){return e()})),this.active=!1)},e}();!function(e){function t(t){void 0===t&&(t=!1);var r,n=void 0;return function(e){var t=$;$=!1;try{e()}finally{$=t}}((function(){n=Y(F())})),r=e.call(this,n)||this,t||function(e,t){var r;if((t=t||x)&&t.active)return void t.effects.push(e);var n=null===(r=L())||void 0===r?void 0:r.proxy;n&&n.$on("hook:destroyed",(function(){return e.stop()}))}(r),r}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(t,e)}(k);var P=void 0;try{var C=require("vue");C&&T(C)?P=C:C&&"default"in C&&T(C.default)&&(P=C.default)}catch(e){}var E=null,I=null,$=!0,R="__composition_api_installed__";function T(e){return e&&K(e)&&"Vue"===e.name}function F(){return E}function A(e){if($){var t=I;null==t||t.scope.off(),null==(I=e)||I.scope.on()}}function L(){return I}var W=new WeakMap;function M(e){if(W.has(e))return W.get(e);var t={proxy:e,update:e.$forceUpdate,type:e.$options,uid:e._uid,emit:e.$emit.bind(e),parent:null,root:null};!function(e){if(!e.scope){var t=new k(e.proxy);e.scope=t,e.proxy.$on("hook:destroyed",(function(){return t.stop()}))}e.scope}(t);return["data","props","attrs","refs","vnode","slots"].forEach((function(r){q(t,r,{get:function(){return e["$".concat(r)]}})})),q(t,"isMounted",{get:function(){return e._isMounted}}),q(t,"isUnmounted",{get:function(){return e._isDestroyed}}),q(t,"isDeactivated",{get:function(){return e._inactive}}),q(t,"emitted",{get:function(){return e._events}}),W.set(e,t),e.$parent&&(t.parent=M(e.$parent)),e.$root&&(t.root=M(e.$root)),t}function N(e){return"function"==typeof e&&/native code/.test(e.toString())}var B="undefined"!=typeof Symbol&&N(Symbol)&&"undefined"!=typeof Reflect&&N(Reflect.ownKeys),V=function(e){return e};function q(e,t,r){var n=r.get,i=r.set;Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:n||V,set:i||V})}function U(e,t,r,n){Object.defineProperty(e,t,{value:r,enumerable:!!n,writable:!0,configurable:!0})}function D(e,t){return Object.hasOwnProperty.call(e,t)}function H(e){return Array.isArray(e)}function J(e){return null!==e&&"object"==typeof e}function z(e){return"[object Object]"===function(e){return Object.prototype.toString.call(e)}(e)}function K(e){return"function"==typeof e}function Y(e,t){void 0===t&&(t={});var r=e.config.silent;e.config.silent=!0;var n=new e(t);return e.config.silent=r,n}function G(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(e.$scopedSlots[t])return e.$scopedSlots[t].apply(e,r)}}var X="composition-api.refKey",Q=new WeakMap,Z=new WeakMap;function ee(e,t,r){var n=F().util;n.warn;var i=n.defineReactive,o=e.__ob__;function a(){o&&J(r)&&!D(r,"__ob__")&&de(r)}if(H(e)){if(function(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)&&t<=4294967295}(t))return e.length=Math.max(e.length,t),e.splice(t,1,r),a(),r;if("length"===t&&r!==e.length)return e.length=r,null==o||o.dep.notify(),r}return t in e&&!(t in Object.prototype)?(e[t]=r,a(),r):e._isVue||o&&o.vmCount?r:o?(i(o.value,t,r),le(e,t,r),a(),o.dep.notify(),r):(e[t]=r,r)}var te=function(e){q(this,"value",{get:e.get,set:e.set})};function re(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=new te(e);r&&(n.effect=!0);var i=Object.seal(n);return t&&Z.set(i,!0),i}function ne(e){var t;if(ie(e))return e;var r=fe(((t={})[X]=e,t));return re({get:function(){return r[X]},set:function(e){return r[X]=e}})}function ie(e){return e instanceof te}function oe(e,t){t in e||ee(e,t,void 0);var r=e[t];return ie(r)?r:re({get:function(){return e[t]},set:function(r){return e[t]=r}})}function ae(e){var t;return Boolean(e&&D(e,"__ob__")&&"object"==typeof e.__ob__&&(null===(t=e.__ob__)||void 0===t?void 0:t.__raw__))}function se(e){var t;return Boolean(e&&D(e,"__ob__")&&"object"==typeof e.__ob__&&!(null===(t=e.__ob__)||void 0===t?void 0:t.__raw__))}function ue(e){if(!(!z(e)||ae(e)||H(e)||ie(e)||(t=e,r=F(),r&&t instanceof r)||Q.has(e))){var t,r;Q.set(e,!0);for(var n=Object.keys(e),i=0;i<n.length;i++)le(e,n[i])}}function le(e,t,r){if("__ob__"!==t&&!ae(e[t])){var n,i,o=Object.getOwnPropertyDescriptor(e,t);if(o){if(!1===o.configurable)return;n=o.get,i=o.set,n&&!i||2!==arguments.length||(r=e[t])}ue(r),q(e,t,{get:function(){var i=n?n.call(e):r;return t!==X&&ie(i)?i.value:i},set:function(o){n&&!i||(t!==X&&ie(r)&&!ie(o)?r.value=o:i?(i.call(e,o),r=o):r=o,ue(o))}})}}function ce(e){var t,r=E||P;r.observable?t=r.observable(e):t=Y(r,{data:{$$state:e}})._data.$$state;return D(t,"__ob__")||de(t),t}function de(e,t){var r,n;if(void 0===t&&(t=new Set),!t.has(e)&&!D(e,"__ob__")&&Object.isExtensible(e)){U(e,"__ob__",function(e){void 0===e&&(e={});return{value:e,dep:{notify:V,depend:V,addSub:V,removeSub:V}}}(e)),t.add(e);try{for(var i=j(Object.keys(e)),o=i.next();!o.done;o=i.next()){var a=e[o.value];(z(a)||H(a))&&!ae(a)&&Object.isExtensible(a)&&de(a,t)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}function fe(e){if(!J(e))return e;if(!z(e)&&!H(e)||ae(e)||!Object.isExtensible(e))return e;var t=ce(e);return ue(t),t}var pe={set:function(e,t,r){(e.__composition_api_state__=e.__composition_api_state__||{})[t]=r},get:function(e,t){return(e.__composition_api_state__||{})[t]}};function he(e){var t=pe.get(e,"rawBindings")||{};if(t&&Object.keys(t).length){for(var r=e.$refs,n=pe.get(e,"refs")||[],i=0;i<n.length;i++){var o=t[u=n[i]];!r[u]&&o&&ie(o)&&(o.value=null)}var a=Object.keys(r),s=[];for(i=0;i<a.length;i++){var u;o=t[u=a[i]];r[u]&&o&&ie(o)&&(o.value=r[u],s.push(u))}pe.set(e,"refs",s)}}function ve(e){for(var t=[e._vnode];t.length;){var r=t.pop();if(r.context&&he(r.context),r.children)for(var n=0;n<r.children.length;++n)t.push(r.children[n])}}function ge(e,t){var r,n;if(e){var i=pe.get(e,"attrBindings");if(i||t){if(!i){var o=fe({});i={ctx:t,data:o},pe.set(e,"attrBindings",i),q(t,"attrs",{get:function(){return null==i?void 0:i.data},set:function(){}})}var a=e.$attrs,s=function(t){D(i.data,t)||q(i.data,t,{get:function(){return e.$attrs[t]}})};try{for(var u=j(Object.keys(a)),l=u.next();!l.done;l=u.next()){s(l.value)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}}function ye(e,t){var r=e.$options._parentVnode;if(r){for(var n=pe.get(e,"slots")||[],i=function(e,t){var r;if(e){if(e._normalized)return e._normalized;for(var n in r={},e)e[n]&&"$"!==n[0]&&(r[n]=!0)}else r={};for(var n in t)n in r||(r[n]=!0);return r}(r.data.scopedSlots,e.$slots),o=0;o<n.length;o++){i[s=n[o]]||delete t[s]}var a=Object.keys(i);for(o=0;o<a.length;o++){var s;t[s=a[o]]||(t[s]=G(e,s))}pe.set(e,"slots",a)}}function be(e,t,r){var n=L();A(e);try{return t(e)}catch(e){if(!r)throw e;r(e)}finally{A(n)}}function me(e){function t(e,r){if(void 0===r&&(r=new Set),!r.has(e)&&z(e)&&!ie(e)&&!se(e)&&!ae(e)){var n=F().util.defineReactive;Object.keys(e).forEach((function(i){var o=e[i];n(e,i,o),o&&(r.add(o),t(o,r))}))}}function r(e,t){return void 0===t&&(t=new Map),t.has(e)?t.get(e):(t.set(e,!1),H(e)&&se(e)?(t.set(e,!0),!0):!(!z(e)||ae(e)||ie(e))&&Object.keys(e).some((function(n){return r(e[n],t)})))}e.mixin({beforeCreate:function(){var e=this,n=e.$options,i=n.setup,o=n.render;o&&(n.render=function(){for(var t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return be(M(e),(function(){return o.apply(t,r)}))});if(!i)return;if(!K(i))return;var a=n.data;n.data=function(){return function(e,n){void 0===n&&(n={});var i,o=e.$options.setup,a=function(e){var t={slots:{}},r=["emit"];return["root","parent","refs","listeners","isServer","ssrContext"].forEach((function(r){var n="$".concat(r);q(t,r,{get:function(){return e[n]},set:function(){}})})),ge(e,t),r.forEach((function(r){var n="$".concat(r);q(t,r,{get:function(){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e[n].apply(e,t)}}})})),t}(e),s=M(e);if(s.setupContext=a,U(n,"__ob__",function(){return ce({}).__ob__}()),ye(e,a.slots),be(s,(function(){i=o(n,a)})),!i)return;if(K(i)){var u=i;return void(e.$options.render=function(){return ye(e,a.slots),be(s,(function(){return u()}))})}if(J(i)){se(i)&&(i=function(e){if(!z(e))return e;var t={};for(var r in e)t[r]=oe(e,r);return t}(i)),pe.set(e,"rawBindings",i);var l=i;Object.keys(l).forEach((function(n){var i=l[n];if(!ie(i))if(se(i))H(i)&&(i=ne(i));else if(K(i)){var o=i;i=i.bind(e),Object.keys(o).forEach((function(e){i[e]=o[e]}))}else J(i)?r(i)&&t(i):i=ne(i);!function(e,t,r){var n=e.$options.props;t in e||n&&D(n,t)||(ie(r)?q(e,t,{get:function(){return r.value},set:function(e){r.value=e}}):q(e,t,{get:function(){return se(r)&&r.__ob__.dep.depend(),r},set:function(e){r=e}}))}(e,n,i)}))}}(e,e.$props),K(a)?a.call(e,e):a||{}}},mounted:function(){ve(this)},beforeUpdate:function(){ge(this)},updated:function(){ve(this)}})}function we(e,t){if(!e)return t;if(!t)return e;for(var r,n,i,o=B?Reflect.ownKeys(e):Object.keys(e),a=0;a<o.length;a++)"__ob__"!==(r=o[a])&&(n=t[r],i=e[r],D(t,r)?n!==i&&z(n)&&!ie(n)&&z(i)&&!ie(i)&&we(i,n):t[r]=i);return t}function _e(e){(function(e){return E&&D(e,R)})(e)||(e.config.optionMergeStrategies.setup=function(e,t){return function(r,n){return we(K(e)?e(r,n)||{}:void 0,K(t)?t(r,n)||{}:void 0)}},function(e){E=e,Object.defineProperty(e,R,{configurable:!0,writable:!0,value:!0})}(e),me(e))}var xe={install:function(e){return _e(e)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(xe);var Oe=l((function e(t){var r=t.form,n=t.display,i=t.readOnly;s(this,e),this.form=r,this.display=n,this.readOnly=i,this.tags=[]})),je={props:{properties:Object,widget:Object,onChange:Function,value:Object},inject:["t"],methods:{onSelect:function(e){this.$props.onChange({value:e.target.value})}}};function Se(e,t,r,n,i,o,a,s,u,l){"boolean"!=typeof a&&(u=s,s=a,a=!1);const c="function"==typeof r?r.options:r;let d;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),n&&(c._scopeId=n),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,u(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=d):t&&(d=a?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(c.functional){const e=c.render;c.render=function(t,r){return d.call(r),e(t,r)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,d):[d]}return r}const ke="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function Pe(e){return(e,t)=>function(e,t){const r=ke?t.media||"default":e,n=Ee[r]||(Ee[r]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);let r=t.source;if(t.map&&(r+="\n/*# sourceURL="+t.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),void 0===Ce&&(Ce=document.head||document.getElementsByTagName("head")[0]),Ce.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(r),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{const e=n.ids.size-1,t=document.createTextNode(r),i=n.element.childNodes;i[e]&&n.element.removeChild(i[e]),i.length?n.element.insertBefore(t,i[e]):n.element.appendChild(t)}}}(e,t)}let Ce;const Ee={};var Ie={radio:new Oe({form:Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.properties.options,(function(t){return r("label",{key:t.value,staticClass:"radio-item"},[r("input",{attrs:{type:"radio",name:e.widget.id},domProps:{checked:e.value&&e.value.value===t.value,value:t.value},on:{change:e.onSelect}}),e._v("\n    "+e._s(e.t(t.labelKey,e.widget.id))+"\n  ")])})),0)},staticRenderFns:[]},(function(e){e&&e("data-v-31ad933e_0",{source:".radio-item[data-v-31ad933e]{margin-right:10px}",map:void 0,media:void 0})}),je,"data-v-31ad933e",false,undefined,!1,Pe,void 0,void 0),display:Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.properties.options,(function(t){return r("label",{key:t.value,staticClass:"radio-item"},[r("input",{attrs:{type:"radio",name:e.widget.id},domProps:{checked:e.value===t.value,value:t.value},on:{change:e.onSelect}}),e._v("\n    "+e._s(e.t(t.labelKey,e.widget.id))+"\n  ")])})),0)},staticRenderFns:[]},(function(e){e&&e("data-v-4b1138df_0",{source:".radio-item[data-v-4b1138df]{margin-right:10px}",map:void 0,media:void 0})}),{props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],methods:{onSelect:function(e){this.$props.onChange(e.target.value)}}},"data-v-4b1138df",false,undefined,!1,Pe,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.label)+"\n")])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:String},inject:["t"],computed:{label:function(){var e=this,t=this.$props.widget.properties.controlProperties.options.find((function(t){return t.value===e.$props.value}));return null!=t&&t.labelKey?this.t(t.labelKey,this.$props.widget.id):""}}},undefined,false,undefined,!1,void 0,void 0,void 0)}),checkbox:new Oe({form:Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("label",[r("input",{attrs:{type:"checkbox",name:e.widget.id},domProps:{checked:e.value},on:{click:e.onToggle}}),e._v("\n    "+e._s(e.t("__checkboxLabel",e.widget.id))+"\n  ")])])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:Boolean},inject:["t"],methods:{onToggle:function(e){var t,r;null===(t=(r=this.$props).onChange)||void 0===t||t.call(r,e.target.checked)}}},undefined,false,undefined,!1,void 0,void 0,void 0),display:Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("label",[r("input",{attrs:{type:"checkbox",name:e.widget.id},domProps:{checked:e.value},on:{click:e.onToggle}}),e._v("\n    "+e._s(e.t("__checkboxLabel",e.widget.id))+"\n  ")])])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:Boolean},inject:["t"],methods:{onToggle:function(e){var t,r;null===(t=(r=this.$props).onChange)||void 0===t||t.call(r,e.target.checked)}}},undefined,false,undefined,!1,void 0,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(!!e.value)+"\n")])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:Boolean},inject:["t"]},undefined,false,undefined,!1,void 0,void 0,void 0)}),numberPicker:new Oe({form:Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("button",{on:{click:function(){return e.changeValue(-e.step)}}},[e._v("-")]),e._v(" "),r("input",{attrs:{type:"number",step:e.step},domProps:{value:e.numValue},on:{change:function(t){return e.changeValue(parseInt(t.target.value,10))}}}),e._v(" "),r("button",{on:{click:function(){return e.changeValue(e.step)}}},[e._v("+")])])},staticRenderFns:[]},(function(e){e&&e("data-v-b41eccf2_0",{source:"input[data-v-b41eccf2]::-webkit-inner-spin-button,input[data-v-b41eccf2]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}",map:void 0,media:void 0})}),{props:{properties:Object,value:Number,onChange:Function},computed:{step:function(){return this.$props.properties.step||1},numValue:function(){var e;return(null===(e=this.$props.value)||void 0===e?void 0:e.num)||this.$props.properties.default||this.$props.properties.min||0}},methods:{changeValue:function(e){var t,r,n,i,o,a,s=this.numValue+e;void 0!==(null===(t=this.$props.properties)||void 0===t?void 0:t.min)&&s<(null===(r=this.$props.properties)||void 0===r?void 0:r.min)&&(s=this.$props.properties.min),void 0!==(null===(n=this.$props.properties)||void 0===n?void 0:n.max)&&s>(null===(i=this.$props.properties)||void 0===i?void 0:i.max)&&(s=this.$props.properties.max),null===(o=(a=this.$props).onChange)||void 0===o||o.call(a,{num:s})}}},"data-v-b41eccf2",false,undefined,!1,Pe,void 0,void 0),display:Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("button",{on:{click:function(){return e.changeValue(e.numValue-e.step)}}},[e._v("-")]),e._v(" "),r("input",{attrs:{type:"number",step:e.step},domProps:{value:e.numValue},on:{keyup:function(t){return e.changeValue(t.target.value)}}}),e._v(" "),r("button",{on:{click:function(){return e.changeValue(e.numValue+e.step)}}},[e._v("+")])])},staticRenderFns:[]},(function(e){e&&e("data-v-1a52acb6_0",{source:"input[data-v-1a52acb6]::-webkit-inner-spin-button,input[data-v-1a52acb6]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}",map:void 0,media:void 0})}),{props:{properties:Object,value:Number,onChange:Function},created:function(){var e;void 0===this.$props.value&&void 0!==(null===(e=this.$props.properties)||void 0===e?void 0:e.default)&&this.changeValue(this.$props.properties.default,!0)},computed:{step:function(){return this.$props.properties.step||1},numValue:function(){var e,t;return void 0!==this.$props.value?this.$props.value:void 0!==(null===(e=this.$props.properties)||void 0===e?void 0:e.default)?this.$props.properties.default:void 0!==(null===(t=this.$props.properties)||void 0===t?void 0:t.min)?this.$props.properties.min:0}},methods:{changeValue:function(e,t){var r,n,i,o,a,s;if(!/^[^0-9]+$/.test(e.toString())){var u=parseInt(e.toString(),10);void 0!==(null===(r=this.$props.properties)||void 0===r?void 0:r.min)&&u<(null===(n=this.$props.properties)||void 0===n?void 0:n.min)&&(u=this.$props.properties.min),void 0!==(null===(i=this.$props.properties)||void 0===i?void 0:i.max)&&u>(null===(o=this.$props.properties)||void 0===o?void 0:o.max)&&(u=this.$props.properties.max),null===(a=(s=this.$props).onChange)||void 0===a||a.call(s,u,t)}}}},"data-v-1a52acb6",false,undefined,!1,Pe,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.value||e.widget.properties.controlProperties.default)+"\n")])},staticRenderFns:[]},undefined,{props:{properties:Object,widget:Object,onChange:Function,value:Number},inject:["t"]},undefined,false,undefined,!1,void 0,void 0,void 0)})};
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function $e(e){return"[object Object]"===Object.prototype.toString.call(e)}var Re=Object.prototype,Te=Re.toString,Fe=Re.hasOwnProperty,Ae=/^\s*function (\w+)/;function Le(e){var t,r=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:e;if(r){var n=r.toString().match(Ae);return n?n[1]:""}return""}var We=function(e){var t,r;return!1!==$e(e)&&(void 0===(t=e.constructor)||!1!==$e(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))},Me=function(e){return e},Ne=function(e,t){return Fe.call(e,t)},Be=Array.isArray||function(e){return"[object Array]"===Te.call(e)},Ve=function(e){return"[object Function]"===Te.call(e)};function qe(e,t){return Object.defineProperty(e.bind(t),"__original",{value:e})}function Ue(e,t,r){var n;void 0===r&&(r=!1);var i=!0,o="",a=function(e){return We(e)&&Ne(e,"_vueTypes_name")}(n=We(e)?e:{type:e})?n._vueTypes_name+" - ":"";if(function(e){return We(e)&&(Ne(e,"type")||["_vueTypes_name","validator","default","required"].some((function(t){return Ne(e,t)})))}(n)&&null!==n.type){if(void 0===n.type||!0===n.type)return i;if(!n.required&&void 0===t)return i;Be(n.type)?(i=n.type.some((function(e){return!0===Ue(e,t,!0)})),o=n.type.map((function(e){return Le(e)})).join(" or ")):i="Array"===(o=Le(n))?Be(t):"Object"===o?We(t):"String"===o||"Number"===o||"Boolean"===o||"Function"===o?function(e){if(null==e)return"";var t=e.constructor.toString().match(Ae);return t?t[1]:""}(t)===o:t instanceof n.type}if(!i){var s=a+'value "'+t+'" should be of type "'+o+'"';return!1===r?(Me(s),!1):s}if(Ne(n,"validator")&&Ve(n.validator)){var u=Me,l=[];if(Me=function(e){l.push(e)},i=n.validator(t),Me=u,!i){var c=(l.length>1?"* ":"")+l.join("\n* ");return l.length=0,!1===r?(Me(c),i):c}}return i}function De(e,t){var r=Object.defineProperties(t,{_vueTypes_name:{value:e,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(e){return void 0===e?(Ne(this,"default")&&delete this.default,this):Ve(e)||!0===Ue(this,e,!0)?(this.default=Be(e)?function(){return[].concat(e)}:We(e)?function(){return Object.assign({},e)}:e,this):(Me(this._vueTypes_name+' - invalid default value: "'+e+'"'),this)}}}),n=r.validator;return Ve(n)&&(r.validator=qe(n,r)),r}function He(e,t){var r=De(e,t);return Object.defineProperty(r,"validate",{value:function(e){return Ve(this.validator)&&Me(this._vueTypes_name+" - calling .validate() will overwrite the current custom validator function. Validator info:\n"+JSON.stringify(this)),this.validator=qe(e,this),this}})}function Je(e){return e.replace(/^(?!\s*$)/gm,"  ")}var ze=function(){return He("boolean",{type:Boolean})},Ke=function(){return He("string",{type:String})};function Ye(e){return De("arrayOf",{type:Array,validator:function(t){var r="",n=t.every((function(t){return!0===(r=Ue(e,t,!0))}));return n||Me("arrayOf - value validation error:\n"+Je(r)),n}})}function Ge(e){var t=Object.keys(e),r=t.filter((function(t){var r;return!(null===(r=e[t])||void 0===r||!r.required)})),n=De("shape",{type:Object,validator:function(n){var i=this;if(!We(n))return!1;var o=Object.keys(n);if(r.length>0&&r.some((function(e){return-1===o.indexOf(e)}))){var a=r.filter((function(e){return-1===o.indexOf(e)}));return Me(1===a.length?'shape - required property "'+a[0]+'" is not defined.':'shape - required properties "'+a.join('", "')+'" are not defined.'),!1}return o.every((function(r){if(-1===t.indexOf(r))return!0===i._vueTypes_isLoose||(Me('shape - shape definition does not include a "'+r+'" property. Allowed keys: "'+t.join('", "')+'".'),!1);var o=Ue(e[r],n[r],!0);return"string"==typeof o&&Me('shape - "'+r+'" property validation error:\n '+Je(o)),!0===o}))}});return Object.defineProperty(n,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(n,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),n}var Xe=Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"widget-wrapper"},[e.widget.style?r("style",{tag:"component",attrs:{scoped:""}},[e._v("\n    "+e._s(e.widget.style)+"\n  ")]):e._e(),e._v(" "),"form"===e.view?r("div",{staticClass:"widget-form-control"},[r(e.widgetControls[e.widget.type].formControl,{tag:"component",attrs:{widget:e.widget,widgetControls:e.widgetControls,widgetItems:e.widgetItems,formState:e.formState,setWidgetState:function(t,r){return e.setWidgetState(t,r,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)},view:e.view}})],1):e._e(),e._v(" "),r("div",[r(e.widgetControls[e.widget.type][e.view||"display"],{tag:"component",attrs:{widget:e.widget,widgetControls:e.widgetControls,widgetItems:e.widgetItems,formState:e.formState,setWidgetState:function(t,r){return e.setWidgetState(t,r,e.widget)},getWidgetState:function(t){return e.getWidgetState(t,e.widget)},view:e.view}})],1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-774df5bc_0",{source:".widget-wrapper[data-v-774df5bc]{padding:0 10px}",map:void 0,media:void 0})}),{props:{widget:Object,widgetControls:Object,widgetItems:Object,formState:Object,setWidgetState:Function,getWidgetState:Function,view:String},setup:function(){}},"data-v-774df5bc",false,undefined,!1,Pe,void 0,void 0),Qe=Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.filteredWidgetItemsArr,(function(t){return r("div",{key:t.id,staticClass:"widget-container"},[r("widget-view",{attrs:{widget:t,widgetControls:e.widgetControls,widgetItems:e.widgetItems,formState:e.formState,setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view}})],1)})),0)},staticRenderFns:[]},(function(e){e&&e("data-v-0b497604_0",{source:".widget-container[data-v-0b497604]{position:relative}.widget-form-control[data-v-0b497604]{position:absolute;top:-40px;left:0}",map:void 0,media:void 0})}),{components:{WidgetView:Xe},props:{widgetControls:Object,widgetItems:Object,excludeWidgetIds:Ye(String),onlyIncludeWidgetIds:Ye(String),forParent:String},inject:["widgetControls","getFormState","getView","setFormState"],computed:{view:function(){return this.getView()},formState:function(){return this.getFormState()},widgetItemsArr:function(){return Object.values(this.$props.widgetItems)},filteredWidgetItemsArr:function(){var e=this;return this.widgetItemsArr.filter((function(t){return t.parentId===e.forParent&&(!e.$props.onlyIncludeWidgetIds||e.$props.onlyIncludeWidgetIds.includes(t.id))&&(!(e.excludeWidgetIds||[]).length||!e.excludeWidgetIds.includes(t.id))})).sort((function(e,t){return(e.order||0)-(t.order||0)}))}},methods:{setWidgetState:function(e,t,r){var n=this.formState;if(void 0===t){if(!n.widgetState[r.id])return;delete n.widgetState[r.id][e]}else n.widgetState[r.id]||(n.widgetState[r.id]={}),n.widgetState[r.id][e]=t;this.setFormState(n)},getWidgetState:function(e,t){var r;return null===(r=this.formState.widgetState[t.id])||void 0===r?void 0:r[e]}},setup:function(){}},"data-v-0b497604",false,undefined,!1,Pe,void 0,void 0),Ze=Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.widget.properties.tabsVisible?r("div",{staticClass:"pages-menu-wrapper"},e._l(e.sortedPages,(function(t,n){return r("a",{key:n,staticClass:"pages-menu-item",class:{active:e.currentPageIndex===n,errors:e.widget.pageIndexHasErrors(n,{allChildPages:!0}),unopened:!(e.widget.getState("viewedIndices")||[]).includes(n)},attrs:{disabled:!(e.widget.getState("viewedIndices")||[]).includes(n)},on:{click:function(){return(e.widget.getState("viewedIndices")||[]).includes(n)&&e.widget.onChangePageIndex(n)}}},[e._v("\n      "+e._s(e.t(t.labelKey,e.widget.id))+"\n    ")])})),0):e._e(),e._v(" "),e._l(e.sortedPages,(function(t,n){return r("div",{key:n,staticClass:"pages-content-item"},[e.currentPageIndex===n?r("div",[r("widgets-layout",{attrs:{widgetItems:e.widgetItems,excludeWidgetIds:[e.widget.id],onlyIncludeWidgetIds:t.children,forParent:e.widget.id}})],1):e._e()])})),e._v(" "),e.widget.properties.navigationVisible?r("div",{staticClass:"back-forward-wrapper"},[r("div",[e.widget.hasPreviousButton()?r("button",{staticClass:"back-forward-button",on:{click:function(){return e.widget.toPreviousPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.previousButtonType(),e.widget.id))+"\n      ")]):e._e()]),e._v(" "),r("div",[e.widget.hasNextButton()?r("button",{staticClass:"back-forward-button",class:{errors:e.widget.pageIndexHasErrors(e.currentPageIndex)},attrs:{disabled:e.widget.pageIndexHasErrors(e.currentPageIndex)},on:{click:function(){return e.widget.toNextPage()}}},[e._v("\n        "+e._s(e.t("__"+e.widget.nextButtonType(),e.widget.id))+"\n      ")]):e._e()])]):e._e()],2)},staticRenderFns:[]},(function(e){e&&e("data-v-53700efa_0",{source:".pages-menu-wrapper[data-v-53700efa]{display:flex;flex-direction:row;justify-content:center;margin:10px 0}.pages-menu-item[data-v-53700efa]{display:inline-block;padding:10px 20px;cursor:pointer;text-align:center}.pages-menu-item.unopened[data-v-53700efa]{opacity:.3;cursor:default}.pages-menu-item.active[data-v-53700efa]{border-bottom:3px solid #03a9f4}.pages-menu-item.errors[data-v-53700efa]{border-color:red}.back-forward-wrapper[data-v-53700efa]{display:flex;flex-direction:row;justify-content:space-between}.back-forward-button[data-v-53700efa]{padding:10px 20px;margin:10px;border:1px solid transparent;background-color:#03a9f4;color:#fff;cursor:pointer}.back-forward-button.errors[data-v-53700efa]{background-color:red;color:#fff;opacity:.2;cursor:default}",map:void 0,media:void 0})}),{components:{WidgetsLayout:Qe},props:{widget:Object,widgetItems:Object,formState:Object,setWidgetState:Function},data:function(){return{sortedPages:[]}},inject:["t"],computed:{currentPageIndex:function(){var e,t;return(null===(e=this.formState.widgetState)||void 0===e||null===(t=e[this.$props.widget.id])||void 0===t?void 0:t.currentPageIndex)||0}},watch:{currentPageIndex:{handler:function(){var e=this.$props.widget.getState("viewedIndices");this.$props.widget.setState("viewedIndices",m(new Set([].concat(m(e||[]),[this.currentPageIndex]))))},immediate:!0},"widget.properties.pages":{handler:function(){this.$data.sortedPages=this.$props.widget.getSortedPages()},immediate:!0}}},"data-v-53700efa",false,undefined,!1,Pe,void 0,void 0),et=Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"paging-menu"},e._l(e.widget.properties.pages,(function(t,n){return r("a",{key:n,staticClass:"paging-menu-item",class:{active:e.currentPageIndex===n},on:{click:function(){return e.setState("currentPageIndex",n)}}},[e._v("\n      "+e._s(e.t(t.labelKey,e.widget.id))+"\n    ")])})),0),e._v(" "),e._l(e.widget.properties.pages,(function(t,n){return r("div",{key:n,staticClass:"paging-content-item"},[e.currentPageIndex===n?r("div",e._l(t.children,(function(t,n){return r("div",{key:n},[r("widgets-layout",{attrs:{widgets:e.widgets,widgetItems:e.widgetItems,excludeWidgetIds:[e.widget.id],forParent:e.widget.id}})],1)})),0):e._e()])}))],2)},staticRenderFns:[]},(function(e){e&&e("data-v-75828a48_0",{source:".paging-menu[data-v-75828a48]{display:flex;flex-direction:row;justify-content:space-around}.paging-menu-item[data-v-75828a48]{display:inline-block;padding:5px 10px}.paging-menu-item.active[data-v-75828a48]{background-color:#e8e8e8}",map:void 0,media:void 0})}),{components:{WidgetsLayout:Qe},props:{widget:Object,widgets:Object,widgetItems:Object,formState:Object},inject:["t","setFormState"],computed:{currentPageIndex:function(){var e,t;return(null===(e=this.formState.widgetState)||void 0===e||null===(t=e[this.$props.widget.id])||void 0===t?void 0:t.currentPageIndex)||0}},watch:{formStateCurrentPageIndex:{handler:function(e){this.$data.currentPageIndex=e},deep:!0}},methods:{setState:function(e,t){var r=this.formState;if(void 0===t){if(!r.widgetState[this.$props.widget.id])return;delete r.widgetState[this.$props.widget.id][e]}else r.widgetState[this.$props.widget.id]||(r.widgetState[this.$props.widget.id]={}),r.widgetState[this.$props.widget.id][e]=t;this.setFormState(r)}}},"data-v-75828a48",false,undefined,!1,Pe,void 0,void 0),tt=Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"paging-menu-wrapper"},e._l(e.sortedPages,(function(t,n){return r("a",{key:n,staticClass:"paging-menu-item",class:{active:e.currentPageIndex===n,errors:e.pageIndexHasErrors(n)},on:{click:function(){return e.widget.setState("currentPageIndex",n)}}},[e._v("\n      "+e._s(e.t(t.labelKey,e.widget.id))+"\n    ")])})),0),e._v(" "),e._l(e.sortedPages,(function(t,n){return r("div",{key:n,staticClass:"paging-content-item"},[e.currentPageIndex===n?r("div",[r("widgets-layout",{attrs:{widgets:e.widgets,widgetItems:e.widgetItems,excludeWidgetIds:[e.widget.id],onlyIncludeWidgetIds:t.children,forParent:e.widget.id}})],1):e._e()])}))],2)},staticRenderFns:[]},(function(e){e&&e("data-v-14235d2b_0",{source:".paging-menu-wrapper[data-v-14235d2b]{display:flex;flex-direction:row;justify-content:center;margin:10px 0}.paging-menu-item[data-v-14235d2b]{display:inline-block;padding:10px 20px;cursor:pointer;border:1px solid transparent}.paging-menu-item.active[data-v-14235d2b]{background-color:#e8e8e8}.paging-menu-item.errors[data-v-14235d2b]{border-color:red}",map:void 0,media:void 0})}),{components:{WidgetsLayout:Qe},props:{widget:Object,widgets:Object,widgetItems:Object,formState:Object,setWidgetState:Function},data:function(){return{sortedPages:[]}},inject:["t"],computed:{currentPageIndex:function(){var e,t;return(null===(e=this.formState.widgetState)||void 0===e||null===(t=e[this.$props.widget.id])||void 0===t?void 0:t.currentPageIndex)||0}},watch:{"widget.properties.pages":{handler:function(){this.$data.sortedPages=this.$props.widget.getSortedPages()},immediate:!0}},methods:{pageIndexHasErrors:function(e){var t=this.$props.widget.getState("pageIdxErrors")||{};return!!Object.keys(t).length&&Object.keys(t[e]||{}).length}}},"data-v-14235d2b",false,undefined,!1,Pe,void 0,void 0);function rt(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var nt=function(e,t){return e.reduce((function(e,r){var n="[object "+r+"]";return t?e[n]=r:e[r]=n,e}),{})},it=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},ot=["Array","Arguments","Object","RegExp","Symbol","Map","Set","Date","Error","Event","Generator","Promise","WeakMap","WeakSet","DocumentFragment","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","ArrayBuffer","DataView","DocumentFragment","Window","String","Number","Boolean","Function","Undefined","GeneratorFunction","BigInt","Null"],at=nt(ot,!1),st=nt(ot,!0),ut=it([at.Generator,at.Promise,at.WeakMap,at.WeakSet]),lt=it([at.Map,at.Set]),ct=it([at.Date,at.RegExp]),dt=it(["bigint","boolean","function","number","string","undefined"]),ft=it([at.Arguments,at.Array]),pt=it([at.RegExp,at.Symbol]),ht=it([at.Float32Array,at.Float64Array,at.Int8Array,at.Int16Array,at.Int32Array,at.Uint8Array,at.Uint8ClampedArray,at.Uint16Array,at.Uint32Array]),vt="undefined"!=typeof Buffer&&"function"==typeof Buffer.from,gt="function"==typeof Uint16Array;function yt(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function bt(e){return Buffer.from(e).toString("utf8")}function mt(e){return""}var wt=vt?bt:gt?yt:mt,_t=/\[object ([HTML|SVG](.*)Element)\]/,xt=Object.prototype.toString,Ot=Object.keys;function jt(e,t){return e>t}function St(e,t){return e[0]>t[0]}function kt(e,t){for(var r,n,i=0;i<e.length;++i){for(n=e[i],r=i-1;~r&&t(e[r],n);--r)e[r+1]=e[r];e[r+1]=n}return e}function Pt(e){for(var t,r=kt(Ot(e),jt),n={},i=0;i<r.length;++i)n[t=r[i]]=e[t];return n}function Ct(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r+1;return 0}function Et(e,t,r,n){if(!n){var i=typeof e;if(dt[i])return i+"|"+e;if(null===e)return e+"|"+e}var o,a=n||xt.call(e);return ft[a]?e:a===at.Object?Pt(e):pt[a]?st[a]+"|"+e.toString():lt[a]?e instanceof Map?function(e,t,r){var n=[];e.forEach((function(e,i){n.push([It(i,t,r),It(e,t,r)])})),kt(n,St);for(var i,o=0;o<n.length;++o)i=n[o],n[o]="["+i[0]+","+i[1]+"]";return"Map|["+n.join(",")+"]"}(e,t,r):function(e,t,r){var n=[];return e.forEach((function(e){n.push(It(e,t,r))})),kt(n,jt),"Set|["+n.join(",")+"]"}(e,t,r):a===at.Date?st[a]+"|"+e.getTime():a===at.Error?st[a]+"|"+e.stack:a===at.Event?{bubbles:(o=e).bubbles,cancelBubble:o.cancelBubble,cancelable:o.cancelable,composed:o.composed,currentTarget:o.currentTarget,defaultPrevented:o.defaultPrevented,eventPhase:o.eventPhase,isTrusted:o.isTrusted,returnValue:o.returnValue,target:o.target,type:o.type}:ut[a]?st[a]+"|NOT_ENUMERABLE":_t.test(a)?a.slice(8,-1)+"|"+e.outerHTML:a===at.DocumentFragment?st[a]+"|"+function(e){for(var t=e.children,r=[],n=0;n<t.length;++n)r.push(t[n].outerHTML);return r.join(",")}(e):ht[a]?st[a]+"|"+e.join(","):a===at.ArrayBuffer?st[a]+"|"+wt(e):a===at.DataView?st[a]+"|"+wt(e.buffer):e}function It(e,t,r){if(!e||"object"!=typeof e)return Et(e,t,r);var n=xt.call(e);return ct[n]?Et(e,t,r,n):JSON.stringify(e,function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),function(r,n){if("object"==typeof n)if(e.length){var i=Ct(e,this);0===i?e.push(this):(e.splice(i),t.splice(i)),t.push(r);var o=Ct(e,n);if(0!==o)return"[~"+(t.slice(0,o).join(".")||".")+"]";e.push(n)}else e[0]=n,t[0]=r;return r&&this[r]instanceof Date?Et(this[r],e,t,at.Date):Et(n,e,t)}}(t,r))}function $t(e){return function(e){for(var t,r=e.length,n=5381,i=52711;r--;)n=33*n^(t=e.charCodeAt(r)),i=33*i^t;return 4096*(n>>>0)+(i>>>0)}(It(e))}function Rt(e,t){return $t(e)===$t(t)}Rt.all=function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(!Rt(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!1;return!0},Rt.any=function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(Rt(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!0;return!1},Rt.not=function(e,t){return $t(e)!==$t(t)},$t.is=Rt;var Tt=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(r=$t)&&r.__esModule?r:{default:r};var o=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t;var i={cache:!0};if(void 0===n&&(n=i),"function"!=typeof r?(this.value=r,this.type=this.constructor.CONSTANT):(this.calculationMethod=r,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(n.priority||1,10),this.options=Object.assign({},i,n),this.cacheKeyMethod=this.defaultCacheKeys,this}return n(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(e,t){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(e,t)}},{key:"defaultCacheKeys",value:function(e,t){return{params:t,id:e}}},{key:"getCacheKey",value:function(t){if(!0===this.options.cache){var r=this.cacheKeyMethod(this.id,t);return e.hashFromObject(r)}}}],[{key:"hashFromObject",value:function(e){return(0,i.default)(e)}}]),e}();o.CONSTANT="CONSTANT",o.DYNAMIC="DYNAMIC",t.default=o})),Ft=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{("undefined"!=typeof process&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||"undefined"!=typeof window&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}catch(e){}}}));var At=function(e){return!!e&&"object"==typeof e},Lt=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=o(Ft),i=o(At);function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("Condition: constructor options required");var r=e.booleanOperator(t);if(Object.assign(this,t),r){var n=t[r];if(!Array.isArray(n))throw new Error('"'+r+'" must be an array');this.operator=r,this.priority=parseInt(t.priority,10)||1,this[r]=n.map((function(t){return new e(t)}))}else{if(!Object.prototype.hasOwnProperty.call(t,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(t,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(t,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(t,"priority")&&(t.priority=parseInt(t.priority,10))}}return r(e,[{key:"toJSON",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r={};this.priority&&(r.priority=this.priority);var n=e.booleanOperator(this);return n?r[n]=this[n].map((function(e){return e.toJSON(t)})):(r.operator=this.operator,r.value=this.value,r.fact=this.fact,void 0!==this.factResult&&(r.factResult=this.factResult),void 0!==this.result&&(r.result=this.result),this.params&&(r.params=this.params),this.path&&(r.path=this.path)),t?JSON.stringify(r):r}},{key:"_getValue",value:function(e){var t=this.value;return(0,i.default)(t)&&Object.prototype.hasOwnProperty.call(t,"fact")?e.factValue(t.fact,t.params,t.path):Promise.resolve(t)}},{key:"evaluate",value:function(e,t){var r=this;if(!e)return Promise.reject(new Error("almanac required"));if(!t)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var i=t.get(this.operator);return i?this._getValue(e).then((function(t){return e.factValue(r.fact,r.params,r.path).then((function(e){var o=i.evaluate(e,t);return(0,n.default)("condition::evaluate <"+JSON.stringify(e)+" "+r.operator+" "+JSON.stringify(t)+"?> ("+o+")"),{result:o,leftHandSideValue:e,rightHandSideValue:t,operator:r.operator}}))})):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==e.booleanOperator(this)}}],[{key:"booleanOperator",value:function(e){return Object.prototype.hasOwnProperty.call(e,"any")?"any":Object.prototype.hasOwnProperty.call(e,"all")?"all":void 0}}]),e}();t.default=a})),Wt=rt((function(e){var t=function(){function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{n=Promise}catch(e){n=function(){}}function i(o,s,u,l,c){"object"==typeof s&&(u=s.depth,l=s.prototype,c=s.includeNonEnumerable,s=s.circular);var d=[],f=[],p="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===u&&(u=1/0),function o(u,h){if(null===u)return null;if(0===h)return u;var v,g;if("object"!=typeof u)return u;if(e(u,t))v=new t;else if(e(u,r))v=new r;else if(e(u,n))v=new n((function(e,t){u.then((function(t){e(o(t,h-1))}),(function(e){t(o(e,h-1))}))}));else if(i.__isArray(u))v=[];else if(i.__isRegExp(u))v=new RegExp(u.source,a(u)),u.lastIndex&&(v.lastIndex=u.lastIndex);else if(i.__isDate(u))v=new Date(u.getTime());else{if(p&&Buffer.isBuffer(u))return v=Buffer.allocUnsafe?Buffer.allocUnsafe(u.length):new Buffer(u.length),u.copy(v),v;e(u,Error)?v=Object.create(u):void 0===l?(g=Object.getPrototypeOf(u),v=Object.create(g)):(v=Object.create(l),g=l)}if(s){var y=d.indexOf(u);if(-1!=y)return f[y];d.push(u),f.push(v)}for(var b in e(u,t)&&u.forEach((function(e,t){var r=o(t,h-1),n=o(e,h-1);v.set(r,n)})),e(u,r)&&u.forEach((function(e){var t=o(e,h-1);v.add(t)})),u){var m;g&&(m=Object.getOwnPropertyDescriptor(g,b)),m&&null==m.set||(v[b]=o(u[b],h-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(u);for(b=0;b<w.length;b++){var _=w[b];(!(O=Object.getOwnPropertyDescriptor(u,_))||O.enumerable||c)&&(v[_]=o(u[_],h-1),O.enumerable||Object.defineProperty(v,_,{enumerable:!1}))}}if(c){var x=Object.getOwnPropertyNames(u);for(b=0;b<x.length;b++){var O,j=x[b];(O=Object.getOwnPropertyDescriptor(u,j))&&O.enumerable||(v[j]=o(u[j],h-1),Object.defineProperty(v,j,{enumerable:!1}))}}return v}(o,u)}function o(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=a,i}();e.exports&&(e.exports=t)})),Mt=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(r=Wt)&&r.__esModule?r:{default:r};var o=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conditions=(0,i.default)(t),this.event=(0,i.default)(r),this.priority=(0,i.default)(n),this.name=(0,i.default)(o),this.result=null}return n(e,[{key:"setResult",value:function(e){this.result=e}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return e?JSON.stringify(t):t}}]),e}();t.default=o})),Nt=rt((function(e,t){!function(t){var r=Object.hasOwnProperty,n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i="object"==typeof process&&"function"==typeof process.nextTick,o="function"==typeof Symbol,a="object"==typeof Reflect,s="function"==typeof setImmediate?setImmediate:setTimeout,u=o?a&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function l(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==t&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function d(e,t){var r="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(r+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var n=new Error(r);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=e,process.emitWarning(n)}else console.error(r),console.trace&&console.trace()}var f=function(e,t,r){var n=arguments.length;switch(n){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,r];default:for(var i=new Array(n);n--;)i[n]=arguments[n];return i}};function p(e,r){for(var n={},i=e.length,o=r?value.length:0,a=0;a<i;a++)n[e[a]]=a<o?r[a]:t;return n}function h(e,t,r){var n,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(r.on||r.off)&&(n=r.on,i=r.off),t.addEventListener?(n=t.addEventListener,i=t.removeEventListener):t.addListener?(n=t.addListener,i=t.removeListener):t.on&&(n=t.on,i=t.off),!n&&!i)throw Error("target does not implement any known event API");if("function"!=typeof n)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=n,this._off=i;var o=e._observers;o?o.push(this):e._observers=[this]}function v(e,n,i,o){var a=Object.assign({},n);if(!e)return a;if("object"!=typeof e)throw TypeError("options must be an object");var s,u,l,c=Object.keys(e),d=c.length;function f(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var p=0;p<d;p++){if(s=c[p],!o&&!r.call(n,s))throw Error('Unknown "'+s+'" option');(u=e[s])!==t&&(l=i[s],a[s]=l?l(u,f):u)}return a}function g(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function y(e){var t="value must be type of "+e.join("|"),r=e.length,n=e[0],i=e[1];return 1===r?function(e,r){if(typeof e===n)return e;r(t)}:2===r?function(e,r){var o=typeof e;if(o===n||o===i)return e;r(t)}:function(n,i){for(var o=typeof n,a=r;a-- >0;)if(o===e[a])return n;i(t)}}Object.assign(h.prototype,{subscribe:function(e,t,r){var n=this,i=this._target,o=this._emitter,a=this._listeners,s=function(){var n=f.apply(null,arguments),a={data:n,name:t,original:e};if(r){var s=r.call(i,a);!1!==s&&o.emit.apply(o,[a.name].concat(n))}else o.emit.apply(o,[t].concat(n))};if(a[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!n._onNewListener?(this._onNewListener=function(r){r===t&&null===a[e]&&(a[e]=s,n._on.call(i,e,s))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(r){r===t&&!o.hasListeners(r)&&a[e]&&(a[e]=null,n._off.call(i,e,s))},a[e]=null,o.on("removeListener",this._onRemoveListener)):(a[e]=s,n._on.call(i,e,s))},unsubscribe:function(e){var t,r,n,i=this,o=this._listeners,a=this._emitter,s=this._off,l=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function c(){i._onNewListener&&(a.off("newListener",i._onNewListener),a.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=_.call(a,i);a._observers.splice(e,1)}if(e){if(!(t=o[e]))return;s.call(l,e,t),delete o[e],--this._listenersCount||c()}else{for(n=(r=u(o)).length;n-- >0;)e=r[n],s.call(l,e,o[e]);this._listeners={},this._listenersCount=0,c()}}});var b=y(["function"]),m=y(["object","function"]);function w(e,t,r){var n,i,o,a=0,s=new e((function(u,l,c){function d(){i&&(i=null),a&&(clearTimeout(a),a=0)}r=v(r,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),n=!r.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof c;var f=function(e){d(),u(e)},p=function(e){d(),l(e)};n?t(f,p,c):(i=[function(e){p(e||Error("canceled"))}],t(f,p,(function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),o=!0),r.timeout>0&&(a=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",a=0,s.cancel(e),l(e)}),r.timeout))}));return n||(s.cancel=function(e){if(i){for(var t=i.length,r=1;r<t;r++)i[r](e);i[0](e),i=null}}),s}function _(e){var t=this._observers;if(!t)return-1;for(var r=t.length,n=0;n<r;n++)if(t[n]._target===e)return n;return-1}function x(e,t,r,n,i){if(!r)return null;if(0===n){var o=typeof t;if("string"===o){var a,s,l=0,c=0,d=this.delimiter,f=d.length;if(-1!==(s=t.indexOf(d))){a=new Array(5);do{a[l++]=t.slice(c,s),c=s+f}while(-1!==(s=t.indexOf(d,c)));a[l++]=t.slice(c),t=a,i=l}else t=[t],i=1}else"object"===o?i=t.length:(t=[t],i=1)}var p,h,v,g,y,b,m,w=null,_=t[n],O=t[n+1];if(n===i)r._listeners&&("function"==typeof r._listeners?(e&&e.push(r._listeners),w=[r]):(e&&e.push.apply(e,r._listeners),w=[r]));else{if("*"===_){for(s=(b=u(r)).length;s-- >0;)"_listeners"!==(p=b[s])&&(m=x(e,t,r[p],n+1,i))&&(w?w.push.apply(w,m):w=m);return w}if("**"===_){for((y=n+1===i||n+2===i&&"*"===O)&&r._listeners&&(w=x(e,t,r,i,i)),s=(b=u(r)).length;s-- >0;)"_listeners"!==(p=b[s])&&("*"===p||"**"===p?(r[p]._listeners&&!y&&(m=x(e,t,r[p],i,i))&&(w?w.push.apply(w,m):w=m),m=x(e,t,r[p],n,i)):m=x(e,t,r[p],p===O?n+2:n,i),m&&(w?w.push.apply(w,m):w=m));return w}r[_]&&(w=x(e,t,r[_],n+1,i))}if((h=r["*"])&&x(e,t,h,n+1,i),v=r["**"])if(n<i)for(v._listeners&&x(e,t,v,i,i),s=(b=u(v)).length;s-- >0;)"_listeners"!==(p=b[s])&&(p===O?x(e,t,v[p],n+2,i):p===_?x(e,t,v[p],n+1,i):((g={})[p]=v[p],x(e,t,{"**":g},n+1,i)));else v._listeners?x(e,t,v,i,i):v["*"]&&v["*"]._listeners&&x(e,t,v["*"],i,i);return w}function O(e,t,r){var n,i,o=0,a=0,s=this.delimiter,u=s.length;if("string"==typeof e)if(-1!==(n=e.indexOf(s))){i=new Array(5);do{i[o++]=e.slice(a,n),a=n+u}while(-1!==(n=e.indexOf(s,a)));i[o++]=e.slice(a)}else i=[e],o=1;else i=e,o=e.length;if(o>1)for(n=0;n+1<o;n++)if("**"===i[n]&&"**"===i[n+1])return;var l,c=this.listenerTree;for(n=0;n<o;n++)if(c=c[l=i[n]]||(c[l]={}),n===o-1)return c._listeners?("function"==typeof c._listeners&&(c._listeners=[c._listeners]),r?c._listeners.unshift(t):c._listeners.push(t),!c._listeners.warned&&this._maxListeners>0&&c._listeners.length>this._maxListeners&&(c._listeners.warned=!0,d.call(this,c._listeners.length,l))):c._listeners=t,!0;return!0}function j(e,t,r,n){for(var i,o,a,s,l=u(e),c=l.length,d=e._listeners;c-- >0;)i=e[o=l[c]],a="_listeners"===o?r:r?r.concat(o):[o],s=n||"symbol"==typeof o,d&&t.push(s?a:a.join(this.delimiter)),"object"==typeof i&&j.call(this,i,t,a,s);return t}function S(e){for(var t,r,n,i=u(e),o=i.length;o-- >0;)(t=e[r=i[o]])&&(n=!0,"_listeners"===r||S(t)||delete e[r]);return n}function k(e,t,r){this.emitter=e,this.event=t,this.listener=r}function P(e,r,n){if(!0===n)a=!0;else if(!1===n)o=!0;else{if(!n||"object"!=typeof n)throw TypeError("options should be an object or true");var o=n.async,a=n.promisify,u=n.nextTick,l=n.objectify}if(o||u||a){var c=r,d=r._origin||r;if(u&&!i)throw Error("process.nextTick is not supported");a===t&&(a="AsyncFunction"===r.constructor.name),r=function(){var e=arguments,t=this,r=this.event;return a?u?Promise.resolve():new Promise((function(e){s(e)})).then((function(){return t.event=r,c.apply(t,e)})):(u?process.nextTick:s)((function(){t.event=r,c.apply(t,e)}))},r._async=!0,r._origin=d}return[r,l?new k(this,e,r):this]}function C(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,c.call(this,e)}k.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},C.EventEmitter2=C,C.prototype.listenTo=function(e,r,i){if("object"!=typeof e)throw TypeError("target musts be an object");var o=this;function a(t){if("object"!=typeof t)throw TypeError("events must be an object");var r,n=i.reducers,a=_.call(o,e);r=-1===a?new h(o,e,i):o._observers[a];for(var s,l=u(t),c=l.length,d="function"==typeof n,f=0;f<c;f++)s=l[f],r.subscribe(s,t[s]||s,d?n:n&&n[s])}return i=v(i,{on:t,off:t,reducers:t},{on:b,off:b,reducers:m}),n(r)?a(p(r)):a("string"==typeof r?p(r.split(/\s+/)):r),this},C.prototype.stopListeningTo=function(e,t){var r=this._observers;if(!r)return!1;var n,i=r.length,o=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;i-- >0;)n=r[i],e&&n._target!==e||(n.unsubscribe(t),o=!0);return o},C.prototype.delimiter=".",C.prototype.setMaxListeners=function(e){e!==t&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},C.prototype.getMaxListeners=function(){return this._maxListeners},C.prototype.event="",C.prototype.once=function(e,t,r){return this._once(e,t,!1,r)},C.prototype.prependOnceListener=function(e,t,r){return this._once(e,t,!0,r)},C.prototype._once=function(e,t,r,n){return this._many(e,1,t,r,n)},C.prototype.many=function(e,t,r,n){return this._many(e,t,r,!1,n)},C.prototype.prependMany=function(e,t,r,n){return this._many(e,t,r,!0,n)},C.prototype._many=function(e,t,r,n,i){var o=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");function a(){return 0==--t&&o.off(e,a),r.apply(this,arguments)}return a._origin=r,this._on(e,a,n,i)},C.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||l.call(this);var e,t,r,n,i,a,s=arguments[0],u=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return!1;if(u&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(r=s.length,o)for(n=0;n<r;n++)if("symbol"==typeof s[n]){a=!0;break}a||(s=s.join(this.delimiter))}var c,d=arguments.length;if(this._all&&this._all.length)for(n=0,r=(c=this._all.slice()).length;n<r;n++)switch(this.event=s,d){case 1:c[n].call(this,s);break;case 2:c[n].call(this,s,arguments[1]);break;case 3:c[n].call(this,s,arguments[1],arguments[2]);break;default:c[n].apply(this,arguments)}if(u)c=[],x.call(this,c,e,this.listenerTree,0,r);else{if("function"==typeof(c=this._events[s])){switch(this.event=s,d){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(d-1),i=1;i<d;i++)t[i-1]=arguments[i];c.apply(this,t)}return!0}c&&(c=c.slice())}if(c&&c.length){if(d>3)for(t=new Array(d-1),i=1;i<d;i++)t[i-1]=arguments[i];for(n=0,r=c.length;n<r;n++)switch(this.event=s,d){case 1:c[n].call(this);break;case 2:c[n].call(this,arguments[1]);break;case 3:c[n].call(this,arguments[1],arguments[2]);break;default:c[n].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===s)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},C.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||l.call(this);var e,t,r,n,i,a,s=arguments[0],u=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(u&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(n=s.length,o)for(i=0;i<n;i++)if("symbol"==typeof s[i]){t=!0;break}t||(s=s.join(this.delimiter))}var c,d=[],f=arguments.length;if(this._all)for(i=0,n=this._all.length;i<n;i++)switch(this.event=s,f){case 1:d.push(this._all[i].call(this,s));break;case 2:d.push(this._all[i].call(this,s,arguments[1]));break;case 3:d.push(this._all[i].call(this,s,arguments[1],arguments[2]));break;default:d.push(this._all[i].apply(this,arguments))}if(u?(c=[],x.call(this,c,e,this.listenerTree,0)):c=this._events[s],"function"==typeof c)switch(this.event=s,f){case 1:d.push(c.call(this));break;case 2:d.push(c.call(this,arguments[1]));break;case 3:d.push(c.call(this,arguments[1],arguments[2]));break;default:for(r=new Array(f-1),a=1;a<f;a++)r[a-1]=arguments[a];d.push(c.apply(this,r))}else if(c&&c.length){if(c=c.slice(),f>3)for(r=new Array(f-1),a=1;a<f;a++)r[a-1]=arguments[a];for(i=0,n=c.length;i<n;i++)switch(this.event=s,f){case 1:d.push(c[i].call(this));break;case 2:d.push(c[i].call(this,arguments[1]));break;case 3:d.push(c[i].call(this,arguments[1],arguments[2]));break;default:d.push(c[i].apply(this,r))}}else if(!this.ignoreErrors&&!this._all&&"error"===s)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(d)},C.prototype.on=function(e,t,r){return this._on(e,t,!1,r)},C.prototype.prependListener=function(e,t,r){return this._on(e,t,!0,r)},C.prototype.onAny=function(e){return this._onAny(e,!1)},C.prototype.prependAny=function(e){return this._onAny(e,!0)},C.prototype.addListener=C.prototype.on,C.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},C.prototype._on=function(e,r,n,i){if("function"==typeof e)return this._onAny(e,r),this;if("function"!=typeof r)throw new Error("on only accepts instances of Function");this._events||l.call(this);var o,a=this;return i!==t&&(r=(o=P.call(this,e,r,i))[0],a=o[1]),this._newListener&&this.emit("newListener",e,r),this.wildcard?(O.call(this,e,r,n),a):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(r):this._events[e].push(r),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,d.call(this,this._events[e].length,e))):this._events[e]=r,a)},C.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();if(!(i=x.call(this,null,o,this.listenerTree,0)))return this}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var a=0;a<i.length;a++){var s=i[a];if(r=s._listeners,n(r)){for(var u=-1,l=0,c=r.length;l<c;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){u=l;break}if(u<0)continue;return this.wildcard?s._listeners.splice(u,1):this._events[e].splice(u,1),0===r.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&S(this.listenerTree),this},C.prototype.offAny=function(e){var t,r=0,n=0;if(e&&this._all&&this._all.length>0){for(r=0,n=(t=this._all).length;r<n;r++)if(e===t[r])return t.splice(r,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(r=0,n=t.length;r<n;r++)this.emit("removeListenerAny",t[r]);this._all=[]}return this},C.prototype.removeListener=C.prototype.off,C.prototype.removeAllListeners=function(e){if(e===t)return!this._events||l.call(this),this;if(this.wildcard){var r,n=x.call(this,null,e,this.listenerTree,0);if(!n)return this;for(r=0;r<n.length;r++)n[r]._listeners=null;this.listenerTree&&S(this.listenerTree)}else this._events&&(this._events[e]=null);return this},C.prototype.listeners=function(e){var r,n,i,o,a,s=this._events;if(e===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(o=(r=u(s)).length,i=[];o-- >0;)"function"==typeof(n=s[r[o]])?i.push(n):i.push.apply(i,n);return i}if(this.wildcard){if(!(a=this.listenerTree))return[];var l=[],c="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,l,c,a,0),l}return s&&(n=s[e])?"function"==typeof n?[n]:n:[]},C.prototype.eventNames=function(e){var t=this._events;return this.wildcard?j.call(this,this.listenerTree,[],null,e):t?u(t):[]},C.prototype.listenerCount=function(e){return this.listeners(e).length},C.prototype.hasListeners=function(e){if(this.wildcard){var r=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,r,n,this.listenerTree,0),r.length>0}var i=this._events,o=this._all;return!!(o&&o.length||i&&(e===t?u(i).length:i[e]))},C.prototype.listenersAny=function(){return this._all?this._all:[]},C.prototype.waitFor=function(e,r){var n=this,i=typeof r;return"number"===i?r={timeout:r}:"function"===i&&(r={filter:r}),w((r=v(r,{timeout:0,filter:t,handleError:!1,Promise:Promise,overload:!1},{filter:b,Promise:g})).Promise,(function(t,i,o){function a(){var o=r.filter;if(!o||o.apply(n,arguments))if(n.off(e,a),r.handleError){var s=arguments[0];s?i(s):t(f.apply(null,arguments).slice(1))}else t(f.apply(null,arguments))}o((function(){n.off(e,a)})),n._on(e,a,!1)}),{timeout:r.timeout,overload:r.overload})};var E=C.prototype;Object.defineProperties(C,{defaultMaxListeners:{get:function(){return E._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");E._maxListeners=e},enumerable:!0},once:{value:function(e,t,r){return w((r=v(r,{Promise:Promise,timeout:0,overload:!1},{Promise:g})).Promise,(function(r,n,i){var o;if("function"==typeof e.addEventListener)return o=function(){r(f.apply(null,arguments))},i((function(){e.removeEventListener(t,o)})),void e.addEventListener(t,o,{once:!0});var a,s=function(){a&&e.removeListener("error",a),r(f.apply(null,arguments))};"error"!==t&&(a=function(r){e.removeListener(t,s),n(r)},e.once("error",a)),i((function(){a&&e.removeListener("error",a),e.removeListener(t,s)})),e.once(t,s)}),{timeout:r.timeout,overload:r.overload})},writable:!0,configurable:!0}}),Object.defineProperties(E,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),e.exports=C}()})),Bt=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=a(Lt),i=a(Mt),o=a(Ft);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));"string"==typeof e&&(e=JSON.parse(e)),e&&e.conditions&&r.setConditions(e.conditions),e&&e.onSuccess&&r.on("success",e.onSuccess),e&&e.onFailure&&r.on("failure",e.onFailure),e&&(e.name||0===e.name)&&r.setName(e.name);var n=e&&e.priority||1;r.setPriority(n);var i=e&&e.event||{type:"unknown"};return r.setEvent(i),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"setPriority",value:function(e){if((e=parseInt(e,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=e,this}},{key:"setName",value:function(e){if(!e&&0!==e)throw new Error('Rule "name" must be defined');return this.name=e,this}},{key:"setConditions",value:function(e){if(!Object.prototype.hasOwnProperty.call(e,"all")&&!Object.prototype.hasOwnProperty.call(e,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new n.default(e),this}},{key:"setEvent",value:function(e){if(!e)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(e,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.ruleEvent={type:e.type},e.params&&(this.ruleEvent.params=e.params),this}},{key:"getEvent",value:function(){return this.ruleEvent}},{key:"getPriority",value:function(){return this.priority}},{key:"getConditions",value:function(){return this.conditions}},{key:"getEngine",value:function(){return this.engine}},{key:"setEngine",value:function(e){return this.engine=e,this}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.ruleEvent,name:this.name};return e?JSON.stringify(t):t}},{key:"prioritizeConditions",value:function(e){var t=this,r=e.reduce((function(e,r){var n=r.priority;if(!n){var i=t.engine.getFact(r.fact);n=i&&i.priority||1}return e[n]||(e[n]=[]),e[n].push(r),e}),{});return Object.keys(r).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(e){return r[e]}))}},{key:"evaluate",value:function(e){var t=this,r=new i.default(this.conditions,this.ruleEvent,this.priority,this.name),n=function(r,n){return Array.isArray(r)||(r=[r]),Promise.all(r.map((function(r){return function(r){if(r.isBooleanOperator()){var n=r[r.operator];return("all"===r.operator?u(n):s(n)).then((function(e){var t=!0===e;return r.result=t,t}))}return r.evaluate(e,t.engine.operators).then((function(e){var t=e.result;return r.factResult=e.leftHandSideValue,r.result=t,t}))}(r)}))).then((function(e){return(0,o.default)("rule::evaluateConditions results",e),n.call(e,(function(e){return!0===e}))}))},a=function(e,r){if(0===e.length)return Promise.resolve(!0);var i=Array.prototype.some;"all"===r&&(i=Array.prototype.every);for(var a=t.prioritizeConditions(e),s=Promise.resolve(),u=function(e){var t=a[e],u=!1;s=s.then((function(e){return"any"===r&&!0===e||u?((0,o.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),u=!0,!0):"all"===r&&!1===e||u?((0,o.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),u=!0,!1):n(t,i)}))},l=0;l<a.length;l++)u(l);return s},s=function(e){return a(e,"any")},u=function(e){return a(e,"all")},l=function(n){r.setResult(n);var i=n?"success":"failure";return t.emitAsync(i,r.event,e,r).then((function(){return r}))};return r.conditions.any?s(r.conditions.any).then((function(e){return l(e)})):u(r.conditions.all).then((function(e){return l(e)}))}}]),t}(a(Nt).default);t.default=s})),Vt=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var n=function(){function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=String(t),!t)throw new Error("Missing operator name");if("function"!=typeof r)throw new Error("Missing operator callback");this.cb=r,this.factValueValidator=n,this.factValueValidator||(this.factValueValidator=function(){return!0})}return r(e,[{key:"evaluate",value:function(e,t){return this.factValueValidator(e)&&this.cb(e,t)}}]),e}();t.default=n})),qt=rt((function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0}),t.UndefinedFactError=function(e){function t(){var e;r(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return s.code="UNDEFINED_FACT",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}()}));const{hasOwnProperty:Ut}=Object.prototype;function Dt(e,t){return(e=e.slice()).push(t),e}function Ht(e,t){return(t=t.slice()).unshift(e),t}class Jt extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}}function zt(e,t,r,n,i){if(!(this instanceof zt))try{return new zt(e,t,r,n,i)}catch(e){if(!e.avoidNew)throw e;return e.value}"string"==typeof e&&(i=n,n=r,r=t,t=e,e=null);const o=e&&"object"==typeof e;if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=!Ut.call(e,"wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||n||null,this.otherTypeCallback=e.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==e.autostart){const n={path:o?e.path:t};o?"json"in e&&(n.json=e.json):n.json=r;const i=this.evaluate(n);if(!i||"object"!=typeof i)throw new Jt(i);return i}}zt.prototype.evaluate=function(e,t,r,n){let i=this.parent,o=this.parentProperty,{flatten:a,wrap:s}=this;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"==typeof e&&!Array.isArray(e)){if(!e.path&&""!==e.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Ut.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:t}=e),a=Ut.call(e,"flatten")?e.flatten:a,this.currResultType=Ut.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=Ut.call(e,"sandbox")?e.sandbox:this.currSandbox,s=Ut.call(e,"wrap")?e.wrap:s,this.currPreventEval=Ut.call(e,"preventEval")?e.preventEval:this.currPreventEval,r=Ut.call(e,"callback")?e.callback:r,this.currOtherTypeCallback=Ut.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,i=Ut.call(e,"parent")?e.parent:i,o=Ut.call(e,"parentProperty")?e.parentProperty:o,e=e.path}if(i=i||null,o=o||null,Array.isArray(e)&&(e=zt.toPathString(e)),!e&&""!==e||!t)return;const u=zt.toPathArray(e);"$"===u[0]&&u.length>1&&u.shift(),this._hasParentSelector=null;const l=this._trace(u,t,["$"],i,o,r).filter((function(e){return e&&!e.isParentSelector}));return l.length?s||1!==l.length||l[0].hasArrExpr?l.reduce(((e,t)=>{const r=this._getPreferredOutput(t);return a&&Array.isArray(r)?e=e.concat(r):e.push(r),e}),[]):this._getPreferredOutput(l[0]):s?[]:void 0},zt.prototype._getPreferredOutput=function(e){const t=this.currResultType;switch(t){case"all":{const t=Array.isArray(e.path)?e.path:zt.toPathArray(e.path);return e.pointer=zt.toPointer(t),e.path="string"==typeof e.path?e.path:zt.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return zt.toPathString(e[t]);case"pointer":return zt.toPointer(e.path);default:throw new TypeError("Unknown result type")}},zt.prototype._handleCallback=function(e,t,r){if(t){const n=this._getPreferredOutput(e);e.path="string"==typeof e.path?e.path:zt.toPathString(e.path),t(n,r,e)}},zt.prototype._trace=function(e,t,r,n,i,o,a,s){let u;if(!e.length)return u={path:r,value:t,parent:n,parentProperty:i,hasArrExpr:a},this._handleCallback(u,o,"value"),u;const l=e[0],c=e.slice(1),d=[];function f(e){Array.isArray(e)?e.forEach((e=>{d.push(e)})):d.push(e)}if(("string"!=typeof l||s)&&t&&Ut.call(t,l))f(this._trace(c,t[l],Dt(r,l),t,l,o,a));else if("*"===l)this._walk(l,c,t,r,n,i,o,((e,t,r,n,i,o,a,s)=>{f(this._trace(Ht(e,r),n,i,o,a,s,!0,!0))}));else if(".."===l)f(this._trace(c,t,r,n,i,o,a)),this._walk(l,c,t,r,n,i,o,((e,t,r,n,i,o,a,s)=>{"object"==typeof n[e]&&f(this._trace(Ht(t,r),n[e],Dt(i,e),n,e,s,!0))}));else{if("^"===l)return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:c,isParentSelector:!0};if("~"===l)return u={path:Dt(r,l),value:i,parent:n,parentProperty:null},this._handleCallback(u,o,"property"),u;if("$"===l)f(this._trace(c,t,r,null,null,o,a));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(l))f(this._slice(l,c,t,r,n,i,o));else if(0===l.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(l,c,t,r,n,i,o,((e,t,r,n,i,o,a,s)=>{this._eval(t.replace(/^\?\((.*?)\)$/u,"$1"),n[e],e,i,o,a)&&f(this._trace(Ht(e,r),n,i,o,a,s,!0))}))}else if("("===l[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");f(this._trace(Ht(this._eval(l,t,r[r.length-1],r.slice(0,-1),n,i),c),t,r,n,i,o,a))}else if("@"===l[0]){let e=!1;const a=l.slice(1,-2);switch(a){case"scalar":t&&["object","function"].includes(typeof t)||(e=!0);break;case"boolean":case"string":case"undefined":case"function":typeof t===a&&(e=!0);break;case"integer":!Number.isFinite(t)||t%1||(e=!0);break;case"number":Number.isFinite(t)&&(e=!0);break;case"nonFinite":"number"!=typeof t||Number.isFinite(t)||(e=!0);break;case"object":t&&typeof t===a&&(e=!0);break;case"array":Array.isArray(t)&&(e=!0);break;case"other":e=this.currOtherTypeCallback(t,r,n,i);break;case"null":null===t&&(e=!0);break;default:throw new TypeError("Unknown value type "+a)}if(e)return u={path:r,value:t,parent:n,parentProperty:i},this._handleCallback(u,o,"value"),u}else if("`"===l[0]&&t&&Ut.call(t,l.slice(1))){const e=l.slice(1);f(this._trace(c,t[e],Dt(r,e),t,e,o,a,!0))}else if(l.includes(",")){const e=l.split(",");for(const a of e)f(this._trace(Ht(a,c),t,r,n,i,o,!0))}else!s&&t&&Ut.call(t,l)&&f(this._trace(c,t[l],Dt(r,l),t,l,o,a,!0))}if(this._hasParentSelector)for(let e=0;e<d.length;e++){const r=d[e];if(r&&r.isParentSelector){const s=this._trace(r.expr,t,r.path,n,i,o,a);if(Array.isArray(s)){d[e]=s[0];const t=s.length;for(let r=1;r<t;r++)e++,d.splice(e,0,s[r])}else d[e]=s}}return d},zt.prototype._walk=function(e,t,r,n,i,o,a,s){if(Array.isArray(r)){const u=r.length;for(let l=0;l<u;l++)s(l,e,t,r,n,i,o,a)}else r&&"object"==typeof r&&Object.keys(r).forEach((u=>{s(u,e,t,r,n,i,o,a)}))},zt.prototype._slice=function(e,t,r,n,i,o,a){if(!Array.isArray(r))return;const s=r.length,u=e.split(":"),l=u[2]&&Number.parseInt(u[2])||1;let c=u[0]&&Number.parseInt(u[0])||0,d=u[1]&&Number.parseInt(u[1])||s;c=c<0?Math.max(0,c+s):Math.min(s,c),d=d<0?Math.max(0,d+s):Math.min(s,d);const f=[];for(let e=c;e<d;e+=l){this._trace(Ht(e,t),r,n,i,o,a,!0).forEach((e=>{f.push(e)}))}return f},zt.prototype._eval=function(e,t,r,n,i,o){e.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=o,e=e.replace(/@parentProperty/gu,"_$_parentProperty")),e.includes("@parent")&&(this.currSandbox._$_parent=i,e=e.replace(/@parent/gu,"_$_parent")),e.includes("@property")&&(this.currSandbox._$_property=r,e=e.replace(/@property/gu,"_$_property")),e.includes("@path")&&(this.currSandbox._$_path=zt.toPathString(n.concat([r])),e=e.replace(/@path/gu,"_$_path")),e.includes("@root")&&(this.currSandbox._$_root=this.json,e=e.replace(/@root/gu,"_$_root")),/@([.\s)[])/u.test(e)&&(this.currSandbox._$_v=t,e=e.replace(/@([.\s)[])/gu,"_$_v$1"));try{return this.vm.runInNewContext(e,this.currSandbox)}catch(t){throw console.log(t),new Error("jsonPath: "+t.message+": "+e)}},zt.cache={},zt.toPathString=function(e){const t=e,r=t.length;let n="$";for(let e=1;e<r;e++)/^(~|\^|@.*?\(\))$/u.test(t[e])||(n+=/^[0-9*]+$/u.test(t[e])?"["+t[e]+"]":"['"+t[e]+"']");return n},zt.toPointer=function(e){const t=e,r=t.length;let n="";for(let e=1;e<r;e++)/^(~|\^|@.*?\(\))$/u.test(t[e])||(n+="/"+t[e].toString().replace(/~/gu,"~0").replace(/\//gu,"~1"));return n},zt.toPathArray=function(e){const{cache:t}=zt;if(t[e])return t[e].concat();const r=[],n=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replace(/[['](\??\(.*?\))[\]']/gu,(function(e,t){return"[#"+(r.push(t)-1)+"]"})).replace(/\[['"]([^'\]]*)['"]\]/gu,(function(e,t){return"['"+t.replace(/\./gu,"%@%").replace(/~/gu,"%%@@%%")+"']"})).replace(/~/gu,";~;").replace(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replace(/%@%/gu,".").replace(/%%@@%%/gu,"~").replace(/(?:;)?(\^+)(?:;)?/gu,(function(e,t){return";"+t.split("").join(";")+";"})).replace(/;;;|;;/gu,";..;").replace(/;$|'?\]|'$/gu,"").split(";").map((function(e){const t=e.match(/#(\d+)/u);return t&&t[1]?r[t[1]]:e}));return t[e]=n,t[e].concat()},zt.prototype.vm=r.default;var Kt,Yt,Gt=Object.freeze({__proto__:null,JSONPath:zt}),Xt=(Kt=Gt,Kt&&Kt.default||Kt),Qt=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(Tt),o=s(Ft),a=s(At);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return(0,Xt.JSONPath)({path:t,json:e,wrap:!1})}var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var s in u(this,e),this.factMap=new Map(t),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(a.allowUndefinedFacts),this.pathResolver=a.pathResolver||l,this.events={success:[],failure:[]},this.ruleResults=[],n){var c=void 0;c=n[s]instanceof i.default?n[s]:new i.default(s,n[s]),this._addConstantFact(c),(0,o.default)("almanac::constructor initialized runtime fact:"+c.id+" with "+c.value+"<"+r(c.value)+">")}}return n(e,[{key:"addEvent",value:function(e,t){if(!t)throw new Error('outcome required: "success" | "failure"]');this.events[t].push(e)}},{key:"getEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?this.events[e]:this.events.success.concat(this.events.failure)}},{key:"addResult",value:function(e){this.ruleResults.push(e)}},{key:"getResults",value:function(){return this.ruleResults}},{key:"_getFact",value:function(e){return this.factMap.get(e)}},{key:"_addConstantFact",value:function(e){this.factMap.set(e.id,e),this._setFactValue(e,{},e.value)}},{key:"_setFactValue",value:function(e,t,r){var n=e.getCacheKey(t),i=Promise.resolve(r);return n&&this.factResultsCache.set(n,i),i}},{key:"addRuntimeFact",value:function(e,t){(0,o.default)("almanac::addRuntimeFact id:"+e);var r=new i.default(e,t);return this._addConstantFact(r)}},{key:"factValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=void 0,u=this._getFact(e);if(void 0===u)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new qt.UndefinedFactError("Undefined fact: "+e));if(u.isConstant())s=Promise.resolve(u.calculate(n,this));else{var l=u.getCacheKey(n),c=l&&this.factResultsCache.get(l);c?(s=Promise.resolve(c),(0,o.default)("almanac::factValue cache hit for fact:"+e)):((0,o.default)("almanac::factValue cache miss for fact:"+e+"; calculating"),s=this._setFactValue(u,n,u.calculate(n,this)))}return i?((0,o.default)("condition::evaluate extracting object property "+i),s.then((function(e){if((0,a.default)(e)){var n=t.pathResolver(e,i);return(0,o.default)("condition::evaluate extracting object property "+i+", received: "+JSON.stringify(n)),n}return(0,o.default)("condition::evaluate could not compute object path("+i+") of non-object: "+e+" <"+(void 0===e?"undefined":r(e))+">; continuing with "+e),e}))):s}}]),e}();t.default=c})),Zt=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=Vt)&&r.__esModule?r:{default:r};var i=[];function o(e){return"NaN"!==Number.parseFloat(e).toString()}i.push(new n.default("equal",(function(e,t){return e===t}))),i.push(new n.default("notEqual",(function(e,t){return e!==t}))),i.push(new n.default("in",(function(e,t){return t.indexOf(e)>-1}))),i.push(new n.default("notIn",(function(e,t){return-1===t.indexOf(e)}))),i.push(new n.default("contains",(function(e,t){return e.indexOf(t)>-1}),Array.isArray)),i.push(new n.default("doesNotContain",(function(e,t){return-1===e.indexOf(t)}),Array.isArray)),i.push(new n.default("lessThan",(function(e,t){return e<t}),o)),i.push(new n.default("lessThanInclusive",(function(e,t){return e<=t}),o)),i.push(new n.default("greaterThan",(function(e,t){return e>t}),o)),i.push(new n.default("greaterThanInclusive",(function(e,t){return e>=t}),o)),t.default=i})),er=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FINISHED=t.RUNNING=t.READY=void 0;var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=c(Tt),i=c(Bt),o=c(Vt),a=c(Qt),s=c(Nt),u=c(Zt),l=c(Ft);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=t.READY="READY",h=t.RUNNING="RUNNING",v=t.FINISHED="FINISHED",g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.rules=[],n.allowUndefinedFacts=r.allowUndefinedFacts||!1,n.pathResolver=r.pathResolver,n.operators=new Map,n.facts=new Map,n.status=p,e.map((function(e){return n.addRule(e)})),u.default.map((function(e){return n.addOperator(e)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"addRule",value:function(e){if(!e)throw new Error("Engine: addRule() requires options");var t=void 0;if(e instanceof i.default)t=e;else{if(!Object.prototype.hasOwnProperty.call(e,"event"))throw new Error('Engine: addRule() argument requires "event" property');if(!Object.prototype.hasOwnProperty.call(e,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');t=new i.default(e)}return t.setEngine(this),this.rules.push(t),this.prioritizedRules=null,this}},{key:"updateRule",value:function(e){var t=this.rules.findIndex((function(t){return t.name===e.name}));if(!(t>-1))throw new Error("Engine: updateRule() rule not found");this.rules.splice(t,1),this.addRule(e),this.prioritizedRules=null}},{key:"removeRule",value:function(e){var t=!1;if(e instanceof i.default){var r=this.rules.indexOf(e);r>-1&&(t=Boolean(this.rules.splice(r,1).length))}else{var n=this.rules.filter((function(t){return t.name!==e}));t=n.length!==this.rules.length,this.rules=n}return t&&(this.prioritizedRules=null),t}},{key:"addOperator",value:function(e,t){var r=void 0;r=e instanceof o.default?e:new o.default(e,t),(0,l.default)("engine::addOperator name:"+r.name),this.operators.set(r.name,r)}},{key:"removeOperator",value:function(e){var t=void 0;return t=e instanceof o.default?e.name:e,this.operators.delete(t)}},{key:"addFact",value:function(e,t,r){var i=e,o=void 0;return e instanceof n.default?(i=e.id,o=e):o=new n.default(e,t,r),(0,l.default)("engine::addFact id:"+i),this.facts.set(i,o),this}},{key:"removeFact",value:function(e){var t=void 0;return t=e instanceof n.default?e.id:e,this.facts.delete(t)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var e=this.rules.reduce((function(e,t){var r=t.priority;return e[r]||(e[r]=[]),e[r].push(t),e}),{});this.prioritizedRules=Object.keys(e).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(t){return e[t]}))}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=v,this}},{key:"getFact",value:function(e){return this.facts.get(e)}},{key:"evaluateRules",value:function(e,t){var r=this;return Promise.all(e.map((function(e){return r.status!==h?((0,l.default)("engine::run status:"+r.status+"; skipping remaining rules"),Promise.resolve()):e.evaluate(t).then((function(e){return(0,l.default)("engine::run ruleResult:"+e.result),t.addResult(e),e.result?(t.addEvent(e.event,"success"),r.emitAsync("success",e.event,t,e).then((function(){return r.emitAsync(e.event.type,e.event.params,t,e)}))):(t.addEvent(e.event,"failure"),r.emitAsync("failure",e.event,t,e))}))})))}},{key:"run",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)("engine::run started"),this.status=h;var r={allowUndefinedFacts:this.allowUndefinedFacts,pathResolver:this.pathResolver},n=new a.default(this.facts,t,r),i=this.prioritizeRules(),o=Promise.resolve();return new Promise((function(t,r){i.map((function(t){return o=o.then((function(){return e.evaluateRules(t,n)})).catch(r)})),o.then((function(){e.status=v,(0,l.default)("engine::run completed");var r=n.getResults().reduce((function(e,t){return e[t.result?"results":"failureResults"].push(t),e}),{results:[],failureResults:[]}),i=r.results,o=r.failureResults;t({almanac:n,results:i,failureResults:o,events:n.getEvents("success"),failureEvents:n.getEvents("failure")})})).catch(r)}))}}]),t}(s.default);t.default=g})),tr=rt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=t.Operator=t.Rule=t.Fact=void 0,t.default=function(e,t){return new r.default(e,t)};var r=a(er),n=a(Tt),i=a(Bt),o=a(Vt);function a(e){return e&&e.__esModule?e:{default:e}}t.Fact=n.default,t.Rule=i.default,t.Operator=o.default,t.Engine=r.default})),rr=tr,nr=function(){function e(t){var r,n=t.widget,i=t.getState,o=t.setState,a=t.onUpdate;s(this,e),this._widgetItems={},this._widget=n,this._getFormState=i,this._setFormState=o,this._onUpdate=a,this.code&&i().registerWidgetCode(this.code,this.id),null!==(r=this.reflexiveRules)&&void 0!==r&&r.length&&(this.formState.registerReflexWatch(this.id,this.reflexiveRules.map((function(e){return e.fact}))),this.runReflexives())}var t,r,n,i,o;return l(e,[{key:"formState",get:function(){return this._getFormState()}},{key:"id",get:function(){return this._widget.id}},{key:"type",get:function(){return this._widget.type}},{key:"code",get:function(){return this._widget.code}},{key:"style",get:function(){return this._widget.style}},{key:"properties",get:function(){return this._widget.properties}},{key:"parentId",get:function(){return this._widget.parent}},{key:"parent",set:function(e){this._widget.parent=e}},{key:"reflexiveRules",get:function(){return this._widget.reflexiveRules}},{key:"validationRules",get:function(){return this._widget.validationRules}},{key:"destroyed",value:function(){var e;null!==(e=this.reflexiveRules)&&void 0!==e&&e.length&&this.formState.unregisterReflexWatch(this.id,this.reflexiveRules.map((function(e){return e.fact})))}},{key:"setWidgetItems",value:function(e){this._widgetItems=e}},{key:"validate",value:(o=a(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new rr.Engine).addRule({conditions:{all:t},event:{type:"isTruthy"}}),e.next=4,n.run(r);case 4:return e.abrupt("return",e.sent.events.some((function(e){return"isTruthy"===e.type})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})},{key:"runValidations",value:(i=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getValidationErrors();case 2:return t=e.sent,this.setState("errors",t),this._setFormState(this.formState),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_getValidationErrors",value:(n=a(regeneratorRuntime.mark((function e(){var t,r,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=this.validationRules)&&void 0!==t&&t.length){e.next=2;break}return e.abrupt("return",null);case 2:return r=this.getState("response"),e.next=5,Promise.all(this.validationRules.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.validate(t.conditions,{data:i.properties,response:r});case 2:if(e.sent){e.next=5;break}return e.abrupt("return",t.error);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return n=e.sent.filter((function(e){return e})),e.abrupt("return",n.length?n:null);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setChildErrors",value:function(e,t){var r=this.getState("childErrors")||{};t?r[e]=t:delete r[e],Object.keys(r).length?this.setState("childErrors",r):this.setState("childErrors",void 0)}},{key:"childErrors",value:function(){return this.getState("childErrors")}},{key:"hasChildErrors",value:function(){return Object.keys(this.childErrors()||{}).length>0}},{key:"runReflexives",value:(r=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isReflexive();case 2:t=e.sent,this.setState("reflexiveHide",!t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"isReflexive",value:(t=a(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=this.reflexiveRules)&&void 0!==t&&t.length){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",this.validate(this.reflexiveRules,this.reflexiveRules.reduce((function(e,t){var n,i=r.formState.widgetCodeToIdMap[t.fact],o=null===(n=r.formState.widgetState[i])||void 0===n?void 0:n.response;return e[t.fact]=o,e}),{})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setState",value:function(e,t){this._getFormState().setWidgetState(this.id,e,t),this._setFormState(this.formState)}},{key:"getState",value:function(e){return this._getFormState().getWidgetState(this.id,e)}},{key:"getParentIds",value:function(){return e.getParentIds(this.id,this._widgetItems)}},{key:"getParents",value:function(){var e=this;return this.getParentIds().map((function(t){return e._widgetItems[t]}))}},{key:"getParent",value:function(){return this._widgetItems[this.parentId||""]||null}},{key:"getChildrenIds",value:function(e,t){return[]}},{key:"getChildren",value:function(e,t){var r=this;return this.getChildrenIds(e,t).map((function(e){return r._widgetItems[e]}))}},{key:"addChild",value:function(e,t){e.parent=this.id}},{key:"removeChild",value:function(e){e.parent=void 0}}],[{key:"getParentIds",value:function(t,r){var n=r[t];return null!=n&&n.parentId?[n.parentId].concat(m(e.getParentIds(n.parentId,r)||[])):[]}}]),e}(),ir=function(e){d(n,e);var t,r=v(n);function n(e){return s(this,n),r.call(this,e)}return l(n,[{key:"getSortedPages",value:function(){return this.properties.pages}},{key:"isWidgetIdInWidgetIds",value:function(e,t){var r=this;return t.some((function(t){return t===e||r.isWidgetIdInWidgetIds(e,r._widgetItems[t].getChildrenIds())}))}},{key:"getChildIndexByWidgetId",value:function(e){var t=this;return this.getSortedPages().findIndex((function(r){return t.isWidgetIdInWidgetIds(e,r.children)}))}},{key:"getChildrenIds",value:function(e,t){var r=this;return this.getSortedPages().filter((function(e,n){var i;return null!=t&&null!==(i=t.inPageIndices)&&void 0!==i&&i.length?t.inPageIndices.includes(n):null!=t&&t.currentPageIndexOnly?n===r.currentPageIndex:e})).reduce((function(n,i){return[].concat(m(n),m(i.children),m(null!=e&&e.deep?i.children.reduce((function(n,i){return[].concat(m(n),m(r._widgetItems[i].getChildrenIds(e,t)))}),[]):[]))}),[])}},{key:"setChildErrors",value:function(e,t){y(f(n.prototype),"setChildErrors",this).call(this,e,t);var r,i=this.getState("pageIdxErrors")||{},o=this.getChildIndexByWidgetId(e);if(-1===o)throw new Error("child widget not in paging");t?(i[o]||(i[o]={}),i[o][e]=t):(null===(r=i[o])||void 0===r||delete r[e],Object.keys(i[o]).length||delete i[o]);this.setState("pageIdxErrors",Object.keys(i).length?i:void 0)}},{key:"addChild",value:function(e,t){y(f(n.prototype),"addChild",this).call(this,e,t),this._widget.properties.pages[(null==t?void 0:t.pageIdx)||0].children.splice((null==t?void 0:t.childIdx)||0,0,e.id)}},{key:"removeChild",value:function(e){y(f(n.prototype),"removeChild",this).call(this,e),this._widget.properties.pages.forEach((function(t){t.children=t.children.filter((function(t){return t!==e.id}))}))}},{key:"onChangePageIndex",value:function(e){var t=this.getSortedPages();e<0||e>t.length-1||this.setState("currentPageIndex",e)}},{key:"currentPageIndex",get:function(){return this.getState("currentPageIndex")||0}},{key:"getParentPagesWidgets",value:function(e){var t=this.getParents().filter((function(e){return"pages"===e.type}));return null!=e&&e.first?t[0]:t}},{key:"getChildrenPagesWidgets",value:function(e){var t=this.getChildren({deep:!0},{inPageIndices:null==e?void 0:e.inPageIndices}).filter((function(e){return"pages"===e.type}));return null!=e&&e.first?t[0]:t}},{key:"pageIndexHasErrors",value:function(e,t){var r=this.getState("pageIdxErrors")||{};if(!Object.keys(r).length)return!1;if(!Object.keys(r[e]||{}).length)return!1;var n=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null;return!(n&&(null==n||!n.properties.detachParentIntegration)&&"none"!==(null==n?void 0:n.nextButtonType()))||(null!=t&&t.allChildPages?n.hasChildErrors():n.currentPageIndexHasErrors())}},{key:"currentPageIndexHasErrors",value:function(){return this.pageIndexHasErrors(this.currentPageIndex)}},{key:"toNextPage",value:(t=a(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getChildren({deep:!0},{currentPageIndexOnly:!0}),e.next=3,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.runValidations());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:if(e.sent.some((function(e){return e}))){e.next=15;break}if("complete"!==(r=this.nextButtonType())){e.next=9;break}e.next=15;break;case 9:if("none"!==r){e.next=13;break}return e.abrupt("return");case 13:!(n=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null)||null!=n&&n.properties.detachParentIntegration||"none"===(null==n?void 0:n.nextButtonType())?this.onChangePageIndex(this.currentPageIndex+1):n.toNextPage();case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toPreviousPage",value:function(){if("none"!==this.previousButtonType()){var e=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0,inPageIndices:[this.currentPageIndex]}):null;!e||null!=e&&e.properties.detachParentIntegration||"none"===(null==e?void 0:e.previousButtonType())?this.onChangePageIndex(this.currentPageIndex-1):e.toPreviousPage()}}},{key:"previousButtonType",value:function(){var e=this.currentPageIndex<=0,t=this.getChildrenPagesWidgets({first:!0});return this.properties.navigationIntegrateChildrenPages&&t&&!t.properties.detachParentIntegration&&e?t.previousButtonType():e?"none":"previous"}},{key:"nextButtonType",value:function(){var e=this.currentPageIndex>=this._widget.properties.pages.length-1,t=this.properties.navigationIntegrateChildrenPages?this.getChildrenPagesWidgets({first:!0}):null;return this.properties.navigationIntegrateChildrenPages&&t&&!t.properties.detachParentIntegration&&e?t.nextButtonType():e?this.properties.hasCompleteButton?"complete":"none":"next"}},{key:"hasPreviousButton",value:function(){return!!this.properties.navigationVisible&&"none"!==this.previousButtonType()}},{key:"hasNextButton",value:function(){return!!this.properties.navigationVisible&&"none"!==this.nextButtonType()}}]),n}(nr),or={display:Ze,form:et,readOnly:tt,widgetItem:ir},ar={props:{widget:Object,widgetControls:Object,widgetItems:Object,setWidgetState:Function,getWidgetState:Function,view:String},inject:["t","questionControls","widgetControls","getFormState","setFormState"],created:function(){var e=i({},this.$props.widget.getState());this.widget.setState("type","question"),void 0===(null==e?void 0:e.touched)&&(this.widget.setState("touched",!1),this.widget.setState("pristine",!0),this.widget.setState("dirty",!1))},unmounted:function(){},computed:{formState:function(){return this.getFormState()}},methods:{onChange:function(e,t){var r=this;this.widget.setState("response",e),t||(this.widget.setState("touched",!0),this.widget.setState("pristine",!1),this.widget.setState("dirty",!0),a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.$props.widget.runValidations();case 2:return t=r.formState.getReflexWidgetIdsByCode(r.$props.widget.code),e.next=5,Promise.all(t.map(function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.$props.widgetItems[t].runReflexives());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})))())}}},sr=ar,ur=Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.widget.getState("reflexiveHide")?e._e():r("div",[r("div",{staticClass:"question-wrapper"},[e.widget.properties.hideLabel?e._e():r("label",[e._v(e._s(e.t("__label",e.widget.id)))]),e._v(" "),r("div",[r(e.questionControls[e.widget.properties.control].display,{tag:"component",attrs:{properties:e.widget.properties.controlProperties,widget:e.widget,onChange:e.onChange,value:e.widget.getState("response"),setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view,t:e.t}}),e._v(" "),e._l(e.getWidgetState("errors"),(function(t){return r("span",{key:t,staticClass:"error"},[e._v(e._s(e.t(t,e.widget.id)))])}))],2)])])},staticRenderFns:[]},(function(e){e&&e("data-v-6bfea85e_0",{source:".question-wrapper[data-v-6bfea85e]{width:100%;display:flex;flex-direction:row}.question-wrapper>label[data-v-6bfea85e]{flex:1;max-width:300px;border-right:1px solid #393939;padding:20px 0;margin-right:20px}.question-wrapper>div[data-v-6bfea85e]{flex:2;padding:20px 0}.error[data-v-6bfea85e]{display:block;color:red;margin-top:10px}",map:void 0,media:void 0})}),sr,"data-v-6bfea85e",false,undefined,!1,Pe,void 0,void 0),lr=Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"question-wrapper"},[r("label",[e._v(e._s(e.t("__label",e.widget.id)))]),e._v(" "),r("div",[r(e.questionControls[e.widget.properties.control].form,{tag:"component",attrs:{properties:e.widget.properties.controlProperties,widget:e.widget,onChange:e.onChange,value:e.getWidgetState("response"),setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view}})],1)])])},staticRenderFns:[]},(function(e){e&&e("data-v-4de99166_0",{source:".question-wrapper[data-v-4de99166]{width:100%;display:flex;flex-direction:row;padding:10px 10px}.question-wrapper>label[data-v-4de99166]{flex:1;border-right:1px solid #393939}.question-wrapper>div[data-v-4de99166]{flex:2;padding-left:10px}",map:void 0,media:void 0})}),{props:{widget:Object,widgetControls:Object,widgetItems:Object,setWidgetState:Function,getWidgetState:Function,view:String},inject:["t","questionControls"],setup:function(){},methods:{onChange:function(e){this.setWidgetState("response",e)}}},"data-v-4de99166",false,undefined,!1,Pe,void 0,void 0),cr=Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.getWidgetState("reflexiveHide")?e._e():r("div",[r("div",{staticClass:"question-wrapper"},[e.widget.properties.hideLabel?e._e():r("label",[e._v(e._s(e.t("__label",e.widget.id)))]),e._v(" "),r("div",[r(e.questionControls[e.widget.properties.control].readOnly,{tag:"component",attrs:{properties:e.widget.properties.controlProperties,widget:e.widget,onChange:e.onChange,value:e.getWidgetState("response"),setWidgetState:e.setWidgetState,getWidgetState:e.getWidgetState,view:e.view,t:e.t}})],1)])])},staticRenderFns:[]},(function(e){e&&e("data-v-42b234d1_0",{source:".question-wrapper[data-v-42b234d1]{width:100%;display:flex;flex-direction:row;padding:10px 10px}.question-wrapper>label[data-v-42b234d1]{flex:1;max-width:300px;border-right:1px solid #393939;padding:10px 0}.question-wrapper>div[data-v-42b234d1]{flex:2;padding:10px 20px}",map:void 0,media:void 0})}),{props:{widget:Object,widgetControls:Object,widgetItems:Object,setWidgetState:Function,getWidgetState:Function,view:String},inject:["t","questionControls","widgetControls","getFormState","setFormState"],created:function(){},unmounted:function(){},computed:{formState:function(){return this.getFormState()}},methods:{onChange:function(e){this.setWidgetState("response",e)}}},"data-v-42b234d1",false,undefined,!1,Pe,void 0,void 0),dr=function(e){d(n,e);var t,r=v(n);function n(e){return s(this,n),r.call(this,e)}return l(n,[{key:"runValidations",value:(t=a(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(f(n.prototype),"runValidations",this).call(this);case 2:return t=e.sent,this.setState("valid",!t),this.setState("hasErrors",!!t),(this.getParentIds()||[]).forEach((function(e){var n=r._widgetItems[e].getState(),i=(null==n?void 0:n.childErrors)||{};(t||i[r.id])&&(t?i[r.id]=t:delete i[r.id],r._widgetItems[e].setChildErrors(r.id,t))})),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(nr),fr={display:ur,form:lr,readOnly:cr,widgetItem:dr},pr={display:Se({render:function(){var e,t,r,n=this,i=n.$createElement,o=n._self._c||i;return o("div",{staticClass:"line-wrapper",class:{vertical:"vertical"===n.widget.properties.dir}},[n.isShowLabel("start")?o("label",{class:(e={},e[n.widget.properties.labelPosition||"start"]=!0,e)},[n._v(n._s(n.label))]):n._e(),n._v(" "),o("div",{staticClass:"line"}),n._v(" "),n.isShowLabel("center")?o("label",{class:(t={},t[n.widget.properties.labelPosition||"start"]=!0,t)},[n._v(n._s(n.label))]):n._e(),n._v(" "),o("div",{staticClass:"line"}),n._v(" "),n.isShowLabel("end")?o("label",{class:(r={},r[n.widget.properties.labelPosition||"start"]=!0,r)},[n._v(n._s(n.label))]):n._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-ad924e26_0",{source:".line-wrapper[data-v-ad924e26]{display:flex;flex-direction:row;align-items:center;padding:10px 0}.line-wrapper.vertical[data-v-ad924e26]{flex-direction:column}.line-wrapper .line[data-v-ad924e26]{flex:1;background-color:#a0a0a0;height:1px}.line-wrapper.vertical .line[data-v-ad924e26]{width:1px}.line-wrapper label[data-v-ad924e26]{padding:10px;background-color:rgba(255,255,255,.5);border-radius:10px}.line-wrapper label.start[data-v-ad924e26]{padding-left:0}.line-wrapper label.end[data-v-ad924e26]{padding-right:0}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-ad924e26",false,undefined,!1,Pe,void 0,void 0),form:Se({render:function(){var e,t,r,n=this,i=n.$createElement,o=n._self._c||i;return o("div",{staticClass:"line-wrapper",class:{vertical:"vertical"===n.widget.properties.dir}},[n.isShowLabel("start")?o("label",{class:(e={},e[n.widget.properties.labelPosition||"start"]=!0,e)},[n._v(n._s(n.label))]):n._e(),n._v(" "),o("div",{staticClass:"line"}),n._v(" "),n.isShowLabel("center")?o("label",{class:(t={},t[n.widget.properties.labelPosition||"start"]=!0,t)},[n._v(n._s(n.label))]):n._e(),n._v(" "),o("div",{staticClass:"line"}),n._v(" "),n.isShowLabel("end")?o("label",{class:(r={},r[n.widget.properties.labelPosition||"start"]=!0,r)},[n._v(n._s(n.label))]):n._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-28956a53_0",{source:".line-wrapper[data-v-28956a53]{display:flex;flex-direction:row;align-items:center;padding:10px}.line-wrapper.vertical[data-v-28956a53]{flex-direction:column}.line-wrapper .line[data-v-28956a53]{flex:1;background-color:#a0a0a0;height:1px}.line-wrapper.vertical .line[data-v-28956a53]{width:1px}.line-wrapper label[data-v-28956a53]{padding:10px;background-color:rgba(255,255,255,.5);border-radius:10px}.line-wrapper label.start[data-v-28956a53]{padding-left:0}.line-wrapper label.end[data-v-28956a53]{padding-right:0}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-28956a53",false,undefined,!1,Pe,void 0,void 0),readOnly:Se({render:function(){var e,t,r,n=this,i=n.$createElement,o=n._self._c||i;return o("div",{staticClass:"line-wrapper",class:{vertical:"vertical"===n.widget.properties.dir}},[n.isShowLabel("start")?o("label",{class:(e={},e[n.widget.properties.labelPosition||"start"]=!0,e)},[n._v(n._s(n.label))]):n._e(),n._v(" "),o("div",{staticClass:"line"}),n._v(" "),n.isShowLabel("center")?o("label",{class:(t={},t[n.widget.properties.labelPosition||"start"]=!0,t)},[n._v(n._s(n.label))]):n._e(),n._v(" "),o("div",{staticClass:"line"}),n._v(" "),n.isShowLabel("end")?o("label",{class:(r={},r[n.widget.properties.labelPosition||"start"]=!0,r)},[n._v(n._s(n.label))]):n._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-655c6171_0",{source:".line-wrapper[data-v-655c6171]{display:flex;flex-direction:row;align-items:center;padding:10px}.line-wrapper.vertical[data-v-655c6171]{flex-direction:column}.line-wrapper .line[data-v-655c6171]{flex:1;background-color:#a0a0a0;height:1px}.line-wrapper.vertical .line[data-v-655c6171]{width:1px}.line-wrapper label[data-v-655c6171]{padding:10px;background-color:rgba(255,255,255,.5);border-radius:10px}.line-wrapper label.start[data-v-655c6171]{padding-left:0}.line-wrapper label.end[data-v-655c6171]{padding-right:0}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-655c6171",false,undefined,!1,Pe,void 0,void 0)},hr=function(e){d(r,e);var t=v(r);function r(e){return s(this,r),t.call(this,e)}return l(r,[{key:"getChildrenIds",value:function(){return this.properties.children}},{key:"addChild",value:function(e,t){y(f(r.prototype),"addChild",this).call(this,e,t),this._widget.properties.children.splice((null==t?void 0:t.idx)||0,0,e.id)}},{key:"removeChild",value:function(e){y(f(r.prototype),"removeChild",this).call(this,e);var t=this._widget.properties.children.findIndex((function(t){return t===e.id}));t>-1&&this._widget.properties.children.splice(t,1)}}]),r}(nr),vr={display:Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section-wrapper",class:{errors:e.hasChildErrors}},[e.label?r("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),r("widgets-layout",{attrs:{widgetControls:e.widgetControls,widgetItems:e.widgetItems,forParent:e.widget.id}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-7a4f949e_0",{source:".section-wrapper[data-v-7a4f949e]{position:relative;border:1px solid #a9a9a9;min-height:30px;padding:10px;margin:10px 0;border-radius:8px}.section-wrapper>label[data-v-7a4f949e]{position:absolute;top:0;left:10px;transform:translateY(-50%);background-color:#fff;padding:10px}.section-wrapper.errors[data-v-7a4f949e]{border-color:red}",map:void 0,media:void 0})}),{components:{WidgetsLayout:Qe},props:{widget:nr,widgetItems:Object,widgetControls:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)},childErrors:function(){var e;return null===(e=this.$props.widget.getState())||void 0===e?void 0:e.childErrors},hasChildErrors:function(){return this.$props.widget.hasChildErrors()}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-7a4f949e",false,undefined,!1,Pe,void 0,void 0),form:Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section-wrapper"},[e.label?r("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),r("widgets-layout",{attrs:{widgetControls:e.widgetControls,widgetItems:e.widgetItems,forParent:e.widget.id}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-e0fb7cf6_0",{source:".section-wrapper[data-v-e0fb7cf6]{position:relative;border:1px solid #a9a9a9;min-height:30px;padding:10px;margin:10px;border-radius:8px}.section-wrapper>label[data-v-e0fb7cf6]{position:absolute;top:0;left:10px;transform:translateY(-50%);background-color:#fff;padding:10px}",map:void 0,media:void 0})}),{components:{WidgetsLayout:Qe},props:{widget:Object,widgetItems:Object,widgetControls:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-e0fb7cf6",false,undefined,!1,Pe,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section-wrapper"},[e.label?r("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),r("widgets-layout",{attrs:{widgetControls:e.widgetControls,widgetItems:e.widgetItems,forParent:e.widget.id}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-4bf662ba_0",{source:".section-wrapper[data-v-4bf662ba]{position:relative;border:1px solid #a9a9a9;min-height:30px;padding:10px;margin:10px;border-radius:8px}.section-wrapper>label[data-v-4bf662ba]{position:absolute;top:0;left:10px;transform:translateY(-50%);background-color:#fff;padding:10px}",map:void 0,media:void 0})}),{components:{WidgetsLayout:Qe},props:{widget:Object,widgetItems:Object,widgetControls:Object},inject:["t"],setup:function(){},computed:{label:function(){return this.t("__label",this.$props.widget.id)}},methods:{isShowLabel:function(e){return this.$props.widget.properties.hasLabel&&this.$props.widget.properties.labelPosition===e}}},"data-v-4bf662ba",false,undefined,!1,Pe,void 0,void 0),widgetItem:hr},gr={display:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"header"},[e._v(e._s(e.t("__label",e.widget.id)))])},staticRenderFns:[]},undefined,{props:{widget:Object},inject:["t"]},"data-v-efd0e968",false,undefined,!1,void 0,void 0,void 0),form:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"header"},[e._v(e._s(e.t("__label",e.widget.id)))])},staticRenderFns:[]},(function(e){e&&e("data-v-7ba8f767_0",{source:".header[data-v-7ba8f767]{padding:0 10px}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"]},"data-v-7ba8f767",false,undefined,!1,Pe,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.widget.properties.tagType,{tag:"component",staticClass:"header"},[e._v(e._s(e.t("__label",e.widget.id)))])},staticRenderFns:[]},(function(e){e&&e("data-v-4d6ef985_0",{source:".header[data-v-4d6ef985]{padding:0 10px}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"]},"data-v-4d6ef985",false,undefined,!1,Pe,void 0,void 0)},yr={alert:{display:Se({render:function(){var e,t=this,r=t.$createElement,n=t._self._c||r;return t.isOpen?n("div",{staticClass:"alert",class:(e={},e[t.widget.properties.type]=!0,e),style:t.alertStyles},[n("h3",{staticClass:"title"},[t._v(t._s(t.t("__title",t.widget.id)))]),t._v(" "),n("p",[t._v(t._s(t.t("__text",t.widget.id)))]),t._v(" "),t.widget.properties.showCloseBtn?n("a",{staticClass:"close-button",on:{click:t.onCloseAlert}},[t._v("x")]):t._e()]):t._e()},staticRenderFns:[]},(function(e){e&&e("data-v-6fdc1ae4_0",{source:".alert[data-v-6fdc1ae4]{padding:18px 18px;margin:10px 0;border-radius:10px;background-color:#f4f6f8;border:1px solid #e5e9ed;position:relative}.alert.success[data-v-6fdc1ae4]{background-color:#ebf7ee;border-color:#e2f1e7}.alert.info[data-v-6fdc1ae4]{background-color:#e6f0f8;border-color:#cad9e7}.alert.danger[data-v-6fdc1ae4]{background-color:#fdede9;border-color:#f2e1dd}.alert.warning[data-v-6fdc1ae4]{background-color:#fef8ea;border-color:#f4eada}.alert .title[data-v-6fdc1ae4]{margin:0 0 10px 0;font-weight:700}.alert>.close-button[data-v-6fdc1ae4]{position:absolute;top:0;right:0;padding:18px 18px;cursor:pointer;transform:scaleX(1.2)}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],data:function(){return{isOpen:!0}},methods:{onCloseAlert:function(){this.$data.isOpen=!1}},computed:{alertStyles:function(){return"custom"!==this.widget.properties.type||this.widget.properties.customColor?{}:i({backgroundColor:this.widget.properties.customBackgroundColor,borderColor:this.widget.properties.customBorderColor||"transparent"},this.widget.properties.customTextColor?{color:this.widget.properties.customTextColor}:{})}}},"data-v-6fdc1ae4",false,undefined,!1,Pe,void 0,void 0),form:Se({render:function(){var e,t=this,r=t.$createElement,n=t._self._c||r;return t.isOpen?n("div",{staticClass:"alert",class:(e={},e[t.widget.properties.type]=!0,e),style:t.alertStyles},[n("h3",[t._v(t._s(t.t("__title",t.widget.id)))]),t._v(" "),n("p",[t._v(t._s(t.t("__text",t.widget.id)))]),t._v(" "),t.widget.properties.showCloseBtn?n("a",{staticClass:"close-button",on:{click:t.onCloseAlert}},[t._v("x")]):t._e()]):t._e()},staticRenderFns:[]},(function(e){e&&e("data-v-41152049_0",{source:".alert[data-v-41152049]{padding:10px;margin:10px;border-radius:10px;background-color:#f4f6f8;border:1px solid #e5e9ed;position:relative}.alert.success[data-v-41152049]{background-color:#ebf7ee;border-color:#e2f1e7}.alert.info[data-v-41152049]{background-color:#e6f0f8;border-color:#cad9e7}.alert.danger[data-v-41152049]{background-color:#fdede9;border-color:#f2e1dd}.alert.warning[data-v-41152049]{background-color:#fef8ea;border-color:#f4eada}.alert>.close-button[data-v-41152049]{position:absolute;top:0;right:0;padding:10px 15px;cursor:pointer;transform:scaleX(1.2)}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],data:function(){return{isOpen:!0}},methods:{onCloseAlert:function(){this.$data.isOpen=!1}},computed:{alertStyles:function(){return"custom"!==this.widget.properties.type||this.widget.properties.customColor?{}:i({backgroundColor:this.widget.properties.customBackgroundColor,borderColor:this.widget.properties.customBorderColor||"transparent"},this.widget.properties.customTextColor?{color:this.widget.properties.customTextColor}:{})}}},"data-v-41152049",false,undefined,!1,Pe,void 0,void 0),readOnly:Se({render:function(){var e,t=this,r=t.$createElement,n=t._self._c||r;return t.isOpen?n("div",{staticClass:"alert",class:(e={},e[t.widget.properties.type]=!0,e),style:t.alertStyles},[n("h3",[t._v(t._s(t.t("__title",t.widget.id)))]),t._v(" "),n("p",[t._v(t._s(t.t("__text",t.widget.id)))]),t._v(" "),t.widget.properties.showCloseBtn?n("a",{staticClass:"close-button",on:{click:t.onCloseAlert}},[t._v("x")]):t._e()]):t._e()},staticRenderFns:[]},(function(e){e&&e("data-v-fde52432_0",{source:".alert[data-v-fde52432]{padding:10px;margin:10px;border-radius:10px;background-color:#f4f6f8;border:1px solid #e5e9ed;position:relative}.alert.success[data-v-fde52432]{background-color:#ebf7ee;border-color:#e2f1e7}.alert.info[data-v-fde52432]{background-color:#e6f0f8;border-color:#cad9e7}.alert.danger[data-v-fde52432]{background-color:#fdede9;border-color:#f2e1dd}.alert.warning[data-v-fde52432]{background-color:#fef8ea;border-color:#f4eada}.alert>.close-button[data-v-fde52432]{position:absolute;top:0;right:0;padding:10px 15px;cursor:pointer;transform:scaleX(1.2)}",map:void 0,media:void 0})}),{props:{widget:Object},inject:["t"],data:function(){return{isOpen:!0}},methods:{onCloseAlert:function(){this.$data.isOpen=!1}},computed:{alertStyles:function(){return"custom"!==this.widget.properties.type||this.widget.properties.customColor?{}:i({backgroundColor:this.widget.properties.customBackgroundColor,borderColor:this.widget.properties.customBorderColor||"transparent"},this.widget.properties.customTextColor?{color:this.widget.properties.customTextColor}:{})}}},"data-v-fde52432",false,undefined,!1,Pe,void 0,void 0)},header:gr,html:{display:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"html-wrapper",domProps:{innerHTML:e._s(e.t("__html",e.widget.id))}})},staticRenderFns:[]},undefined,{props:{widget:Object,widgets:Object,widgetItems:Object,formState:Object,setWidgetState:Function},inject:["t"]},"data-v-6fcb9054",false,undefined,!1,void 0,void 0,void 0),form:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{domProps:{innerHTML:e._s(e.widget.properties.html)}})},staticRenderFns:[]},undefined,{props:{widget:Object,widgets:Object,widgetItems:Object,formState:Object,setWidgetState:Function}},undefined,false,undefined,!1,void 0,void 0,void 0),readOnly:Se({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{domProps:{innerHTML:e._s(e.widget.properties.html)}})},staticRenderFns:[]},undefined,{props:{widget:Object,widgets:Object,widgetItems:Object,formState:Object,setWidgetState:Function}},undefined,false,undefined,!1,void 0,void 0,void 0)},pages:or,question:fr,section:vr,separator:pr},br=function(){function e(t){var r=t.widgetState,n=t.widgetCodeToIdMap,i=t.reflexCodeToIdsMap;s(this,e),this._widgetState=r||{},this._widgetCodeToIdMap=n||{},this._reflexCodeToIdsMap=i||{}}return l(e,[{key:"widgetState",get:function(){return this._widgetState}},{key:"widgetCodeToIdMap",get:function(){return this._widgetCodeToIdMap}},{key:"reflexCodeToIdsMap",get:function(){return this._reflexCodeToIdsMap}},{key:"onUpdate",value:function(){}},{key:"getWidgetState",value:function(e,t){var r;return t?null===(r=this._widgetState[e])||void 0===r?void 0:r[t]:this._widgetState[e]}},{key:"setWidgetState",value:function(e,t,r){var n;(this._widgetState[e]||(this._widgetState[e]={}),void 0===r)?null===(n=this._widgetState[e])||void 0===n||delete n[t]:this._widgetState[e][t]=r}},{key:"clearWidgetState",value:function(e,t){this.setWidgetState(e,t)}},{key:"registerWidgetCode",value:function(e,t){this._widgetCodeToIdMap[e]=t,this.setWidgetState(t,"code",e)}},{key:"unregisterWidgetCode",value:function(e){delete this._widgetCodeToIdMap[e]}},{key:"getReflexWidgetIdsByCode",value:function(e){return this._reflexCodeToIdsMap[e]||[]}},{key:"registerReflexWatch",value:function(e,t){var r=this;t.forEach((function(t){r._reflexCodeToIdsMap[t]=m(new Set([].concat(m(r._reflexCodeToIdsMap[t]||[]),[e])))}))}},{key:"unregisterReflexWatch",value:function(e,t){var r=this;t.forEach((function(t){r._reflexCodeToIdsMap[t]=r._reflexCodeToIdsMap[t].filter((function(t){return t!==e}))}))}}],[{key:"from",value:function(t){return new e(t instanceof e?{widgetState:t.widgetState,widgetCodeToIdMap:t.widgetCodeToIdMap,reflexCodeToIdsMap:t.reflexCodeToIdsMap}:{widgetState:t._widgetState,widgetCodeToIdMap:t._widgetCodeToIdMap,reflexCodeToIdsMap:t._reflexCodeToIdsMap})}}]),e}(),mr={components:{WidgetsLayout:Qe},props:{languages:Object,form:Object,onFormChange:Function,state:(Yt=br,De("instanceOf",{type:Yt})).isRequired,onStateChange:Function,widgets:Object,questionControls:Ye(Oe),view:String,configs:Ge({widgets:Ge({disableInternalControls:ze(),blacklist:Ye(Ke()),whitelist:Ye(Ke()),filters:Object}),questionControls:Ge({disableInternalControls:ze(),blacklist:Ye(Ke()),whitelist:Ye(Ke()),filters:Object})})},data:function(){return{combQuestionControls:Ie,combWidgetControls:yr,widgetItems:{}}},computed:{widgetItemsArr:function(){return this.$props.form.widgets},widgetsHandlerWatch:function(){var e;return{widgets:this.$props.widgets,configs:null===(e=this.$props.configs)||void 0===e?void 0:e.widgets}},questionControlsHandlerWatch:function(){var e;return{questionControls:this.$props.questionControls,configs:null===(e=this.$props.configs)||void 0===e?void 0:e.questionControls}},formState:function(){return this.$props.state}},watch:{widgetsHandlerWatch:{handler:function(e){var t,r=e.widgets,n=e.configs;this.$data.combWidgetControls=i(i({},null!=n&&null!==(t=n.widgets)&&void 0!==t&&t.disableInternalControls?{}:yr),r||{})},immediate:!0},questionControlsHandlerWatch:{handler:function(e){var t,r=e.questionControls,n=e.configs;this.$data.combQuestionControls=i(i({},null!=n&&null!==(t=n.questionControls)&&void 0!==t&&t.disableInternalControls?{}:Ie),r||{})},immediate:!0},"form.widgets":{handler:function(e){var t=this;this.$data.widgetItems=e.reduce((function(e,r){var n,o=(null===(n=t.$data.combWidgetControls[r.type])||void 0===n?void 0:n.widgetItem)||nr;return e[r.id]=new o({widget:r,getState:function(){return t.$props.state},setState:function(e){t.$emit("onStateChange",e)},onUpdate:function(e){var r,n;null===(r=(n=t.$props).onFormChange)||void 0===r||r.call(n,i(i({},t.$props.form),{},{widgets:Object.values(i(i({},t.$data.widgetItems),{},c({},e.id,e)))}))}}),e}),{}),Object.values(this.$data.widgetItems).forEach((function(e){e.setWidgetItems(t.$data.widgetItems)}))},immediate:!0,deep:!0}},methods:{t:function(e,t){var r,n=this.languages;return t&&(n=t.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),n)),null===(r=n)||void 0===r?void 0:r[e]}},provide:function(){var e=this;return{getView:function(){return e.$props.view},t:this.t,languages:this.$props.languages,getFormState:function(){return e.$props.state},setFormState:function(t){e.$emit("onStateChange",t)},widgetControls:this.$data.combWidgetControls,questionControls:this.$data.combQuestionControls}}},wr=Se({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-wrapper"},[r("widgets-layout",{attrs:{widgetControls:e.combWidgetControls,widgetItems:e.widgetItems}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-1fd6f641_0",{source:".main-wrapper[data-v-1fd6f641]{font-family:Arial,Helvetica,sans-serif}",map:void 0,media:void 0})}),mr,"data-v-1fd6f641",false,undefined,!1,Pe,void 0,void 0),_r=Object.freeze({__proto__:null,VuePage:wr,WidgetsLayout:Qe,WidgetView:Xe,FormState:br,widgets:yr}),xr=function(e){Object.entries(_r).forEach((function(t){var r=b(t,2),n=r[0],i=r[1];e.component(n,i)}))},Or=Object.freeze({__proto__:null,default:xr,VuePage:wr,WidgetsLayout:Qe,WidgetView:Xe,FormState:br,widgets:yr});return Object.entries(Or).forEach((function(e){var t=b(e,2),r=t[0],n=t[1];"default"!==r&&(xr[r]=n)})),xr}(vm);